(this["webpackJsonpthreejs-editor-react"]=this["webpackJsonpthreejs-editor-react"]||[]).push([[0],{1:function(e,t,a){"use strict";a.d(t,"f",(function(){return d})),a.d(t,"n",(function(){return l})),a.d(t,"e",(function(){return c})),a.d(t,"l",(function(){return u})),a.d(t,"k",(function(){return h})),a.d(t,"p",(function(){return m})),a.d(t,"h",(function(){return p})),a.d(t,"q",(function(){return b})),a.d(t,"m",(function(){return g})),a.d(t,"c",(function(){return y})),a.d(t,"d",(function(){return v})),a.d(t,"j",(function(){return f})),a.d(t,"i",(function(){return w})),a.d(t,"a",(function(){return j})),a.d(t,"g",(function(){return x})),a.d(t,"b",(function(){return O})),a.d(t,"o",(function(){return S}));var i=a(16),r=a(5),n=a(6),o=a(3),s=a(4),d=function(){function e(t){Object(o.a)(this,e),this.dom=t}return Object(s.a)(e,[{key:"add",value:function(){for(var t=0;t<arguments.length;t++){var a=arguments[t];a instanceof e?this.dom.appendChild(a.dom):console.error("UIElement:",a,"is not an instance of UIElement.")}return this}},{key:"remove",value:function(){for(var t=0;t<arguments.length;t++){var a=arguments[t];a instanceof e?this.dom.removeChild(a.dom):console.error("UIElement:",a,"is not an instance of UIElement.")}return this}},{key:"clear",value:function(){for(;this.dom.children.length;)this.dom.removeChild(this.dom.lastChild)}},{key:"setId",value:function(e){return this.dom.id=e,this}},{key:"getId",value:function(){return this.dom.id}},{key:"setClass",value:function(e){return this.dom.className=e,this}},{key:"addClass",value:function(e){return this.dom.classList.add(e),this}},{key:"removeClass",value:function(e){return this.dom.classList.remove(e),this}},{key:"setStyle",value:function(e,t){for(var a=0;a<t.length;a++)this.dom.style[e]=t[a];return this}},{key:"setDisabled",value:function(e){return this.dom.disabled=e,this}},{key:"setTextContent",value:function(e){return this.dom.textContent=e,this}},{key:"setInnerHTML",value:function(e){this.dom.innerHTML=e}},{key:"getIndexOfChild",value:function(e){return Array.prototype.indexOf.call(this.dom.children,e.dom)}}]),e}();["position","left","top","right","bottom","width","height","border","borderLeft","borderTop","borderRight","borderBottom","borderColor","display","overflow","margin","marginLeft","marginTop","marginRight","marginBottom","padding","paddingLeft","paddingTop","paddingRight","paddingBottom","verticalAlign","color","background","backgroundColor","opacity","fontSize","fontWeight","textAlign","textDecoration","textTransform","cursor","zIndex"].forEach((function(e){var t="set"+e.substr(0,1).toUpperCase()+e.substr(1,e.length);d.prototype[t]=function(){return this.setStyle(e,arguments),this}}));["KeyUp","KeyDown","MouseOver","MouseOut","Click","DblClick","Change","Input"].forEach((function(e){var t="on"+e;d.prototype[t]=function(t){return this.dom.addEventListener(e.toLowerCase(),t.bind(this),!1),this}}));var l=function(e){Object(r.a)(a,e);var t=Object(n.a)(a);function a(){return Object(o.a)(this,a),t.call(this,document.createElement("span"))}return a}(d),c=function(e){Object(r.a)(a,e);var t=Object(n.a)(a);function a(){return Object(o.a)(this,a),t.call(this,document.createElement("div"))}return a}(d),u=function(e){Object(r.a)(a,e);var t=Object(n.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).dom.className="Row",e}return a}(c),h=function(e){Object(r.a)(a,e);var t=Object(n.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).dom.className="Panel",e}return a}(c),m=function(e){Object(r.a)(a,e);var t=Object(n.a)(a);function a(e){var i;return Object(o.a)(this,a),(i=t.call(this)).dom.className="Text",i.dom.style.cursor="default",i.dom.style.display="inline-block",i.setValue(e),i}return Object(s.a)(a,[{key:"getValue",value:function(){return this.dom.textContent}},{key:"setValue",value:function(e){return void 0!==e&&(this.dom.textContent=e),this}}]),a}(l),p=function(e){Object(r.a)(a,e);var t=Object(n.a)(a);function a(e){var i;return Object(o.a)(this,a),(i=t.call(this,document.createElement("input"))).dom.className="Input",i.dom.style.padding="2px",i.dom.style.border="1px solid transparent",i.dom.setAttribute("autocomplete","off"),i.dom.addEventListener("keydown",(function(e){e.stopPropagation()}),!1),i.setValue(e),i}return Object(s.a)(a,[{key:"getValue",value:function(){return this.dom.value}},{key:"setValue",value:function(e){return this.dom.value=e,this}}]),a}(d),b=function(e){Object(r.a)(a,e);var t=Object(n.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this,document.createElement("textarea"))).dom.className="TextArea",e.dom.style.padding="2px",e.dom.spellcheck=!1,e.dom.setAttribute("autocomplete","off"),e.dom.addEventListener("keydown",(function(t){if(t.stopPropagation(),9===t.keyCode){t.preventDefault();var a=e.dom.selectionStart;e.dom.value=e.dom.value.substring(0,a)+"\t"+e.dom.value.substring(a),e.dom.selectionStart=a+1,e.dom.selectionEnd=e.dom.selectionStart}}),!1),e}return Object(s.a)(a,[{key:"getValue",value:function(){return this.dom.value}},{key:"setValue",value:function(e){return this.dom.value=e,this}}]),a}(d),g=function(e){Object(r.a)(a,e);var t=Object(n.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this,document.createElement("select"))).dom.className="Select",e.dom.style.padding="2px",e.dom.setAttribute("autocomplete","off"),e}return Object(s.a)(a,[{key:"setMultiple",value:function(e){return this.dom.multiple=e,this}},{key:"setOptions",value:function(e){for(var t=this.dom.value;this.dom.children.length>0;)this.dom.removeChild(this.dom.firstChild);for(var a in e){var i=document.createElement("option");i.value=a,i.innerHTML=e[a],this.dom.appendChild(i)}return this.dom.value=t,this}},{key:"getValue",value:function(){return this.dom.value}},{key:"setValue",value:function(e){return e=String(e),this.dom.value!==e&&(this.dom.value=e),this}}]),a}(d),y=function(e){Object(r.a)(a,e);var t=Object(n.a)(a);function a(e){var i;return Object(o.a)(this,a),(i=t.call(this,document.createElement("input"))).dom.className="Checkbox",i.dom.type="checkbox",i.setValue(e),i}return Object(s.a)(a,[{key:"getValue",value:function(){return this.dom.checked}},{key:"setValue",value:function(e){return void 0!==e&&(this.dom.checked=e),this}}]),a}(d),v=function(e){Object(r.a)(a,e);var t=Object(n.a)(a);function a(){var e;Object(o.a)(this,a),(e=t.call(this,document.createElement("input"))).dom.className="Color",e.dom.style.width="32px",e.dom.style.height="16px",e.dom.style.border="0px",e.dom.style.padding="2px",e.dom.style.backgroundColor="transparent",e.dom.setAttribute("autocomplete","off");try{e.dom.type="color",e.dom.value="#ffffff"}catch(i){}return e}return Object(s.a)(a,[{key:"getValue",value:function(){return this.dom.value}},{key:"getHexValue",value:function(){return parseInt(this.dom.value.substr(1),16)}},{key:"setValue",value:function(e){return this.dom.value=e,this}},{key:"setHexValue",value:function(e){return this.dom.value="#"+("000000"+e.toString(16)).slice(-6),this}}]),a}(d),f=function(e){Object(r.a)(a,e);var t=Object(n.a)(a);function a(e){var r;Object(o.a)(this,a),(r=t.call(this,document.createElement("input"))).dom.style.cursor="ns-resize",r.dom.className="Number",r.dom.value="0.00",r.dom.setAttribute("autocomplete","off"),r.value=0,r.min=-1/0,r.max=1/0,r.precision=2,r.step=1,r.unit="",r.nudge=.01,r.setValue(e);var n=Object(i.a)(r),s=document.createEvent("HTMLEvents");s.initEvent("change",!0,!0);var d=0,l=0,c={x:0,y:0},u={x:0,y:0};function h(e){var t=n.value;c.x=e.clientX,c.y=e.clientY,d+=c.x-u.x-(c.y-u.y);var a=l+d/(e.shiftKey?5:50)*n.step;t!==(a=Math.min(n.max,Math.max(n.min,a)))&&(n.setValue(a),n.dom.dispatchEvent(s)),u.x=e.clientX,u.y=e.clientY}function m(){document.removeEventListener("mousemove",h,!1),document.removeEventListener("mouseup",m,!1),Math.abs(d)<2&&(n.dom.focus(),n.dom.select())}function p(e){var t=n.value;c.x=e.touches[0].pageX,c.y=e.touches[0].pageY,d+=c.x-u.x-(c.y-u.y);var a=l+d/(e.shiftKey?5:50)*n.step;t!==(a=Math.min(n.max,Math.max(n.min,a)))&&(n.setValue(a),n.dom.dispatchEvent(s)),u.x=e.touches[0].pageX,u.y=e.touches[0].pageY}function b(e){0===e.touches.length&&(document.removeEventListener("touchmove",p,!1),document.removeEventListener("touchend",b,!1))}function g(){n.dom.style.backgroundColor="transparent",n.dom.style.cursor="ns-resize"}return g(),r.dom.addEventListener("keydown",(function(e){switch(e.stopPropagation(),e.keyCode){case 13:n.dom.blur();break;case 38:e.preventDefault(),n.setValue(n.getValue()+n.nudge),n.dom.dispatchEvent(s);break;case 40:e.preventDefault(),n.setValue(n.getValue()-n.nudge),n.dom.dispatchEvent(s)}}),!1),r.dom.addEventListener("mousedown",(function(e){e.preventDefault(),d=0,l=n.value,u.x=e.clientX,u.y=e.clientY,document.addEventListener("mousemove",h,!1),document.addEventListener("mouseup",m,!1)}),!1),r.dom.addEventListener("touchstart",(function(e){1===e.touches.length&&(d=0,l=n.value,u.x=e.touches[0].pageX,u.y=e.touches[0].pageY,document.addEventListener("touchmove",p,!1),document.addEventListener("touchend",b,!1))}),!1),r.dom.addEventListener("change",(function(){n.setValue(n.dom.value)}),!1),r.dom.addEventListener("focus",(function(){n.dom.style.backgroundColor="",n.dom.style.cursor=""}),!1),r.dom.addEventListener("blur",g,!1),r}return Object(s.a)(a,[{key:"getValue",value:function(){return this.value}},{key:"setValue",value:function(e){return void 0!==e&&((e=parseFloat(e))<this.min&&(e=this.min),e>this.max&&(e=this.max),this.value=e,this.dom.value=e.toFixed(this.precision),""!==this.unit&&(this.dom.value+=" "+this.unit)),this}},{key:"setPrecision",value:function(e){return this.precision=e,this}},{key:"setStep",value:function(e){return this.step=e,this}},{key:"setNudge",value:function(e){return this.nudge=e,this}},{key:"setRange",value:function(e,t){return this.min=e,this.max=t,this}},{key:"setUnit",value:function(e){return this.unit=e,this}}]),a}(d),w=function(e){Object(r.a)(a,e);var t=Object(n.a)(a);function a(e){var r;Object(o.a)(this,a),(r=t.call(this,document.createElement("input"))).dom.style.cursor="ns-resize",r.dom.className="Number",r.dom.value="0",r.dom.setAttribute("autocomplete","off"),r.value=0,r.min=-1/0,r.max=1/0,r.step=1,r.nudge=1,r.setValue(e);var n=Object(i.a)(r),s=document.createEvent("HTMLEvents");s.initEvent("change",!0,!0);var d=0,l=0,c={x:0,y:0},u={x:0,y:0};function h(e){var t=n.value;c.x=e.clientX,c.y=e.clientY,d+=c.x-u.x-(c.y-u.y);var a=l+d/(e.shiftKey?5:50)*n.step;t!==(a=0|Math.min(n.max,Math.max(n.min,a)))&&(n.setValue(a),n.dom.dispatchEvent(s)),u.x=e.clientX,u.y=e.clientY}function m(){document.removeEventListener("mousemove",h,!1),document.removeEventListener("mouseup",m,!1),Math.abs(d)<2&&(n.dom.focus(),n.dom.select())}function p(){n.dom.style.backgroundColor="transparent",n.dom.style.cursor="ns-resize"}return p(),r.dom.addEventListener("keydown",(function(e){switch(e.stopPropagation(),e.keyCode){case 13:n.dom.blur();break;case 38:e.preventDefault(),n.setValue(n.getValue()+n.nudge),n.dom.dispatchEvent(s);break;case 40:e.preventDefault(),n.setValue(n.getValue()-n.nudge),n.dom.dispatchEvent(s)}}),!1),r.dom.addEventListener("mousedown",(function(e){e.preventDefault(),d=0,l=n.value,u.x=e.clientX,u.y=e.clientY,document.addEventListener("mousemove",h,!1),document.addEventListener("mouseup",m,!1)}),!1),r.dom.addEventListener("change",(function(){n.setValue(n.dom.value)}),!1),r.dom.addEventListener("focus",(function(){n.dom.style.backgroundColor="",n.dom.style.cursor=""}),!1),r.dom.addEventListener("blur",p,!1),r}return Object(s.a)(a,[{key:"getValue",value:function(){return this.value}},{key:"setValue",value:function(e){return void 0!==e&&(e=parseInt(e),this.value=e,this.dom.value=e),this}},{key:"setStep",value:function(e){return this.step=parseInt(e),this}},{key:"setNudge",value:function(e){return this.nudge=e,this}},{key:"setRange",value:function(e,t){return this.min=e,this.max=t,this}}]),a}(d),j=function(e){Object(r.a)(a,e);var t=Object(n.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this,document.createElement("br"))).dom.className="Break",e}return a}(d),x=function(e){Object(r.a)(a,e);var t=Object(n.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this,document.createElement("hr"))).dom.className="HorizontalRule",e}return a}(d),O=function(e){Object(r.a)(a,e);var t=Object(n.a)(a);function a(e){var i;return Object(o.a)(this,a),(i=t.call(this,document.createElement("button"))).dom.className="Button",i.dom.textContent=e,i}return a}(d),S=function(e){Object(r.a)(a,e);var t=Object(n.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).dom.className="TabbedPanel",e.tabs=[],e.panels=[],e.tabsDiv=new c,e.tabsDiv.setClass("Tabs"),e.panelsDiv=new c,e.panelsDiv.setClass("Panels"),e.add(e.tabsDiv),e.add(e.panelsDiv),e.selected="",e}return Object(s.a)(a,[{key:"select",value:function(e){var t,a,i=this;return this.selected&&this.selected.length&&(t=this.tabs.find((function(e){return e.dom.id===i.selected})),a=this.panels.find((function(e){return e.dom.id===i.selected})),t&&t.removeClass("selected"),a&&a.setDisplay("none")),t=this.tabs.find((function(t){return t.dom.id===e})),a=this.panels.find((function(t){return t.dom.id===e})),t&&t.addClass("selected"),a&&a.setDisplay(""),this.selected=e,this}},{key:"addTab",value:function(e,t,a){var i=new C(t,this);i.setId(e),this.tabs.push(i),this.tabsDiv.add(i);var r=new c;r.setId(e),r.add(a),r.setDisplay("none"),this.panels.push(r),this.panelsDiv.add(r),this.select(e)}}]),a}(c),C=function(e){Object(r.a)(a,e);var t=Object(n.a)(a);function a(e,r){var n;Object(o.a)(this,a),(n=t.call(this,e)).dom.className="Tab",n.parent=r;var s=Object(i.a)(n);return n.dom.addEventListener("click",(function(){s.parent.select(s.dom.id)})),n}return a}(m)},14:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var i=a(3),r=a(4),n=function(){function e(t){Object(i.a)(this,e),this.id=-1,this.inMemory=!1,this.updatable=!1,this.type="",this.name="",this.editor=t}return Object(r.a)(e,[{key:"toJSON",value:function(){var e={};return e.type=this.type,e.id=this.id,e.name=this.name,e}},{key:"fromJSON",value:function(e){this.inMemory=!0,this.type=e.type,this.id=e.id,this.name=e.name}}]),e}()},22:function(e,t,a){"use strict";a.d(t,"e",(function(){return g})),a.d(t,"b",(function(){return y})),a.d(t,"c",(function(){return f})),a.d(t,"d",(function(){return w})),a.d(t,"a",(function(){return j}));var i,r=a(3),n=a(4),o=a(16),s=a(5),d=a(6),l=a(0),c=a(8),u=a(7),h=function(e){Object(s.a)(a,e);var t=Object(d.a)(a);function a(e){var i;return Object(r.a)(this,a),(i=t.call(this,e)).type=l.HalfFloatType,i}return Object(n.a)(a,[{key:"parse",value:function(e){var t=function(e,t){switch(e){case 1:console.error("THREE.RGBELoader Read Error: "+(t||""));break;case 2:console.error("THREE.RGBELoader Write Error: "+(t||""));break;case 3:console.error("THREE.RGBELoader Bad File Format: "+(t||""));break;default:case 4:console.error("THREE.RGBELoader: Error: "+(t||""))}return-1},a=function(e,t,a){t=t||1024;for(var i=e.pos,r=-1,n=0,o="",s=String.fromCharCode.apply(null,new Uint16Array(e.subarray(i,i+128)));0>(r=s.indexOf("\n"))&&n<t&&i<e.byteLength;)o+=s,n+=s.length,i+=128,s+=String.fromCharCode.apply(null,new Uint16Array(e.subarray(i,i+128)));return-1<r&&(!1!==a&&(e.pos+=n+r+1),o+s.slice(0,r))},i=function(e,t,a,i){var r=e[t+3],n=Math.pow(2,r-128)/255;a[i+0]=e[t+0]*n,a[i+1]=e[t+1]*n,a[i+2]=e[t+2]*n},r=function(e,t,a,i){var r=e[t+3],n=Math.pow(2,r-128)/255;a[i+0]=l.DataUtils.toHalfFloat(e[t+0]*n),a[i+1]=l.DataUtils.toHalfFloat(e[t+1]*n),a[i+2]=l.DataUtils.toHalfFloat(e[t+2]*n)},n=new Uint8Array(e);n.pos=0;var o=function(e){var i,r,n=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,o=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,s=/^\s*FORMAT=(\S+)\s*$/,d=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,l={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};if(e.pos>=e.byteLength||!(i=a(e)))return t(1,"no header found");if(!(r=i.match(/^#\?(\S+)/)))return t(3,"bad initial token");for(l.valid|=1,l.programtype=r[1],l.string+=i+"\n";!1!==(i=a(e));)if(l.string+=i+"\n","#"!==i.charAt(0)){if((r=i.match(n))&&(l.gamma=parseFloat(r[1],10)),(r=i.match(o))&&(l.exposure=parseFloat(r[1],10)),(r=i.match(s))&&(l.valid|=2,l.format=r[1]),(r=i.match(d))&&(l.valid|=4,l.height=parseInt(r[1],10),l.width=parseInt(r[2],10)),2&l.valid&&4&l.valid)break}else l.comments+=i+"\n";return 2&l.valid?4&l.valid?l:t(3,"missing image size specifier"):t(3,"missing format specifier")}(n);if(-1!==o){var s=o.width,d=o.height,c=function(e,a,i){var r=a;if(r<8||r>32767||2!==e[0]||2!==e[1]||128&e[2])return new Uint8Array(e);if(r!==(e[2]<<8|e[3]))return t(3,"wrong scanline width");var n=new Uint8Array(4*a*i);if(!n.length)return t(4,"unable to allocate buffer space");for(var o=0,s=0,d=4*r,l=new Uint8Array(4),c=new Uint8Array(d),u=i;u>0&&s<e.byteLength;){if(s+4>e.byteLength)return t(1);if(l[0]=e[s++],l[1]=e[s++],l[2]=e[s++],l[3]=e[s++],2!=l[0]||2!=l[1]||(l[2]<<8|l[3])!=r)return t(3,"bad rgbe scanline format");for(var h=0,m=void 0;h<d&&s<e.byteLength;){var p=(m=e[s++])>128;if(p&&(m-=128),0===m||h+m>d)return t(3,"bad scanline data");if(p)for(var b=e[s++],g=0;g<m;g++)c[h++]=b;else c.set(e.subarray(s,s+m),h),h+=m,s+=m}for(var y=r,v=0;v<y;v++){var f=0;n[o]=c[v+f],f+=r,n[o+1]=c[v+f],f+=r,n[o+2]=c[v+f],f+=r,n[o+3]=c[v+f],o+=4}u--}return n}(n.subarray(n.pos),s,d);if(-1!==c){var u,h,m,p;switch(this.type){case l.UnsignedByteType:u=c,h=l.RGBEFormat,m=l.UnsignedByteType;break;case l.FloatType:p=c.length/4*3;for(var b=new Float32Array(p),g=0;g<p;g++)i(c,4*g,b,3*g);u=b,h=l.RGBFormat,m=l.FloatType;break;case l.HalfFloatType:p=c.length/4*3;for(var y=new Uint16Array(p),v=0;v<p;v++)r(c,4*v,y,3*v);u=y,h=l.RGBFormat,m=l.HalfFloatType;break;default:console.error("THREE.RGBELoader: unsupported type: ",this.type)}return{width:s,height:d,data:u,header:o.string,gamma:o.gamma,exposure:o.exposure,format:h,type:m}}}return null}},{key:"setDataType",value:function(e){return this.type=e,this}},{key:"load",value:function(e,t,i,r){return Object(c.a)(Object(u.a)(a.prototype),"load",this).call(this,e,(function(e,a){switch(e.type){case l.UnsignedByteType:e.encoding=l.RGBEEncoding,e.minFilter=l.NearestFilter,e.magFilter=l.NearestFilter,e.generateMipmaps=!1,e.flipY=!0;break;case l.FloatType:case l.HalfFloatType:e.encoding=l.LinearEncoding,e.minFilter=l.LinearFilter,e.magFilter=l.LinearFilter,e.generateMipmaps=!1,e.flipY=!0}t&&t(e,a)}),i,r)}}]),a}(l.DataTextureLoader),m=a(47),p=a(1),b=a(46),g=function(e){Object(s.a)(a,e);var t=Object(d.a)(a);function a(e){var i;Object(r.a)(this,a),i=t.call(this);var n=Object(o.a)(i),s=document.createElement("form"),d=document.createElement("input");d.type="file",d.addEventListener("change",(function(e){u(e.target.files[0])})),s.appendChild(d);var c=document.createElement("canvas");function u(t){var a=t.name.split(".").pop().toLowerCase(),i=new FileReader;"hdr"===a?(i.addEventListener("load",(function(e){(new h).setDataType(l.FloatType).load(e.target.result,(function(e){e.sourceFile=t.name,e.isHDRTexture=!0,n.setValue(e),n.onChangeCallback&&n.onChangeCallback(e)}))})),i.readAsDataURL(t)):"tga"===a?(i.addEventListener("load",(function(a){var i=(new m.a).parse(a.target.result),r=new l.CanvasTexture(i,e);r.sourceFile=t.name,n.setValue(r),n.onChangeCallback&&n.onChangeCallback(r)}),!1),i.readAsArrayBuffer(t)):t.type.match("image.*")&&(i.addEventListener("load",(function(a){var i=document.createElement("img");i.addEventListener("load",(function(){var a=new l.Texture(this,e);a.sourceFile=t.name,a.format="image/jpeg"===t.type?l.RGBFormat:l.RGBAFormat,a.needsUpdate=!0,n.setValue(a),n.onChangeCallback&&n.onChangeCallback(a)}),!1),i.src=a.target.result}),!1),i.readAsDataURL(t)),s.reset()}return c.width=32,c.height=16,c.style.cursor="pointer",c.style.marginRight="5px",c.style.border="1px solid #888",c.addEventListener("click",(function(){d.click()}),!1),c.addEventListener("drop",(function(e){e.preventDefault(),e.stopPropagation(),u(e.dataTransfer.files[0])}),!1),i.dom.appendChild(c),i.texture=null,i.onChangeCallback=null,i}return Object(n.a)(a,[{key:"getValue",value:function(){return this.texture}},{key:"setValue",value:function(e){var t=this.dom.children[0],a=t.getContext("2d");if(a&&a.clearRect(0,0,t.width,t.height),null!==e){var r=e.image;if(void 0!==r&&r.width>0){t.title=e.sourceFile;var n=t.width/r.width;if(void 0===r.data)a.drawImage(r,0,0,r.width*n,r.height*n);else{var o=function(e){void 0===i&&((i=new l.WebGLRenderer).outputEncoding=l.sRGBEncoding);var t=e.image;i.setSize(t.width,t.height,!1);var a=new l.Scene,r=new l.OrthographicCamera(-1,1,1,-1,0,1),n=new l.MeshBasicMaterial({map:e}),o=new l.PlaneGeometry(2,2),s=new l.Mesh(o,n);return a.add(s),i.render(a,r),i.domElement}(e);a.drawImage(o,0,0,r.width*n,r.height*n)}}else t.title=e.sourceFile+" (error)"}else t.title="empty";this.texture=e}},{key:"setEncoding",value:function(e){var t=this.getValue();return null!==t&&(t.encoding=e),this}},{key:"onChange",value:function(e){return this.onChangeCallback=e,this}}]),a}(p.n),y=(p.f,function(e){Object(s.a)(a,e);var t=Object(d.a)(a);function a(e){var i;Object(r.a)(this,a),(i=t.call(this)).dom.className="Outliner",i.dom.tabIndex=0;var n=Object(o.a)(i);return i.scene=e.scene,i.dom.addEventListener("keydown",(function(e){switch(e.keyCode){case 38:case 40:e.preventDefault(),e.stopPropagation()}}),!1),i.dom.addEventListener("keyup",(function(e){switch(e.keyCode){case 38:n.selectIndex(n.selectedIndex-1);break;case 40:n.selectIndex(n.selectedIndex+1)}}),!1),i.editor=e,i.options=[],i.selectedIndex=-1,i.selectedValue=null,i}return Object(n.a)(a,[{key:"selectIndex",value:function(e){if(e>=0&&e<this.options.length){this.setValue(this.options[e].value);var t=document.createEvent("HTMLEvents");t.initEvent("change",!0,!0),this.dom.dispatchEvent(t)}}},{key:"setOptions",value:function(e){for(var t,a=this;a.dom.children.length>0;)a.dom.removeChild(a.dom.firstChild);function i(){a.setValue(this.value);var e=document.createEvent("HTMLEvents");e.initEvent("change",!0,!0),a.dom.dispatchEvent(e)}function r(){t=this}function n(e){e.dataTransfer.setData("text","foo")}function o(e){if(this!==t){var a=e.offsetY/this.clientHeight;this.className=a<.25?"option dragTop":a>.75?"option dragBottom":"option drag"}}function s(){this!==t&&(this.className="option")}function d(e){if(this!==t&&void 0!==t){this.className="option";var i=a.scene,r=i.getObjectById(t.value),n=e.offsetY/this.clientHeight;if(n<.25){var o=i.getObjectById(this.value);l(r,o.parent,o)}else if(n>.75){var s,d;null!==this.nextSibling?d=(s=i.getObjectById(this.nextSibling.value)).parent:(s=null,d=i.getObjectById(this.value).parent),l(r,d,s)}else{l(r,i.getObjectById(this.value))}}}function l(e,t,i){null===i&&(i=void 0);var r=!1;if(e.traverse((function(e){e===t&&(r=!0)})),!r){var n=a.editor;n.execute(new b.a(n,e,t,i));var o=document.createEvent("HTMLEvents");o.initEvent("change",!0,!0),a.dom.dispatchEvent(o)}}a.options=[];for(var c=0;c<e.length;c++){var u=e[c];u.className="option",a.dom.appendChild(u),a.options.push(u),u.addEventListener("click",i),!0===u.draggable&&(u.addEventListener("drag",r),u.addEventListener("dragstart",n),u.addEventListener("dragover",o),u.addEventListener("dragleave",s),u.addEventListener("drop",d))}return a}},{key:"getValue",value:function(){return this.selectedValue}},{key:"setValue",value:function(e){for(var t=0;t<this.options.length;t++){var a=this.options[t];if(a.value===e){a.classList.add("active");var i=a.offsetTop-this.dom.offsetTop,r=i+a.offsetHeight-this.dom.offsetHeight;this.dom.scrollTop>i?this.dom.scrollTop=i:this.dom.scrollTop<r&&(this.dom.scrollTop=r),this.selectedIndex=t}else a.classList.remove("active")}return this.selectedValue=e,this}}]),a}(p.e)),v=function(e){Object(s.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(r.a)(this,a),(e=t.call(this)).dom.style.display="inline-block",e.pointsList=new p.e,e.add(e.pointsList),e.pointsUI=[],e.lastPointIdx=0,e.onChangeCallback=null,e.update=function(){null!==this.onChangeCallback&&this.onChangeCallback()}.bind(Object(o.a)(e)),e}return Object(n.a)(a,[{key:"onChange",value:function(e){return this.onChangeCallback=e,this}},{key:"clear",value:function(){for(var e=0;e<this.pointsUI.length;++e)this.pointsUI[e]&&this.deletePointRow(e,!0);this.lastPointIdx=0}},{key:"deletePointRow",value:function(e,t){this.pointsUI[e]&&(this.pointsList.remove(this.pointsUI[e].row),this.pointsUI.splice(e,1),!0!==t&&this.update(),this.lastPointIdx--)}}]),a}(p.n),f=function(e){Object(s.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(r.a)(this,a),e=t.call(this);var i=new p.l;e.add(i);var n=new p.b("+");return n.onClick((function(){if(0===e.pointsUI.length)e.pointsList.add(e.createPointRow(0,0));else{var t=e.pointsUI[e.pointsUI.length-1];e.pointsList.add(e.createPointRow(t.x.getValue(),t.y.getValue()))}e.update()})),i.add(n),e}return Object(n.a)(a,[{key:"getValue",value:function(){for(var e=[],t=0,a=0;a<this.pointsUI.length;a++){var i=this.pointsUI[a];i&&(e.push(new l.Vector2(i.x.getValue(),i.y.getValue())),++t,i.lbl.setValue(t))}return e}},{key:"setValue",value:function(e){this.clear();for(var t=0;t<e.length;t++){var a=e[t];this.pointsList.add(this.createPointRow(a.x,a.y))}return this.update(),this}},{key:"createPointRow",value:function(e,t){var a=new p.e,i=new p.p(this.lastPointIdx+1).setWidth("20px"),r=new p.j(e).setWidth("30px").onChange(this.update),n=new p.j(t).setWidth("30px").onChange(this.update),o=this,s=new p.b("-").onClick((function(){if(!o.isEditing){var e=o.pointsList.getIndexOfChild(a);o.deletePointRow(e)}}));return this.pointsUI.push({row:a,lbl:i,x:r,y:n}),++this.lastPointIdx,a.add(i,r,n,s),a}}]),a}(v),w=function(e){Object(s.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(r.a)(this,a),e=t.call(this);var i=new p.l;e.add(i);var n=new p.b("+");return n.onClick((function(){if(0===e.pointsUI.length)e.pointsList.add(e.createPointRow(0,0,0));else{var t=e.pointsUI[e.pointsUI.length-1];e.pointsList.add(e.createPointRow(t.x.getValue(),t.y.getValue(),t.z.getValue()))}e.update()})),i.add(n),e}return Object(n.a)(a,[{key:"getValue",value:function(){for(var e=[],t=0,a=0;a<this.pointsUI.length;a++){var i=this.pointsUI[a];i&&(e.push(new l.Vector3(i.x.getValue(),i.y.getValue(),i.z.getValue())),++t,i.lbl.setValue(t))}return e}},{key:"setValue",value:function(e){this.clear();for(var t=0;t<e.length;t++){var a=e[t];this.pointsList.add(this.createPointRow(a.x,a.y,a.z))}return this.update(),this}},{key:"createPointRow",value:function(e,t,a){var i=new p.e,r=new p.p(this.lastPointIdx+1).setWidth("20px"),n=new p.j(e).setWidth("30px").onChange(this.update),o=new p.j(t).setWidth("30px").onChange(this.update),s=new p.j(a).setWidth("30px").onChange(this.update),d=this,l=new p.b("-").onClick((function(){if(!d.isEditing){var e=d.pointsList.getIndexOfChild(i);d.deletePointRow(e)}}));return this.pointsUI.push({row:i,lbl:r,x:n,y:o,z:s}),++this.lastPointIdx,i.add(r,n,o,s,l),i}}]),a}(v),j=function(e){Object(s.a)(a,e);var t=Object(d.a)(a);function a(e,i){var n;return Object(r.a)(this,a),(n=t.call(this)).setMarginRight("4px"),n.checkbox=new p.c(e),n.text=new p.p(i).setMarginLeft("3px"),n.add(n.checkbox),n.add(n.text),n}return Object(n.a)(a,[{key:"getValue",value:function(){return this.checkbox.getValue()}},{key:"setValue",value:function(e){return this.checkbox.setValue(e)}}]),a}(p.n)},46:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var i=a(3),r=a(4),n=a(8),o=a(7),s=a(5),d=a(6),l=function(e){Object(s.a)(a,e);var t=Object(d.a)(a);function a(e,r,n,o){var s;return Object(i.a)(this,a),(s=t.call(this,e)).type="MoveObjectCommand",s.name="Move Object",s.object=r,s.oldParent=void 0!==r?r.parent:void 0,s.oldIndex=void 0!==s.oldParent?s.oldParent.children.indexOf(s.object):void 0,s.newParent=n,s.newIndex=void 0!==o?void 0!==n?n.children.indexOf(o):void 0:void 0!==n?n.children.length:void 0,s.oldParent===s.newParent&&s.newIndex>s.oldIndex&&s.newIndex--,s.newBefore=o,s}return Object(r.a)(a,[{key:"execute",value:function(){this.oldParent.remove(this.object),this.newParent.children.splice(this.newIndex,0,this.object),this.object.parent=this.newParent,this.object.dispatchEvent({type:"added"}),this.editor.signals.sceneGraphChanged.dispatch()}},{key:"undo",value:function(){this.newParent.remove(this.object),this.oldParent.children.splice(this.oldIndex,0,this.object),this.object.parent=this.oldParent,this.object.dispatchEvent({type:"added"}),this.editor.signals.sceneGraphChanged.dispatch()}},{key:"toJSON",value:function(){var e=Object(n.a)(Object(o.a)(a.prototype),"toJSON",this).call(this,this);return e.objectUuid=this.object.uuid,e.newParentUuid=this.newParent.uuid,e.oldParentUuid=this.oldParent.uuid,e.newIndex=this.newIndex,e.oldIndex=this.oldIndex,e}},{key:"fromJSON",value:function(e){Object(n.a)(Object(o.a)(a.prototype),"fromJSON",this).call(this,e),this.object=this.editor.objectByUuid(e.objectUuid),this.oldParent=this.editor.objectByUuid(e.oldParentUuid),void 0===this.oldParent&&(this.oldParent=this.editor.scene),this.newParent=this.editor.objectByUuid(e.newParentUuid),void 0===this.newParent&&(this.newParent=this.editor.scene),this.newIndex=e.newIndex,this.oldIndex=e.oldIndex}}]),a}(a(14).a)},47:function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));var i=a(3),r=a(4),n=a(5),o=a(6),s=a(0),d=function(e){Object(n.a)(a,e);var t=Object(o.a)(a);function a(e){return Object(i.a)(this,a),t.call(this,e)}return Object(r.a)(a,[{key:"parse",value:function(e){var t=0,a=1,i=2,r=3,n=9,o=10,d=11,l=48,c=4,u=0,h=1,m=2,p=3;e.length<19&&console.error("THREE.TGALoader: Not enough data to contain header.");var b=0,g=new Uint8Array(e),y={id_length:g[b++],colormap_type:g[b++],image_type:g[b++],colormap_index:g[b++]|g[b++]<<8,colormap_length:g[b++]|g[b++]<<8,colormap_size:g[b++],origin:[g[b++]|g[b++]<<8,g[b++]|g[b++]<<8],width:g[b++]|g[b++]<<8,height:g[b++]|g[b++]<<8,pixel_size:g[b++],flags:g[b++]};!function(e){switch(e.image_type){case a:case n:(e.colormap_length>256||24!==e.colormap_size||1!==e.colormap_type)&&console.error("THREE.TGALoader: Invalid type colormap data for indexed type.");break;case i:case r:case o:case d:e.colormap_type&&console.error("THREE.TGALoader: Invalid type colormap data for colormap type.");break;case t:console.error("THREE.TGALoader: No data.");default:console.error('THREE.TGALoader: Invalid type "%s".',e.image_type)}(e.width<=0||e.height<=0)&&console.error("THREE.TGALoader: Invalid image size."),8!==e.pixel_size&&16!==e.pixel_size&&24!==e.pixel_size&&32!==e.pixel_size&&console.error('THREE.TGALoader: Invalid pixel size "%s".',e.pixel_size)}(y),y.id_length+b>e.length&&console.error("THREE.TGALoader: No data."),b+=y.id_length;var v=!1,f=!1,w=!1;switch(y.image_type){case n:v=!0,f=!0;break;case a:f=!0;break;case o:v=!0;break;case i:break;case d:v=!0,w=!0;break;case r:w=!0}var j=new Uint8Array(y.width*y.height*4),x=function(e,t,a,i,r){var n,o,s=a.pixel_size>>3,d=a.width*a.height*s;if(t&&(o=r.subarray(i,i+=a.colormap_length*(a.colormap_size>>3))),e){var l,c,u;n=new Uint8Array(d);for(var h=0,m=new Uint8Array(s);h<d;)if(c=1+(127&(l=r[i++])),128&l){for(u=0;u<s;++u)m[u]=r[i++];for(u=0;u<c;++u)n.set(m,h+u*s);h+=s*c}else{for(c*=s,u=0;u<c;++u)n[h+u]=r[i++];h+=c}}else n=r.subarray(i,i+=t?a.width*a.height:d);return{pixel_data:n,palettes:o}}(v,f,y,b,g);return function(e,t,a,i,r){var n,o,s,d,b,g;switch((y.flags&l)>>c){default:case m:n=0,s=1,b=t,o=0,d=1,g=a;break;case u:n=0,s=1,b=t,o=a-1,d=-1,g=-1;break;case p:n=t-1,s=-1,b=-1,o=0,d=1,g=a;break;case h:n=t-1,s=-1,b=-1,o=a-1,d=-1,g=-1}if(w)switch(y.pixel_size){case 8:!function(e,t,a,i,r,n,o,s){var d,l,c,u=0,h=y.width;for(c=t;c!==i;c+=a)for(l=r;l!==o;l+=n,u++)d=s[u],e[4*(l+h*c)+0]=d,e[4*(l+h*c)+1]=d,e[4*(l+h*c)+2]=d,e[4*(l+h*c)+3]=255}(e,o,d,g,n,s,b,i);break;case 16:!function(e,t,a,i,r,n,o,s){var d,l,c=0,u=y.width;for(l=t;l!==i;l+=a)for(d=r;d!==o;d+=n,c+=2)e[4*(d+u*l)+0]=s[c+0],e[4*(d+u*l)+1]=s[c+0],e[4*(d+u*l)+2]=s[c+0],e[4*(d+u*l)+3]=s[c+1]}(e,o,d,g,n,s,b,i);break;default:console.error("THREE.TGALoader: Format not supported.")}else switch(y.pixel_size){case 8:!function(e,t,a,i,r,n,o,s,d){var l,c,u,h=d,m=0,p=y.width;for(u=t;u!==i;u+=a)for(c=r;c!==o;c+=n,m++)l=s[m],e[4*(c+p*u)+3]=255,e[4*(c+p*u)+2]=h[3*l+0],e[4*(c+p*u)+1]=h[3*l+1],e[4*(c+p*u)+0]=h[3*l+2]}(e,o,d,g,n,s,b,i,r);break;case 16:!function(e,t,a,i,r,n,o,s){var d,l,c,u=0,h=y.width;for(c=t;c!==i;c+=a)for(l=r;l!==o;l+=n,u+=2)d=s[u+0]+(s[u+1]<<8),e[4*(l+h*c)+0]=(31744&d)>>7,e[4*(l+h*c)+1]=(992&d)>>2,e[4*(l+h*c)+2]=(31&d)<<3,e[4*(l+h*c)+3]=32768&d?0:255}(e,o,d,g,n,s,b,i);break;case 24:!function(e,t,a,i,r,n,o,s){var d,l,c=0,u=y.width;for(l=t;l!==i;l+=a)for(d=r;d!==o;d+=n,c+=3)e[4*(d+u*l)+3]=255,e[4*(d+u*l)+2]=s[c+0],e[4*(d+u*l)+1]=s[c+1],e[4*(d+u*l)+0]=s[c+2]}(e,o,d,g,n,s,b,i);break;case 32:!function(e,t,a,i,r,n,o,s){var d,l,c=0,u=y.width;for(l=t;l!==i;l+=a)for(d=r;d!==o;d+=n,c+=4)e[4*(d+u*l)+2]=s[c+0],e[4*(d+u*l)+1]=s[c+1],e[4*(d+u*l)+0]=s[c+2],e[4*(d+u*l)+3]=s[c+3]}(e,o,d,g,n,s,b,i);break;default:console.error("THREE.TGALoader: Format not supported.")}}(j,y.width,y.height,x.pixel_data,x.palettes),{data:j,width:y.width,height:y.height,flipY:!0,generateMipmaps:!0,minFilter:s.LinearMipmapLinearFilter}}}]),a}(s.DataTextureLoader)},56:function(e,t,a){"use strict";a.r(t),a.d(t,"SidebarGeometryBufferGeometry",(function(){return r}));var i=a(1);function r(e){var t=e.strings,a=e.signals,r=new i.l;function n(e){if(null!==e&&void 0!==e){var a=e.geometry;if(a&&a.isBufferGeometry){r.clear(),r.setDisplay("block");var n=new i.p(t.getKey("sidebar/geometry/buffer_geometry/attributes")).setWidth("90px");r.add(n);var o=(new i.n).setDisplay("inline-block").setVerticalAlign("middle").setWidth("160px");r.add(o);var s=a.index;null!==s&&(o.add(new i.p(t.getKey("sidebar/geometry/buffer_geometry/index")).setWidth("80px")),o.add(new i.p(s.count.format()).setFontSize("12px")),o.add(new i.a));var d=a.attributes;for(var l in d){var c=d[l];o.add(new i.p(l).setWidth("80px")),o.add(new i.p(c.count.format()+" ("+c.itemSize+")").setFontSize("12px")),o.add(new i.a)}}else r.setDisplay("none")}}return a.objectSelected.add(n),a.geometryChanged.add(n),r}},57:function(e,t,a){"use strict";a.r(t),a.d(t,"SidebarGeometryModifiers",(function(){return r}));var i=a(1);function r(e,t){var a=e.signals,r=(new i.l).setPaddingLeft("90px"),n=t.geometry,o=new i.b("Compute Vertex Normals");return o.onClick((function(){n.computeVertexNormals(),n.attributes.normal.needsUpdate=!0,a.geometryChanged.dispatch(t)})),r.add(o),r}},58:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var i=a(3),r=a(4),n=a(8),o=a(7),s=a(5),d=a(6),l=a(14),c=a(0),u=function(e){Object(s.a)(a,e);var t=Object(d.a)(a);function a(e,r,n){var o;return Object(i.a)(this,a),(o=t.call(this,e)).type="SetGeometryCommand",o.name="Set Geometry",o.updatable=!0,o.object=r,o.oldGeometry=void 0!==r?r.geometry:void 0,o.newGeometry=n,o}return Object(r.a)(a,[{key:"execute",value:function(){this.object.geometry.dispose(),this.object.geometry=this.newGeometry,this.object.geometry.computeBoundingSphere(),this.editor.signals.geometryChanged.dispatch(this.object),this.editor.signals.sceneGraphChanged.dispatch()}},{key:"undo",value:function(){this.object.geometry.dispose(),this.object.geometry=this.oldGeometry,this.object.geometry.computeBoundingSphere(),this.editor.signals.geometryChanged.dispatch(this.object),this.editor.signals.sceneGraphChanged.dispatch()}},{key:"update",value:function(e){this.newGeometry=e.newGeometry}},{key:"toJSON",value:function(){var e=Object(n.a)(Object(o.a)(a.prototype),"toJSON",this).call(this,this);return e.objectUuid=this.object.uuid,e.oldGeometry=this.object.geometry.toJSON(),e.newGeometry=this.newGeometry.toJSON(),e}},{key:"fromJSON",value:function(e){function t(e){return(new c.ObjectLoader).parseGeometries([e])[e.uuid]}Object(n.a)(Object(o.a)(a.prototype),"fromJSON",this).call(this,e),this.object=this.editor.objectByUuid(e.objectUuid),this.oldGeometry=t(e.oldGeometry),this.newGeometry=t(e.newGeometry)}}]),a}(l.a)},74:function(e,t,a){},75:function(e,t,a){},77:function(e,t,a){var i={"./Sidebar.Geometry.BoxGeometry.js":[89,3],"./Sidebar.Geometry.BufferGeometry.js":[56],"./Sidebar.Geometry.CircleGeometry.js":[90,4],"./Sidebar.Geometry.CylinderGeometry.js":[91,5],"./Sidebar.Geometry.DodecahedronGeometry.js":[92,6],"./Sidebar.Geometry.ExtrudeGeometry.js":[93,7],"./Sidebar.Geometry.IcosahedronGeometry.js":[94,8],"./Sidebar.Geometry.LatheGeometry.js":[95,9],"./Sidebar.Geometry.Modifiers.js":[57],"./Sidebar.Geometry.OctahedronGeometry.js":[96,10],"./Sidebar.Geometry.PlaneGeometry.js":[97,11],"./Sidebar.Geometry.RingGeometry.js":[98,12],"./Sidebar.Geometry.ShapeGeometry.js":[99,13],"./Sidebar.Geometry.SphereGeometry.js":[100,14],"./Sidebar.Geometry.TetrahedronGeometry.js":[101,15],"./Sidebar.Geometry.TorusGeometry.js":[102,16],"./Sidebar.Geometry.TorusKnotGeometry.js":[103,17],"./Sidebar.Geometry.TubeGeometry.js":[104,18]};function r(e){if(!a.o(i,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=i[e],r=t[0];return Promise.all(t.slice(1).map(a.e)).then((function(){return a(r)}))}r.keys=function(){return Object.keys(i)},r.id=77,e.exports=r},78:function(e,t,a){},79:function(e,t,a){},86:function(e,t,a){},87:function(e,t,a){"use strict";a.r(t);var i={};a.r(i),a.d(i,"AddObjectCommand",(function(){return S})),a.d(i,"AddScriptCommand",(function(){return _})),a.d(i,"MoveObjectCommand",(function(){return T.a})),a.d(i,"MultiCmdsCommand",(function(){return L})),a.d(i,"RemoveObjectCommand",(function(){return N})),a.d(i,"RemoveScriptCommand",(function(){return R})),a.d(i,"SetColorCommand",(function(){return A})),a.d(i,"SetGeometryCommand",(function(){return D.a})),a.d(i,"SetGeometryValueCommand",(function(){return G})),a.d(i,"SetMaterialColorCommand",(function(){return B})),a.d(i,"SetMaterialCommand",(function(){return I})),a.d(i,"SetMaterialMapCommand",(function(){return K})),a.d(i,"SetMaterialValueCommand",(function(){return U})),a.d(i,"SetMaterialVectorCommand",(function(){return F})),a.d(i,"SetPositionCommand",(function(){return z})),a.d(i,"SetRotationCommand",(function(){return W})),a.d(i,"SetScaleCommand",(function(){return H})),a.d(i,"SetSceneCommand",(function(){return k})),a.d(i,"SetScriptValueCommand",(function(){return J})),a.d(i,"SetUuidCommand",(function(){return C})),a.d(i,"SetValueCommand",(function(){return M}));var r=a(2),n=a.n(r),o=a(20),s=a.n(o),d=(a(74),a(75),a(26)),l=a(0),c=a(25),u=a.n(c),h=a(28),m=a(13),p=a.n(m);function b(){var e="threejs-editor",t={language:"en",autosave:!0,"project/title":"","project/editable":!1,"project/vr":!1,"project/renderer/antialias":!0,"project/renderer/shadows":!0,"project/renderer/shadowType":1,"project/renderer/physicallyCorrectLights":!1,"project/renderer/toneMapping":0,"project/renderer/toneMappingExposure":1,"settings/history":!1,"settings/shortcuts/translate":"w","settings/shortcuts/rotate":"e","settings/shortcuts/scale":"r","settings/shortcuts/undo":"z","settings/shortcuts/focus":"f"};if(void 0===window.localStorage[e])window.localStorage[e]=JSON.stringify(t);else{var a=JSON.parse(window.localStorage[e]);for(var i in a)t[i]=a[i]}return{getKey:function(e){return t[e]},setKey:function(){for(var a=0,i=arguments.length;a<i;a+=2)t[arguments[a]]=arguments[a+1];window.localStorage[e]=JSON.stringify(t),console.log("["+/\d\d\:\d\d\:\d\d/.exec(new Date)[0]+"]","Saved config to LocalStorage.")},clear:function(){delete window.localStorage[e]}}}var g=a(47),y=a(3),v=a(4),f=a(8),w=a(7),j=a(5),x=a(6),O=a(14),S=function(e){Object(j.a)(a,e);var t=Object(x.a)(a);function a(e,i){var r;return Object(y.a)(this,a),(r=t.call(this,e)).type="AddObjectCommand",r.object=i,void 0!==i&&(r.name="Add Object: ".concat(i.name)),r}return Object(v.a)(a,[{key:"execute",value:function(){this.editor.addObject(this.object),this.editor.select(this.object)}},{key:"undo",value:function(){this.editor.removeObject(this.object),this.editor.deselect()}},{key:"toJSON",value:function(){var e=Object(f.a)(Object(w.a)(a.prototype),"toJSON",this).call(this,this);return e.object=this.object.toJSON(),e}},{key:"fromJSON",value:function(e){if(Object(f.a)(Object(w.a)(a.prototype),"fromJSON",this).call(this,e),this.object=this.editor.objectByUuid(e.object.object.uuid),void 0===this.object){var t=new l.ObjectLoader;this.object=t.parse(e.object)}}}]),a}(O.a),C=function(e){Object(j.a)(a,e);var t=Object(x.a)(a);function a(e,i,r){var n;return Object(y.a)(this,a),(n=t.call(this,e)).type="SetUuidCommand",n.name="Update UUID",n.object=i,n.oldUuid=void 0!==i?i.uuid:void 0,n.newUuid=r,n}return Object(v.a)(a,[{key:"execute",value:function(){this.object.uuid=this.newUuid,this.editor.signals.objectChanged.dispatch(this.object),this.editor.signals.sceneGraphChanged.dispatch()}},{key:"undo",value:function(){this.object.uuid=this.oldUuid,this.editor.signals.objectChanged.dispatch(this.object),this.editor.signals.sceneGraphChanged.dispatch()}},{key:"toJSON",value:function(){var e=Object(f.a)(Object(w.a)(a.prototype),"toJSON",this).call(this,this);return e.oldUuid=this.oldUuid,e.newUuid=this.newUuid,e}},{key:"fromJSON",value:function(e){Object(f.a)(Object(w.a)(a.prototype),"fromJSON",this).call(this,e),this.oldUuid=e.oldUuid,this.newUuid=e.newUuid,this.object=this.editor.objectByUuid(e.oldUuid),void 0===this.object&&(this.object=this.editor.objectByUuid(e.newUuid))}}]),a}(O.a),M=function(e){Object(j.a)(a,e);var t=Object(x.a)(a);function a(e,i,r,n){var o;return Object(y.a)(this,a),(o=t.call(this,e)).type="SetValueCommand",o.name="Set ".concat(r),o.updatable=!0,o.object=i,o.attributeName=r,o.oldValue=void 0!==i?i[r]:void 0,o.newValue=n,o}return Object(v.a)(a,[{key:"execute",value:function(){this.object[this.attributeName]=this.newValue,this.editor.signals.objectChanged.dispatch(this.object)}},{key:"undo",value:function(){this.object[this.attributeName]=this.oldValue,this.editor.signals.objectChanged.dispatch(this.object)}},{key:"update",value:function(e){this.newValue=e.newValue}},{key:"toJSON",value:function(){var e=Object(f.a)(Object(w.a)(a.prototype),"toJSON",this).call(this,this);return e.objectUuid=this.object.uuid,e.attributeName=this.attributeName,e.oldValue=this.oldValue,e.newValue=this.newValue,e}},{key:"fromJSON",value:function(e){Object(f.a)(Object(w.a)(a.prototype),"fromJSON",this).call(this,e),this.attributeName=e.attributeName,this.oldValue=e.oldValue,this.newValue=e.newValue,this.object=this.editor.objectByUuid(e.objectUuid)}}]),a}(O.a),k=function(e){Object(j.a)(a,e);var t=Object(x.a)(a);function a(e,i){var r;if(Object(y.a)(this,a),(r=t.call(this,e)).type="SetSceneCommand",r.name="Set Scene",r.cmdArray=[],void 0!==i)for(r.cmdArray.push(new C(r.editor,r.editor.scene,i.uuid)),r.cmdArray.push(new M(r.editor,r.editor.scene,"name",i.name)),r.cmdArray.push(new M(r.editor,r.editor.scene,"userData",JSON.parse(JSON.stringify(i.userData))));i.children.length>0;){var n=i.children.pop();r.cmdArray.push(new S(r.editor,n))}return r}return Object(v.a)(a,[{key:"execute",value:function(){this.editor.signals.sceneGraphChanged.active=!1;for(var e=0;e<this.cmdArray.length;e++)this.cmdArray[e].execute();this.editor.signals.sceneGraphChanged.active=!0,this.editor.signals.sceneGraphChanged.dispatch()}},{key:"undo",value:function(){this.editor.signals.sceneGraphChanged.active=!1;for(var e=this.cmdArray.length-1;e>=0;e--)this.cmdArray[e].undo();this.editor.signals.sceneGraphChanged.active=!0,this.editor.signals.sceneGraphChanged.dispatch()}},{key:"toJSON",value:function(){for(var e=Object(f.a)(Object(w.a)(a.prototype),"toJSON",this).call(this,this),t=[],i=0;i<this.cmdArray.length;i++)t.push(this.cmdArray[i].toJSON());return e.cmds=t,e}},{key:"fromJSON",value:function(e){Object(f.a)(Object(w.a)(a.prototype),"fromJSON",this).call(this,e);for(var t=e.cmds,i=0;i<t.length;i++){var r=new window[t[i].type];r.fromJSON(t[i]),this.cmdArray.push(r)}}}]),a}(O.a),V=function(e){for(var t={},a=0;a<e.length;a++){var i=e[a];t[i.name]=i}return t},E=function(e,t){var a=0,i=0,r=[],n={};function o(){++a===i&&t(r,n)}function s(e){e.isDirectory?e.createReader().readEntries((function(e){for(var t=0;t<e.length;t++)s(e[t]);o()})):e.isFile&&e.file((function(t){r.push(t),n[e.fullPath.substr(1)]=t,o()}));i++}for(var d=0;d<e.length;d++){var l=e[d];"file"===l.kind&&s(l.webkitGetAsEntry())}};function P(e){var t=this;function a(a){switch(void 0===a.metadata&&(a.metadata={type:"Geometry"}),void 0===a.metadata.type&&(a.metadata.type="Geometry"),void 0!==a.metadata.formatVersion&&(a.metadata.version=a.metadata.formatVersion),a.metadata.type.toLowerCase()){case"buffergeometry":var i=(n=new l.BufferGeometryLoader).parse(a),r=new l.Mesh(i);e.execute(new S(e,r));break;case"geometry":console.error('Loader: "Geometry" is no longer supported.');break;case"object":var n;(n=new l.ObjectLoader).setResourcePath(t.texturePath),n.parse(a,(function(t){t.isScene?e.execute(new k(e,t)):e.execute(new S(e,t))}));break;case"app":e.fromJSON(a);break;default:console.error("Loader: "+a.metadata.type.toLowerCase()+" is not supported.")}}this.texturePath="",this.loadItemList=function(e){E(e,(function(e,a){t.loadFiles(e,a)}))},this.loadFiles=function(e,a){if(e.length>0){a=a||V(e);var i=new l.LoadingManager;i.setURLModifier((function(e){e=e.replace(/^(\.?\/)/,"");var t=a[e];return t?(console.log("Loading",e),URL.createObjectURL(t)):e})),i.addHandler(/\.tga$/i,new g.a);for(var r=0;r<e.length;r++)t.loadFile(e[r],i)}},this.loadFile=function(e,t){var i=e.name,r=i.split(".").pop().toLowerCase(),n=new FileReader;switch(n.addEventListener("progress",(function(e){var t="("+Math.floor(e.total/1e3).format()+" KB)",a=Math.floor(e.loaded/e.total*100)+"%";console.log("Loading",i,t,a)})),r){case"js":case"json":n.addEventListener("load",(function(e){var t,i=e.target.result;if(-1!==i.indexOf("postMessage")){var r=new Blob([i],{type:"text/javascript"}),n=URL.createObjectURL(r),o=new Worker(n);return o.onmessage=function(e){e.data.metadata={version:2},a(e.data)},void o.postMessage(Date.now())}try{t=JSON.parse(i)}catch(s){return void alert(s)}a(t)}),!1),n.readAsText(e);break;default:console.error("Unsupported file format ("+r+").")}}}var _=function(e){Object(j.a)(a,e);var t=Object(x.a)(a);function a(e,i,r){var n;return Object(y.a)(this,a),(n=t.call(this,e)).type="AddScriptCommand",n.name="Add Script",n.object=i,n.script=r,n}return Object(v.a)(a,[{key:"execute",value:function(){void 0===this.editor.scripts[this.object.uuid]&&(this.editor.scripts[this.object.uuid]=[]),this.editor.scripts[this.object.uuid].push(this.script),this.editor.signals.scriptAdded.dispatch(this.script)}},{key:"undo",value:function(){if(void 0!==this.editor.scripts[this.object.uuid]){var e=this.editor.scripts[this.object.uuid].indexOf(this.script);-1!==e&&this.editor.scripts[this.object.uuid].splice(e,1),this.editor.signals.scriptRemoved.dispatch(this.script)}}},{key:"toJSON",value:function(){var e=Object(f.a)(Object(w.a)(a.prototype),"toJSON",this).call(this,this);return e.objectUuid=this.object.uuid,e.script=this.script,e}},{key:"fromJSON",value:function(e){Object(f.a)(Object(w.a)(a.prototype),"fromJSON",this).call(this,e),this.script=e.script,this.object=this.editor.objectByUuid(e.objectUuid)}}]),a}(O.a),T=a(46),L=function(e){Object(j.a)(a,e);var t=Object(x.a)(a);function a(e,i){var r;return Object(y.a)(this,a),(r=t.call(this,e)).type="MultiCmdsCommand",r.name="Multiple Changes",r.cmdArray=void 0!==i?i:[],r}return Object(v.a)(a,[{key:"execute",value:function(){this.editor.signals.sceneGraphChanged.active=!1;for(var e=0;e<this.cmdArray.length;e++)this.cmdArray[e].execute();this.editor.signals.sceneGraphChanged.active=!0,this.editor.signals.sceneGraphChanged.dispatch()}},{key:"undo",value:function(){this.editor.signals.sceneGraphChanged.active=!1;for(var e=this.cmdArray.length-1;e>=0;e--)this.cmdArray[e].undo();this.editor.signals.sceneGraphChanged.active=!0,this.editor.signals.sceneGraphChanged.dispatch()}},{key:"toJSON",value:function(){for(var e=Object(f.a)(Object(w.a)(a.prototype),"toJSON",this).call(this,this),t=[],i=0;i<this.cmdArray.length;i++)t.push(this.cmdArray[i].toJSON());return e.cmds=t,e}},{key:"fromJSON",value:function(e){Object(f.a)(Object(w.a)(a.prototype),"fromJSON",this).call(this,e);for(var t=e.cmds,i=0;i<t.length;i++){var r=new window[t[i].type];r.fromJSON(t[i]),this.cmdArray.push(r)}}}]),a}(O.a),N=function(e){Object(j.a)(a,e);var t=Object(x.a)(a);function a(e,i){var r;return Object(y.a)(this,a),(r=t.call(this,e)).type="RemoveObjectCommand",r.name="Remove Object",r.object=i,r.parent=void 0!==i?i.parent:void 0,void 0!==r.parent&&(r.index=r.parent.children.indexOf(r.object)),r}return Object(v.a)(a,[{key:"execute",value:function(){this.editor.removeObject(this.object),this.editor.deselect()}},{key:"undo",value:function(){this.editor.addObject(this.object,this.parent,this.index),this.editor.select(this.object)}},{key:"toJSON",value:function(){var e=Object(f.a)(Object(w.a)(a.prototype),"toJSON",this).call(this,this);return e.object=this.object.toJSON(),e.index=this.index,e.parentUuid=this.parent.uuid,e}},{key:"fromJSON",value:function(e){if(Object(f.a)(Object(w.a)(a.prototype),"fromJSON",this).call(this,e),this.parent=this.editor.objectByUuid(e.parentUuid),void 0===this.parent&&(this.parent=this.editor.scene),this.index=e.index,this.object=this.editor.objectByUuid(e.object.object.uuid),void 0===this.object){var t=new l.ObjectLoader;this.object=t.parse(e.object)}}}]),a}(O.a),R=function(e){Object(j.a)(a,e);var t=Object(x.a)(a);function a(e,i,r){var n;return Object(y.a)(this,a),(n=t.call(this,e)).type="RemoveScriptCommand",n.name="Remove Script",n.object=i,n.script=r,n.object&&n.script&&(n.index=n.editor.scripts[n.object.uuid].indexOf(n.script)),n}return Object(v.a)(a,[{key:"execute",value:function(){void 0!==this.editor.scripts[this.object.uuid]&&(-1!==this.index&&this.editor.scripts[this.object.uuid].splice(this.index,1),this.editor.signals.scriptRemoved.dispatch(this.script))}},{key:"undo",value:function(){void 0===this.editor.scripts[this.object.uuid]&&(this.editor.scripts[this.object.uuid]=[]),this.editor.scripts[this.object.uuid].splice(this.index,0,this.script),this.editor.signals.scriptAdded.dispatch(this.script)}},{key:"toJSON",value:function(){var e=Object(f.a)(Object(w.a)(a.prototype),"toJSON",this).call(this,this);return e.objectUuid=this.object.uuid,e.script=this.script,e.index=this.index,e}},{key:"fromJSON",value:function(e){Object(f.a)(Object(w.a)(a.prototype),"fromJSON",this).call(this,e),this.script=e.script,this.index=e.index,this.object=this.editor.objectByUuid(e.objectUuid)}}]),a}(O.a),A=function(e){Object(j.a)(a,e);var t=Object(x.a)(a);function a(e,i,r,n){var o;return Object(y.a)(this,a),(o=t.call(this,e)).type="SetColorCommand",o.name="Set ".concat(r),o.updatable=!0,o.object=i,o.attributeName=r,o.oldValue=void 0!==i?o.object[o.attributeName].getHex():void 0,o.newValue=n,o}return Object(v.a)(a,[{key:"execute",value:function(){this.object[this.attributeName].setHex(this.newValue),this.editor.signals.objectChanged.dispatch(this.object)}},{key:"undo",value:function(){this.object[this.attributeName].setHex(this.oldValue),this.editor.signals.objectChanged.dispatch(this.object)}},{key:"update",value:function(e){this.newValue=e.newValue}},{key:"toJSON",value:function(){var e=Object(f.a)(Object(w.a)(a.prototype),"toJSON",this).call(this,this);return e.objectUuid=this.object.uuid,e.attributeName=this.attributeName,e.oldValue=this.oldValue,e.newValue=this.newValue,e}},{key:"fromJSON",value:function(e){Object(f.a)(Object(w.a)(a.prototype),"fromJSON",this).call(this,e),this.object=this.editor.objectByUuid(e.objectUuid),this.attributeName=e.attributeName,this.oldValue=e.oldValue,this.newValue=e.newValue}}]),a}(O.a),D=a(58),G=function(e){Object(j.a)(a,e);var t=Object(x.a)(a);function a(e,i,r,n){var o;return Object(y.a)(this,a),(o=t.call(this,e)).type="SetGeometryValueCommand",o.name="Set Geometry.".concat(r),o.object=i,o.attributeName=r,o.oldValue=void 0!==i?i.geometry[r]:void 0,o.newValue=n,o}return Object(v.a)(a,[{key:"execute",value:function(){this.object.geometry[this.attributeName]=this.newValue,this.editor.signals.objectChanged.dispatch(this.object),this.editor.signals.geometryChanged.dispatch(),this.editor.signals.sceneGraphChanged.dispatch()}},{key:"undo",value:function(){this.object.geometry[this.attributeName]=this.oldValue,this.editor.signals.objectChanged.dispatch(this.object),this.editor.signals.geometryChanged.dispatch(),this.editor.signals.sceneGraphChanged.dispatch()}},{key:"toJSON",value:function(){var e=Object(f.a)(Object(w.a)(a.prototype),"toJSON",this).call(this,this);return e.objectUuid=this.object.uuid,e.attributeName=this.attributeName,e.oldValue=this.oldValue,e.newValue=this.newValue,e}},{key:"fromJSON",value:function(e){Object(f.a)(Object(w.a)(a.prototype),"fromJSON",this).call(this,e),this.object=this.editor.objectByUuid(e.objectUuid),this.attributeName=e.attributeName,this.oldValue=e.oldValue,this.newValue=e.newValue}}]),a}(O.a),B=function(e){Object(j.a)(a,e);var t=Object(x.a)(a);function a(e,i,r,n,o){var s;return Object(y.a)(this,a),(s=t.call(this,e)).type="SetMaterialColorCommand",s.name="Set Material.".concat(r),s.updatable=!0,s.object=i,s.material=void 0!==s.object?s.editor.getObjectMaterial(i,o):void 0,s.oldValue=void 0!==s.material?s.material[r].getHex():void 0,s.newValue=n,s.attributeName=r,s}return Object(v.a)(a,[{key:"execute",value:function(){this.material[this.attributeName].setHex(this.newValue),this.editor.signals.materialChanged.dispatch(this.material)}},{key:"undo",value:function(){this.material[this.attributeName].setHex(this.oldValue),this.editor.signals.materialChanged.dispatch(this.material)}},{key:"update",value:function(e){this.newValue=e.newValue}},{key:"toJSON",value:function(){var e=Object(f.a)(Object(w.a)(a.prototype),"toJSON",this).call(this,this);return e.objectUuid=this.object.uuid,e.attributeName=this.attributeName,e.oldValue=this.oldValue,e.newValue=this.newValue,e}},{key:"fromJSON",value:function(e){Object(f.a)(Object(w.a)(a.prototype),"fromJSON",this).call(this,e),this.object=this.editor.objectByUuid(e.objectUuid),this.attributeName=e.attributeName,this.oldValue=e.oldValue,this.newValue=e.newValue}}]),a}(O.a),I=function(e){Object(j.a)(a,e);var t=Object(x.a)(a);function a(e,i,r,n){var o;return Object(y.a)(this,a),(o=t.call(this,e)).type="SetMaterialCommand",o.name="New Material",o.object=i,o.materialSlot=n,o.oldMaterial=o.editor.getObjectMaterial(i,n),o.newMaterial=r,o}return Object(v.a)(a,[{key:"execute",value:function(){this.editor.setObjectMaterial(this.object,this.materialSlot,this.newMaterial),this.editor.signals.materialChanged.dispatch(this.newMaterial)}},{key:"undo",value:function(){this.editor.setObjectMaterial(this.object,this.materialSlot,this.oldMaterial),this.editor.signals.materialChanged.dispatch(this.oldMaterial)}},{key:"toJSON",value:function(){var e=Object(f.a)(Object(w.a)(a.prototype),"toJSON",this).call(this,this);return e.objectUuid=this.object.uuid,e.oldMaterial=this.oldMaterial.toJSON(),e.newMaterial=this.newMaterial.toJSON(),e}},{key:"fromJSON",value:function(e){function t(e){var t=new l.ObjectLoader,a=t.parseImages(e.images),i=t.parseTextures(e.textures,a);return t.parseMaterials([e],i)[e.uuid]}Object(f.a)(Object(w.a)(a.prototype),"fromJSON",this).call(this,e),this.object=this.editor.objectByUuid(e.objectUuid),this.oldMaterial=t(e.oldMaterial),this.newMaterial=t(e.newMaterial)}}]),a}(O.a),K=function(e){Object(j.a)(a,e);var t=Object(x.a)(a);function a(e,i,r,n,o){var s;return Object(y.a)(this,a),(s=t.call(this,e)).type="SetMaterialMapCommand",s.name="Set Material.".concat(r),s.object=i,s.material=s.editor.getObjectMaterial(i,o),s.oldMap=void 0!==i?s.material[r]:void 0,s.newMap=n,s.mapName=r,s}return Object(v.a)(a,[{key:"execute",value:function(){null!==this.oldMap&&void 0!==this.oldMap&&this.oldMap.dispose(),this.material[this.mapName]=this.newMap,this.material.needsUpdate=!0,this.editor.signals.materialChanged.dispatch(this.material)}},{key:"undo",value:function(){this.material[this.mapName]=this.oldMap,this.material.needsUpdate=!0,this.editor.signals.materialChanged.dispatch(this.material)}},{key:"toJSON",value:function(){var e=Object(f.a)(Object(w.a)(a.prototype),"toJSON",this).call(this,this);return e.objectUuid=this.object.uuid,e.mapName=this.mapName,e.newMap=t(this.newMap),e.oldMap=t(this.oldMap),e;function t(e){if(null===e||void 0===e)return null;var t={geometries:{},materials:{},textures:{},images:{}},a=e.toJSON(t),i=function(e){var t=[];for(var a in e){var i=e[a];delete i.metadata,t.push(i)}return t}(t.images);return i.length>0&&(a.images=i),a.sourceFile=e.sourceFile,a}}},{key:"fromJSON",value:function(e){function t(e){var t=null;if(null!==e){var a=new l.ObjectLoader,i=a.parseImages(e.images);(t=a.parseTextures([e],i)[e.uuid]).sourceFile=e.sourceFile}return t}Object(f.a)(Object(w.a)(a.prototype),"fromJSON",this).call(this,e),this.object=this.editor.objectByUuid(e.objectUuid),this.mapName=e.mapName,this.oldMap=t(e.oldMap),this.newMap=t(e.newMap)}}]),a}(O.a),U=function(e){Object(j.a)(a,e);var t=Object(x.a)(a);function a(e,i,r,n,o){var s;return Object(y.a)(this,a),(s=t.call(this,e)).type="SetMaterialValueCommand",s.name="Set Material.".concat(r),s.updatable=!0,s.object=i,s.material=s.editor.getObjectMaterial(i,o),s.oldValue=void 0!==s.material?s.material[r]:void 0,s.newValue=n,s.attributeName=r,s}return Object(v.a)(a,[{key:"execute",value:function(){this.material[this.attributeName]=this.newValue,this.material.needsUpdate=!0,this.editor.signals.objectChanged.dispatch(this.object),this.editor.signals.materialChanged.dispatch(this.material)}},{key:"undo",value:function(){this.material[this.attributeName]=this.oldValue,this.material.needsUpdate=!0,this.editor.signals.objectChanged.dispatch(this.object),this.editor.signals.materialChanged.dispatch(this.material)}},{key:"update",value:function(e){this.newValue=e.newValue}},{key:"toJSON",value:function(){var e=Object(f.a)(Object(w.a)(a.prototype),"toJSON",this).call(this,this);return e.objectUuid=this.object.uuid,e.attributeName=this.attributeName,e.oldValue=this.oldValue,e.newValue=this.newValue,e}},{key:"fromJSON",value:function(e){Object(f.a)(Object(w.a)(a.prototype),"fromJSON",this).call(this,e),this.attributeName=e.attributeName,this.oldValue=e.oldValue,this.newValue=e.newValue,this.object=this.editor.objectByUuid(e.objectUuid)}}]),a}(O.a),F=function(e){Object(j.a)(a,e);var t=Object(x.a)(a);function a(e,i,r,n,o){var s;return Object(y.a)(this,a),(s=t.call(this,e)).type="SetMaterialColorCommand",s.name="Set Material.".concat(r),s.updatable=!0,s.object=i,s.material=s.editor.getObjectMaterial(i,o),s.oldValue=void 0!==s.material?s.material[r].toArray():void 0,s.newValue=n,s.attributeName=r,s}return Object(v.a)(a,[{key:"execute",value:function(){this.material[this.attributeName].fromArray(this.newValue),this.editor.signals.materialChanged.dispatch(this.material)}},{key:"undo",value:function(){this.material[this.attributeName].fromArray(this.oldValue),this.editor.signals.materialChanged.dispatch(this.material)}},{key:"update",value:function(e){this.newValue=e.newValue}},{key:"toJSON",value:function(){var e=Object(f.a)(Object(w.a)(a.prototype),"toJSON",this).call(this,this);return e.objectUuid=this.object.uuid,e.attributeName=this.attributeName,e.oldValue=this.oldValue,e.newValue=this.newValue,e}},{key:"fromJSON",value:function(e){Object(f.a)(Object(w.a)(a.prototype),"fromJSON",this).call(this,e),this.object=this.editor.objectByUuid(e.objectUuid),this.attributeName=e.attributeName,this.oldValue=e.oldValue,this.newValue=e.newValue}}]),a}(O.a),z=function(e){Object(j.a)(a,e);var t=Object(x.a)(a);function a(e,i,r,n){var o;return Object(y.a)(this,a),(o=t.call(this,e)).type="SetPositionCommand",o.name="Set Position",o.updatable=!0,o.object=i,void 0!==i&&void 0!==r&&(o.oldPosition=i.position.clone(),o.newPosition=r.clone()),void 0!==n&&(o.oldPosition=n.clone()),o}return Object(v.a)(a,[{key:"execute",value:function(){this.object.position.copy(this.newPosition),this.object.updateMatrixWorld(!0),this.editor.signals.objectChanged.dispatch(this.object)}},{key:"undo",value:function(){this.object.position.copy(this.oldPosition),this.object.updateMatrixWorld(!0),this.editor.signals.objectChanged.dispatch(this.object)}},{key:"update",value:function(e){this.newPosition.copy(e.newPosition)}},{key:"toJSON",value:function(){var e=Object(f.a)(Object(w.a)(a.prototype),"toJSON",this).call(this,this);return e.objectUuid=this.object.uuid,e.oldPosition=this.oldPosition.toArray(),e.newPosition=this.newPosition.toArray(),e}},{key:"fromJSON",value:function(e){Object(f.a)(Object(w.a)(a.prototype),"fromJSON",this).call(this,e),this.object=this.editor.objectByUuid(e.objectUuid),this.oldPosition=(new l.Vector3).fromArray(e.oldPosition),this.newPosition=(new l.Vector3).fromArray(e.newPosition)}}]),a}(O.a),W=function(e){Object(j.a)(a,e);var t=Object(x.a)(a);function a(e,i,r,n){var o;return Object(y.a)(this,a),(o=t.call(this,e)).type="SetRotationCommand",o.name="Set Rotation",o.updatable=!0,o.object=i,void 0!==i&&void 0!==r&&(o.oldRotation=i.rotation.clone(),o.newRotation=r.clone()),void 0!==n&&(o.oldRotation=n.clone()),o}return Object(v.a)(a,[{key:"execute",value:function(){this.object.rotation.copy(this.newRotation),this.object.updateMatrixWorld(!0),this.editor.signals.objectChanged.dispatch(this.object)}},{key:"undo",value:function(){this.object.rotation.copy(this.oldRotation),this.object.updateMatrixWorld(!0),this.editor.signals.objectChanged.dispatch(this.object)}},{key:"update",value:function(e){this.newRotation.copy(e.newRotation)}},{key:"toJSON",value:function(){var e=Object(f.a)(Object(w.a)(a.prototype),"toJSON",this).call(this,this);return e.objectUuid=this.object.uuid,e.oldRotation=this.oldRotation.toArray(),e.newRotation=this.newRotation.toArray(),e}},{key:"fromJSON",value:function(e){Object(f.a)(Object(w.a)(a.prototype),"fromJSON",this).call(this,e),this.object=this.editor.objectByUuid(e.objectUuid),this.oldRotation=(new l.Euler).fromArray(e.oldRotation),this.newRotation=(new l.Euler).fromArray(e.newRotation)}}]),a}(O.a),H=function(e){Object(j.a)(a,e);var t=Object(x.a)(a);function a(e,i,r,n){var o;return Object(y.a)(this,a),(o=t.call(this,e)).type="SetScaleCommand",o.name="Set Scale",o.updatable=!0,o.object=i,void 0!==i&&void 0!==r&&(o.oldScale=i.scale.clone(),o.newScale=r.clone()),void 0!==n&&(o.oldScale=n.clone()),o}return Object(v.a)(a,[{key:"execute",value:function(){this.object.scale.copy(this.newScale),this.object.updateMatrixWorld(!0),this.editor.signals.objectChanged.dispatch(this.object)}},{key:"undo",value:function(){this.object.scale.copy(this.oldScale),this.object.updateMatrixWorld(!0),this.editor.signals.objectChanged.dispatch(this.object)}},{key:"update",value:function(e){this.newScale.copy(e.newScale)}},{key:"toJSON",value:function(){var e=Object(f.a)(Object(w.a)(a.prototype),"toJSON",this).call(this,this);return e.objectUuid=this.object.uuid,e.oldScale=this.oldScale.toArray(),e.newScale=this.newScale.toArray(),e}},{key:"fromJSON",value:function(e){Object(f.a)(Object(w.a)(a.prototype),"fromJSON",this).call(this,e),this.object=this.editor.objectByUuid(e.objectUuid),this.oldScale=(new l.Vector3).fromArray(e.oldScale),this.newScale=(new l.Vector3).fromArray(e.newScale)}}]),a}(O.a),J=function(e){Object(j.a)(a,e);var t=Object(x.a)(a);function a(e,i,r,n,o){var s;return Object(y.a)(this,a),(s=t.call(this,e)).type="SetScriptValueCommand",s.name="Set Script.".concat(n),s.updatable=!0,s.object=i,s.script=r,s.attributeName=n,s.oldValue=void 0!==r?r[s.attributeName]:void 0,s.newValue=o,s}return Object(v.a)(a,[{key:"execute",value:function(){this.script[this.attributeName]=this.newValue,this.editor.signals.scriptChanged.dispatch()}},{key:"undo",value:function(){this.script[this.attributeName]=this.oldValue,this.editor.signals.scriptChanged.dispatch()}},{key:"update",value:function(e){this.newValue=e.newValue}},{key:"toJSON",value:function(){var e=Object(f.a)(Object(w.a)(a.prototype),"toJSON",this).call(this,this);return e.objectUuid=this.object.uuid,e.index=this.editor.scripts[this.object.uuid].indexOf(this.script),e.attributeName=this.attributeName,e.oldValue=this.oldValue,e.newValue=this.newValue,e}},{key:"fromJSON",value:function(e){Object(f.a)(Object(w.a)(a.prototype),"fromJSON",this).call(this,e),this.oldValue=e.oldValue,this.newValue=e.newValue,this.attributeName=e.attributeName,this.object=this.editor.objectByUuid(e.objectUuid),this.script=this.editor.scripts[e.objectUuid][e.index]}}]),a}(O.a);function Y(e){this.editor=e,this.undos=[],this.redos=[],this.lastCmdTime=new Date,this.idCounter=0,this.historyDisabled=!1,this.config=e.config;var t=this;this.editor.signals.startPlayer.add((function(){t.historyDisabled=!0})),this.editor.signals.stopPlayer.add((function(){t.historyDisabled=!1}))}function X(e){var t=e.getKey("language"),a={en:{"menubar/file":"File","menubar/file/new":"New","menubar/file/import":"Import","menubar/file/export/geometry":"Export Geometry","menubar/file/export/object":"Export Object","menubar/file/export/scene":"Export Scene","menubar/file/export/dae":"Export DAE","menubar/file/export/drc":"Export DRC","menubar/file/export/glb":"Export GLB","menubar/file/export/gltf":"Export GLTF","menubar/file/export/obj":"Export OBJ","menubar/file/export/ply":"Export PLY","menubar/file/export/ply_binary":"Export PLY (Binary)","menubar/file/export/stl":"Export STL","menubar/file/export/stl_binary":"Export STL (Binary)","menubar/file/export/usdz":"Export USDZ","menubar/file/publish":"Publish","menubar/edit":"Edit","menubar/edit/undo":"Undo (Ctrl+Z)","menubar/edit/redo":"Redo (Ctrl+Shift+Z)","menubar/edit/clear_history":"Clear History","menubar/edit/center":"Center","menubar/edit/clone":"Clone","menubar/edit/delete":"Delete (Del)","menubar/edit/fixcolormaps":"Fix Color Maps","menubar/add":"Add","menubar/add/group":"Group","menubar/add/plane":"Plane","menubar/add/box":"Box","menubar/add/circle":"Circle","menubar/add/cylinder":"Cylinder","menubar/add/ring":"Ring","menubar/add/sphere":"Sphere","menubar/add/dodecahedron":"Dodecahedron","menubar/add/icosahedron":"Icosahedron","menubar/add/octahedron":"Octahedron","menubar/add/tetrahedron":"Tetrahedron","menubar/add/torus":"Torus","menubar/add/tube":"Tube","menubar/add/torusknot":"TorusKnot","menubar/add/lathe":"Lathe","menubar/add/sprite":"Sprite","menubar/add/pointlight":"PointLight","menubar/add/spotlight":"SpotLight","menubar/add/directionallight":"DirectionalLight","menubar/add/hemispherelight":"HemisphereLight","menubar/add/ambientlight":"AmbientLight","menubar/add/perspectivecamera":"PerspectiveCamera","menubar/add/orthographiccamera":"OrthographicCamera","menubar/status/autosave":"autosave","menubar/play":"Play","menubar/play/stop":"Stop","menubar/play/play":"Play","menubar/examples":"Examples","menubar/examples/Arkanoid":"Arkanoid","menubar/examples/Camera":"Camera","menubar/examples/Particles":"Particles","menubar/examples/Pong":"Pong","menubar/examples/Shaders":"Shaders","menubar/view":"View","menubar/view/fullscreen":"Fullscreen","menubar/help":"Help","menubar/help/source_code":"Source Code","menubar/help/icons":"Icon Pack","menubar/help/about":"About","menubar/help/manual":"Manual","sidebar/animations":"Animations","sidebar/animations/play":"Play","sidebar/animations/stop":"Stop","sidebar/animations/timescale":"Time Scale","sidebar/scene":"Scene","sidebar/scene/background":"Background","sidebar/scene/environment":"Environment","sidebar/scene/fog":"Fog","sidebar/properties/object":"Object","sidebar/properties/geometry":"Geometry","sidebar/properties/material":"Material","sidebar/properties/script":"Script","sidebar/object/type":"Type","sidebar/object/new":"New","sidebar/object/uuid":"UUID","sidebar/object/name":"Name","sidebar/object/position":"Position","sidebar/object/rotation":"Rotation","sidebar/object/scale":"Scale","sidebar/object/fov":"Fov","sidebar/object/left":"Left","sidebar/object/right":"Right","sidebar/object/top":"Top","sidebar/object/bottom":"Bottom","sidebar/object/near":"Near","sidebar/object/far":"Far","sidebar/object/intensity":"Intensity","sidebar/object/color":"Color","sidebar/object/groundcolor":"Ground Color","sidebar/object/distance":"Distance","sidebar/object/angle":"Angle","sidebar/object/penumbra":"Penumbra","sidebar/object/decay":"Decay","sidebar/object/shadow":"Shadow","sidebar/object/shadowBias":"Shadow Bias","sidebar/object/shadowNormalBias":"Shadow Normal Bias","sidebar/object/shadowRadius":"Shadow Radius","sidebar/object/cast":"cast","sidebar/object/receive":"receive","sidebar/object/visible":"Visible","sidebar/object/frustumcull":"Frustum Cull","sidebar/object/renderorder":"Render Order","sidebar/object/userdata":"User data","sidebar/geometry/type":"Type","sidebar/geometry/new":"New","sidebar/geometry/uuid":"UUID","sidebar/geometry/name":"Name","sidebar/geometry/bounds":"Bounds","sidebar/geometry/show_vertex_normals":"Show Vertex Normals","sidebar/geometry/box_geometry/width":"Width","sidebar/geometry/box_geometry/height":"Height","sidebar/geometry/box_geometry/depth":"Depth","sidebar/geometry/box_geometry/widthseg":"Width Seg","sidebar/geometry/box_geometry/heightseg":"Height Seg","sidebar/geometry/box_geometry/depthseg":"Depth Seg","sidebar/geometry/buffer_geometry/attributes":"Attributes","sidebar/geometry/buffer_geometry/index":"index","sidebar/geometry/circle_geometry/radius":"Radius","sidebar/geometry/circle_geometry/segments":"Segments","sidebar/geometry/circle_geometry/thetastart":"Theta start","sidebar/geometry/circle_geometry/thetalength":"Theta length","sidebar/geometry/cylinder_geometry/radiustop":"Radius top","sidebar/geometry/cylinder_geometry/radiusbottom":"Radius bottom","sidebar/geometry/cylinder_geometry/height":"Height","sidebar/geometry/cylinder_geometry/radialsegments":"Radial segments","sidebar/geometry/cylinder_geometry/heightsegments":"Height segments","sidebar/geometry/cylinder_geometry/openended":"Open ended","sidebar/geometry/extrude_geometry/curveSegments":"Curve Segments","sidebar/geometry/extrude_geometry/steps":"Steps","sidebar/geometry/extrude_geometry/depth":"Depth","sidebar/geometry/extrude_geometry/bevelEnabled":"Bevel?","sidebar/geometry/extrude_geometry/bevelThickness":"Thickness","sidebar/geometry/extrude_geometry/bevelSize":"Size","sidebar/geometry/extrude_geometry/bevelOffset":"Offset","sidebar/geometry/extrude_geometry/bevelSegments":"Segments","sidebar/geometry/extrude_geometry/shape":"Convert to Shape","sidebar/geometry/dodecahedron_geometry/radius":"Radius","sidebar/geometry/dodecahedron_geometry/detail":"Detail","sidebar/geometry/icosahedron_geometry/radius":"Radius","sidebar/geometry/icosahedron_geometry/detail":"Detail","sidebar/geometry/octahedron_geometry/radius":"Radius","sidebar/geometry/octahedron_geometry/detail":"Detail","sidebar/geometry/tetrahedron_geometry/radius":"Radius","sidebar/geometry/tetrahedron_geometry/detail":"Detail","sidebar/geometry/lathe_geometry/segments":"Segments","sidebar/geometry/lathe_geometry/phistart":"Phi start (\xb0)","sidebar/geometry/lathe_geometry/philength":"Phi length (\xb0)","sidebar/geometry/lathe_geometry/points":"Points","sidebar/geometry/plane_geometry/width":"Width","sidebar/geometry/plane_geometry/height":"Height","sidebar/geometry/plane_geometry/widthsegments":"Width segments","sidebar/geometry/plane_geometry/heightsegments":"Height segments","sidebar/geometry/ring_geometry/innerRadius":"Inner radius","sidebar/geometry/ring_geometry/outerRadius":"Outer radius","sidebar/geometry/ring_geometry/thetaSegments":"Theta segments","sidebar/geometry/ring_geometry/phiSegments":"Phi segments","sidebar/geometry/ring_geometry/thetastart":"Theta start","sidebar/geometry/ring_geometry/thetalength":"Theta length","sidebar/geometry/shape_geometry/curveSegments":"Curve Segments","sidebar/geometry/shape_geometry/extrude":"Extrude","sidebar/geometry/sphere_geometry/radius":"Radius","sidebar/geometry/sphere_geometry/widthsegments":"Width segments","sidebar/geometry/sphere_geometry/heightsegments":"Height segments","sidebar/geometry/sphere_geometry/phistart":"Phi start","sidebar/geometry/sphere_geometry/philength":"Phi length","sidebar/geometry/sphere_geometry/thetastart":"Theta start","sidebar/geometry/sphere_geometry/thetalength":"Theta length","sidebar/geometry/torus_geometry/radius":"Radius","sidebar/geometry/torus_geometry/tube":"Tube","sidebar/geometry/torus_geometry/radialsegments":"Radial segments","sidebar/geometry/torus_geometry/tubularsegments":"Tubular segments","sidebar/geometry/torus_geometry/arc":"Arc","sidebar/geometry/torusKnot_geometry/radius":"Radius","sidebar/geometry/torusKnot_geometry/tube":"Tube","sidebar/geometry/torusKnot_geometry/tubularsegments":"Tubular segments","sidebar/geometry/torusKnot_geometry/radialsegments":"Radial segments","sidebar/geometry/torusKnot_geometry/p":"P","sidebar/geometry/torusKnot_geometry/q":"Q","sidebar/geometry/tube_geometry/path":"Path","sidebar/geometry/tube_geometry/radius":"Radius","sidebar/geometry/tube_geometry/tube":"Tube","sidebar/geometry/tube_geometry/tubularsegments":"Tubular segments","sidebar/geometry/tube_geometry/radialsegments":"Radial segments","sidebar/geometry/tube_geometry/closed":"Closed","sidebar/geometry/tube_geometry/curvetype":"Curve Type","sidebar/geometry/tube_geometry/tension":"Tension","sidebar/material/new":"New","sidebar/material/copy":"Copy","sidebar/material/paste":"Paste","sidebar/material/slot":"Slot","sidebar/material/type":"Type","sidebar/material/uuid":"UUID","sidebar/material/name":"Name","sidebar/material/program":"Program","sidebar/material/info":"Info","sidebar/material/vertex":"Vert","sidebar/material/fragment":"Frag","sidebar/material/color":"Color","sidebar/material/depthPacking":"Depth Packing","sidebar/material/roughness":"Roughness","sidebar/material/metalness":"Metalness","sidebar/material/reflectivity":"Reflectivity","sidebar/material/emissive":"Emissive","sidebar/material/specular":"Specular","sidebar/material/shininess":"Shininess","sidebar/material/clearcoat":"Clearcoat","sidebar/material/clearcoatroughness":"Clearcoat Roughness","sidebar/material/transmission":"Transmission","sidebar/material/attenuationDistance":"Attenuation Distance","sidebar/material/attenuationTint":"Attenuation Tint","sidebar/material/thickness":"Thickness","sidebar/material/vertexcolors":"Vertex Colors","sidebar/material/matcap":"Matcap","sidebar/material/map":"Map","sidebar/material/alphamap":"Alpha Map","sidebar/material/bumpmap":"Bump Map","sidebar/material/normalmap":"Normal Map","sidebar/material/clearcoatnormalmap":"Clearcoat Normal Map","sidebar/material/displacementmap":"Displace Map","sidebar/material/roughnessmap":"Rough. Map","sidebar/material/metalnessmap":"Metal. Map","sidebar/material/specularmap":"Specular Map","sidebar/material/envmap":"Env Map","sidebar/material/lightmap":"Light Map","sidebar/material/aomap":"AO Map","sidebar/material/emissivemap":"Emissive Map","sidebar/material/gradientmap":"Gradient Map","sidebar/material/side":"Side","sidebar/material/size":"Size","sidebar/material/sizeAttenuation":"Size Attenuation","sidebar/material/flatShading":"Flat Shading","sidebar/material/blending":"Blending","sidebar/material/opacity":"Opacity","sidebar/material/transparent":"Transparent","sidebar/material/alphatest":"Alpha Test","sidebar/material/depthtest":"Depth Test","sidebar/material/depthwrite":"Depth Write","sidebar/material/wireframe":"Wireframe","sidebar/script":"Script","sidebar/script/new":"New","sidebar/script/edit":"Edit","sidebar/script/remove":"Remove","sidebar/project":"Project","sidebar/project/title":"Title","sidebar/project/editable":"Editable","sidebar/project/vr":"VR","sidebar/project/renderer":"Renderer","sidebar/project/antialias":"Antialias","sidebar/project/shadows":"Shadows","sidebar/project/physicallyCorrectLights":"Physical lights","sidebar/project/toneMapping":"Tone mapping","sidebar/project/materials":"Materials","sidebar/project/Assign":"Assign","sidebar/project/video":"Video","sidebar/project/resolution":"Resolution","sidebar/project/duration":"Duration","sidebar/project/render":"Render","sidebar/settings":"Settings","sidebar/settings/language":"Language","sidebar/settings/shortcuts":"Shortcuts","sidebar/settings/shortcuts/translate":"Translate","sidebar/settings/shortcuts/rotate":"Rotate","sidebar/settings/shortcuts/scale":"Scale","sidebar/settings/shortcuts/undo":"Undo","sidebar/settings/shortcuts/focus":"Focus","sidebar/settings/viewport":"Viewport","sidebar/settings/viewport/grid":"Grid","sidebar/settings/viewport/helpers":"Helpers","sidebar/history":"History","sidebar/history/persistent":"persistent","toolbar/translate":"Translate","toolbar/rotate":"Rotate","toolbar/scale":"Scale","toolbar/local":"Local","viewport/info/objects":"Objects","viewport/info/vertices":"Vertices","viewport/info/triangles":"Triangles","viewport/info/frametime":"Frametime"},fr:{"menubar/file":"Fichier","menubar/file/new":"Nouveau","menubar/file/import":"Importer","menubar/file/export/geometry":"Exporter Geometrie","menubar/file/export/object":"Exporter Objet","menubar/file/export/scene":"Exporter Scene","menubar/file/export/dae":"Exporter DAE","menubar/file/export/drc":"Exporter DRC","menubar/file/export/glb":"Exporter GLB","menubar/file/export/gltf":"Exporter GLTF","menubar/file/export/obj":"Exporter OBJ","menubar/file/export/ply":"Exporer PLY","menubar/file/export/ply_binary":"Exporter PLY (Binaire)","menubar/file/export/stl":"Exporter STL","menubar/file/export/stl_binary":"Exporter STL (Binaire)","menubar/file/export/usdz":"Exporter USDZ","menubar/file/publish":"Publier","menubar/edit":"Edition","menubar/edit/undo":"Annuler (Ctrl+Z)","menubar/edit/redo":"Refaire (Ctrl+Shift+Z)","menubar/edit/clear_history":"Supprimer Historique","menubar/edit/center":"Center","menubar/edit/clone":"Cloner","menubar/edit/delete":"Supprimer (Supp)","menubar/edit/fixcolormaps":"Correction des couleurs","menubar/add":"Ajouter","menubar/add/group":"Groupe","menubar/add/plane":"Plan","menubar/add/box":"Cube","menubar/add/circle":"Cercle","menubar/add/cylinder":"Cylindre","menubar/add/ring":"Bague","menubar/add/sphere":"Sph\xe8re","menubar/add/dodecahedron":"Dod\xe9ca\xe8dre","menubar/add/icosahedron":"Icosa\xe8dre","menubar/add/octahedron":"Octa\xe8dre","menubar/add/tetrahedron":"T\xe9tra\xe8dre","menubar/add/torus":"Torus","menubar/add/tube":"Tube","menubar/add/torusknot":"Noeud Torus","menubar/add/lathe":"Tour","menubar/add/sprite":"Sprite","menubar/add/pointlight":"Lumi\xe8re ponctuelle","menubar/add/spotlight":"Projecteur","menubar/add/directionallight":"Lumi\xe8re directionnelle","menubar/add/hemispherelight":"Lumi\xe8re h\xe9misph\xe9rique","menubar/add/ambientlight":"Lumi\xe8re ambiante","menubar/add/perspectivecamera":"Cam\xe9ra perspective","menubar/add/orthographiccamera":"Cam\xe9ra orthographique","menubar/status/autosave":"enregistrement automatique","menubar/play":"Jouer","menubar/play/stop":"Arr\xeater","menubar/play/play":"Jouer","menubar/examples":"Exemples","menubar/examples/Arkanoid":"Arkanoid","menubar/examples/Camera":"Camera","menubar/examples/Particles":"Particles","menubar/examples/Pong":"Pong","menubar/examples/Shaders":"Shaders","menubar/view":"View","menubar/view/fullscreen":"Fullscreen","menubar/help":"Aide","menubar/help/source_code":"Code Source","menubar/help/icons":"Icon Pack","menubar/help/about":"A propos","menubar/help/manual":"Manual","sidebar/animations":"Animations","sidebar/animations/play":"Play","sidebar/animations/stop":"Stop","sidebar/animations/timescale":"Time Scale","sidebar/scene":"Sc\xe8ne","sidebar/scene/background":"Arri\xe8re Plan","sidebar/scene/environment":"Environment","sidebar/scene/fog":"Brouillard","sidebar/properties/object":"Objet","sidebar/properties/geometry":"G\xe9om\xe9trie","sidebar/properties/material":"Mat\xe9riaux","sidebar/properties/script":"Script","sidebar/object/type":"Type","sidebar/object/new":"Nouveau","sidebar/object/uuid":"UUID","sidebar/object/name":"Nom","sidebar/object/position":"Position","sidebar/object/rotation":"Rotation","sidebar/object/scale":"\xc9chelle","sidebar/object/fov":"Champ de vision","sidebar/object/left":"Gauche","sidebar/object/right":"Droite","sidebar/object/top":"Haut","sidebar/object/bottom":"Bas","sidebar/object/near":"Pr\xe8s","sidebar/object/far":"Loin","sidebar/object/intensity":"Intensit\xe9","sidebar/object/color":"Couleur","sidebar/object/groundcolor":"Couleur de fond","sidebar/object/distance":"Distance","sidebar/object/angle":"Angle","sidebar/object/penumbra":"P\xe9nombre","sidebar/object/decay":"Affaiblissement","sidebar/object/shadow":"Ombre","sidebar/object/shadowBias":"Biais directionnel des ombres","sidebar/object/shadowNormalBias":"Shadow Normal Bias","sidebar/object/shadowRadius":"Rayon de l'ombre","sidebar/object/cast":"Proj\xe8te","sidebar/object/receive":"Re\xe7oit","sidebar/object/visible":"Visible","sidebar/object/frustumcull":"Culling","sidebar/object/renderorder":"Ordre de rendus","sidebar/object/userdata":"Donn\xe9es utilisateur","sidebar/geometry/type":"Type","sidebar/geometry/new":"Nouveau","sidebar/geometry/uuid":"UUID","sidebar/geometry/name":"Nom","sidebar/geometry/bounds":"Limites","sidebar/geometry/show_vertex_normals":"Afficher normales","sidebar/geometry/box_geometry/width":"Largeur","sidebar/geometry/box_geometry/height":"Hauteur","sidebar/geometry/box_geometry/depth":"Profondeur","sidebar/geometry/box_geometry/widthseg":"Segments en Largeur","sidebar/geometry/box_geometry/heightseg":"Segments en Hauteur","sidebar/geometry/box_geometry/depthseg":"Segments en Profondeur","sidebar/geometry/buffer_geometry/attributes":"Attributs","sidebar/geometry/buffer_geometry/index":"index","sidebar/geometry/circle_geometry/radius":"Rayon","sidebar/geometry/circle_geometry/segments":"Segments","sidebar/geometry/circle_geometry/thetastart":"D\xe9but Th\xeata (\xb0)","sidebar/geometry/circle_geometry/thetalength":"Longueur Th\xeata (\xb0)","sidebar/geometry/cylinder_geometry/radiustop":"Rayon sup\xe9rieur","sidebar/geometry/cylinder_geometry/radiusbottom":"Rayon inf\xe9rieur","sidebar/geometry/cylinder_geometry/height":"Hauteur","sidebar/geometry/cylinder_geometry/radialsegments":"Segments radiaux","sidebar/geometry/cylinder_geometry/heightsegments":"Segments en hauteur","sidebar/geometry/cylinder_geometry/openended":"Extr\xe9mit\xe9s ouvertes","sidebar/geometry/extrude_geometry/curveSegments":"Segments de courbe","sidebar/geometry/extrude_geometry/steps":"Pas","sidebar/geometry/extrude_geometry/depth":"Profondeur","sidebar/geometry/extrude_geometry/bevelEnabled":"Biseau","sidebar/geometry/extrude_geometry/bevelThickness":"\xc9paisseur","sidebar/geometry/extrude_geometry/bevelSize":"Taille","sidebar/geometry/extrude_geometry/bevelOffset":"D\xe9calage","sidebar/geometry/extrude_geometry/bevelSegments":"Segments","sidebar/geometry/extrude_geometry/shape":"Convertir en forme","sidebar/geometry/dodecahedron_geometry/radius":"Rayon","sidebar/geometry/dodecahedron_geometry/detail":"D\xe9tail","sidebar/geometry/icosahedron_geometry/radius":"Rayon","sidebar/geometry/icosahedron_geometry/detail":"D\xe9tail","sidebar/geometry/octahedron_geometry/radius":"Rayon","sidebar/geometry/octahedron_geometry/detail":"D\xe9tail","sidebar/geometry/tetrahedron_geometry/radius":"Rayon","sidebar/geometry/tetrahedron_geometry/detail":"D\xe9tail","sidebar/geometry/lathe_geometry/segments":"Segments","sidebar/geometry/lathe_geometry/phistart":"D\xe9but Phi (\xb0)","sidebar/geometry/lathe_geometry/philength":"Longueur Phi (\xb0)","sidebar/geometry/lathe_geometry/points":"Points","sidebar/geometry/plane_geometry/width":"Largeur","sidebar/geometry/plane_geometry/height":"Hauteur","sidebar/geometry/plane_geometry/widthsegments":"Segments en Largeur","sidebar/geometry/plane_geometry/heightsegments":"Segments en Hauteur","sidebar/geometry/ring_geometry/innerRadius":"Rayon int\xe9rieur","sidebar/geometry/ring_geometry/outerRadius":"Rayon ext\xe9rieur","sidebar/geometry/ring_geometry/thetaSegments":"Segments Th\xeata","sidebar/geometry/ring_geometry/phiSegments":"Phi segments","sidebar/geometry/ring_geometry/thetastart":"D\xe9but Th\xeata","sidebar/geometry/ring_geometry/thetalength":"Longueur Th\xeata","sidebar/geometry/shape_geometry/curveSegments":"Segments de courbe","sidebar/geometry/shape_geometry/extrude":"Extruder","sidebar/geometry/sphere_geometry/radius":"Rayon","sidebar/geometry/sphere_geometry/widthsegments":"Segments en Largeur","sidebar/geometry/sphere_geometry/heightsegments":"Segments en Hauteur","sidebar/geometry/sphere_geometry/phistart":"D\xe9but Phi (\xb0)","sidebar/geometry/sphere_geometry/philength":"Longueur Phi (\xb0)","sidebar/geometry/sphere_geometry/thetastart":"D\xe9but Th\xeata","sidebar/geometry/sphere_geometry/thetalength":"Longueur Th\xeata","sidebar/geometry/torus_geometry/radius":"Rayon","sidebar/geometry/torus_geometry/tube":"Tube","sidebar/geometry/torus_geometry/radialsegments":"Segments radiaux","sidebar/geometry/torus_geometry/tubularsegments":"Segments tubulaires","sidebar/geometry/torus_geometry/arc":"Arc","sidebar/geometry/torusKnot_geometry/radius":"Rayon","sidebar/geometry/torusKnot_geometry/tube":"Tube","sidebar/geometry/torusKnot_geometry/tubularsegments":"Segments tubulaires","sidebar/geometry/torusKnot_geometry/radialsegments":"Segments radiaux","sidebar/geometry/torusKnot_geometry/p":"P","sidebar/geometry/torusKnot_geometry/q":"Q","sidebar/geometry/tube_geometry/path":"Chemin","sidebar/geometry/tube_geometry/radius":"Rayon","sidebar/geometry/tube_geometry/tube":"Tube","sidebar/geometry/tube_geometry/tubularsegments":"Segments tubulaires","sidebar/geometry/tube_geometry/radialsegments":"Segments radiaux","sidebar/geometry/tube_geometry/closed":"Ferm\xe9","sidebar/geometry/tube_geometry/curvetype":"Type de courbe","sidebar/geometry/tube_geometry/tension":"Tension","sidebar/material/new":"Nouveau","sidebar/material/copy":"Copier","sidebar/material/paste":"Coller","sidebar/material/slot":"Slot","sidebar/material/type":"Type","sidebar/material/uuid":"UUID","sidebar/material/name":"Nom","sidebar/material/program":"Programme","sidebar/material/info":"Info","sidebar/material/vertex":"Sommet","sidebar/material/fragment":"Fragment","sidebar/material/color":"Couleur","sidebar/material/depthPacking":"Encodage profondeur de couleur","sidebar/material/roughness":"Rugosit\xe9","sidebar/material/metalness":"M\xe9tal","sidebar/material/reflectivity":"Reflectivity","sidebar/material/emissive":"\xc9missif","sidebar/material/specular":"Sp\xe9culaire","sidebar/material/shininess":"Brillance","sidebar/material/clearcoat":"Vernis","sidebar/material/clearcoatroughness":"Rugosit\xe9 du vernis","sidebar/material/transmission":"Transmission","sidebar/material/attenuationDistance":"Attenuation Distance","sidebar/material/attenuationTint":"Attenuation Tint","sidebar/material/thickness":"Thickness","sidebar/material/vertexcolors":"Couleurs aux Sommets","sidebar/material/matcap":"Matcap","sidebar/material/map":"Texture","sidebar/material/alphamap":"Texture de transparence","sidebar/material/bumpmap":"Texture de relief","sidebar/material/normalmap":"Texture de normales","sidebar/material/clearcoatnormalmap":"Texture des normales du vernis","sidebar/material/displacementmap":"Texture de d\xe9placement","sidebar/material/roughnessmap":"Texture de rugosit\xe9","sidebar/material/metalnessmap":"Texture m\xe9tallique","sidebar/material/specularmap":"Texture sp\xe9culaire","sidebar/material/envmap":"Texture d'environnement","sidebar/material/lightmap":"Texture d'\xe9clairage","sidebar/material/aomap":"Texture d'occlusion ambiante","sidebar/material/emissivemap":"Texture d'\xe9mission","sidebar/material/gradientmap":"Texture de gradient","sidebar/material/side":"C\xf4t\xe9","sidebar/material/size":"Size","sidebar/material/sizeAttenuation":"Size Attenuation","sidebar/material/flatShading":"Flat Shading","sidebar/material/blending":"M\xe9lange","sidebar/material/opacity":"Opacit\xe9","sidebar/material/transparent":"Transparence","sidebar/material/alphatest":"Test de transparence","sidebar/material/depthtest":"Depth Test","sidebar/material/depthwrite":"Depth Write","sidebar/material/wireframe":"Fil de fer","sidebar/script":"Script","sidebar/script/new":"Nouveau","sidebar/script/edit":"Editer","sidebar/script/remove":"Supprimer","sidebar/project":"Projet","sidebar/project/title":"Titre","sidebar/project/editable":"Modifiable","sidebar/project/vr":"VR","sidebar/project/renderer":"Rendus","sidebar/project/antialias":"Anticr\xe9nelage","sidebar/project/shadows":"Ombres","sidebar/project/physicallyCorrectLights":"Physical lights","sidebar/project/toneMapping":"Mappage des nuances","sidebar/project/materials":"Mat\xe9riaux","sidebar/project/Assign":"Attribuer","sidebar/project/video":"Video","sidebar/project/resolution":"Resolution","sidebar/project/duration":"Duration","sidebar/project/render":"Render","sidebar/settings":"Param\xe8tres","sidebar/settings/language":"Langue","sidebar/settings/shortcuts":"Shortcuts","sidebar/settings/shortcuts/translate":"Position","sidebar/settings/shortcuts/rotate":"Rotation","sidebar/settings/shortcuts/scale":"\xc9chelle","sidebar/settings/shortcuts/undo":"Annuler","sidebar/settings/shortcuts/focus":"Focus","sidebar/settings/viewport":"Viewport","sidebar/settings/viewport/grid":"Grille","sidebar/settings/viewport/helpers":"Helpers","sidebar/history":"Historique","sidebar/history/persistent":"permanent","toolbar/translate":"Position","toolbar/rotate":"Rotation","toolbar/scale":"\xc9chelle","toolbar/local":"Local","viewport/info/objects":"Objets","viewport/info/vertices":"Sommets","viewport/info/triangles":"Triangles","viewport/info/frametime":"Temps de trame"},zh:{"menubar/file":"\u6587\u4ef6","menubar/file/new":"\u65b0\u5efa","menubar/file/import":"\u5bfc\u5165","menubar/file/export/geometry":"\u5bfc\u51fa\u51e0\u4f55\u4f53","menubar/file/export/object":"\u5bfc\u51fa\u7269\u4f53","menubar/file/export/scene":"\u5bfc\u51fa\u573a\u666f","menubar/file/export/dae":"\u5bfc\u51faDAE","menubar/file/export/drc":"\u5bfc\u51faDRC","menubar/file/export/glb":"\u5bfc\u51faGLB","menubar/file/export/gltf":"\u5bfc\u51faGLTF","menubar/file/export/obj":"\u5bfc\u51faOBJ","menubar/file/export/ply":"\u5bfc\u51faPLY","menubar/file/export/ply_binary":"\u5bfc\u51faPLY(\u4e8c\u8fdb\u5236)","menubar/file/export/stl":"\u5bfc\u51faSTL","menubar/file/export/stl_binary":"\u5bfc\u51faSTL(\u4e8c\u8fdb\u5236)","menubar/file/export/usdz":"\u5bfc\u51faUSDZ","menubar/file/publish":"\u53d1\u5e03","menubar/edit":"\u7f16\u8f91","menubar/edit/undo":"\u64a4\u9500 (Ctrl+Z)","menubar/edit/redo":"\u91cd\u505a (Ctrl+Shift+Z)","menubar/edit/clear_history":"\u6e05\u7a7a\u5386\u53f2\u8bb0\u5f55","menubar/edit/center":"\u5c45\u4e2d","menubar/edit/clone":"\u62f7\u8d1d","menubar/edit/delete":"\u5220\u9664 (Del)","menubar/edit/fixcolormaps":"\u4fee\u590d\u989c\u8272\u8d34\u56fe","menubar/add":"\u6dfb\u52a0","menubar/add/group":"\u7ec4","menubar/add/plane":"\u5e73\u9762","menubar/add/box":"\u6b63\u65b9\u4f53","menubar/add/circle":"\u5706","menubar/add/cylinder":"\u5706\u67f1\u4f53","menubar/add/ring":"\u73af","menubar/add/sphere":"\u7403\u4f53","menubar/add/dodecahedron":"\u5341\u4e8c\u9762\u4f53","menubar/add/icosahedron":"\u4e8c\u5341\u9762\u4f53","menubar/add/octahedron":"\u516b\u9762\u4f53","menubar/add/tetrahedron":"\u56db\u9762\u4f53","menubar/add/torus":"\u5706\u73af\u4f53","menubar/add/torusknot":"\u73af\u9762\u7ebd\u7ed3\u4f53","menubar/add/tube":"\u7ba1","menubar/add/lathe":"\u9152\u676f","menubar/add/sprite":"\u7cbe\u7075","menubar/add/pointlight":"\u70b9\u5149\u6e90","menubar/add/spotlight":"\u805a\u5149\u706f","menubar/add/directionallight":"\u5e73\u884c\u5149","menubar/add/hemispherelight":"\u534a\u7403\u5149","menubar/add/ambientlight":"\u73af\u5883\u5149","menubar/add/perspectivecamera":"\u900f\u89c6\u76f8\u673a","menubar/add/orthographiccamera":"\u6b63\u4ea4\u76f8\u673a","menubar/status/autosave":"\u81ea\u52a8\u4fdd\u5b58","menubar/play":"\u542f\u52a8","menubar/play/stop":"\u6682\u505c","menubar/play/play":"\u542f\u52a8","menubar/examples":"\u793a\u4f8b","menubar/examples/Arkanoid":"\u6253\u7816\u5757","menubar/examples/Camera":" \u6444\u50cf\u673a","menubar/examples/Particles":"\u7c92\u5b50","menubar/examples/Pong":"\u4e52\u4e53\u7403","menubar/examples/Shaders":"\u7740\u8272\u5668","menubar/view":"\u89c6\u56fe","menubar/view/fullscreen":"\u5168\u5c4f","menubar/help":"\u5e2e\u52a9","menubar/help/source_code":"\u6e90\u7801","menubar/help/icons":"\u56fe\u6807\u7ec4\u4ef6\u5305","menubar/help/about":"\u5173\u4e8e","menubar/help/manual":"\u624b\u518c","sidebar/animations":"\u52a8\u753b","sidebar/animations/play":"\u64ad\u653e","sidebar/animations/stop":"\u6682\u505c","sidebar/animations/timescale":"\u65f6\u95f4\u7f29\u653e","sidebar/scene":"\u573a\u666f","sidebar/scene/background":"\u80cc\u666f","sidebar/scene/environment":"\u73af\u5883","sidebar/scene/fog":"\u96fe","sidebar/properties/object":"\u5c5e\u6027","sidebar/properties/geometry":"\u51e0\u4f55\u7ec4\u4ef6","sidebar/properties/material":"\u6750\u8d28\u7ec4\u4ef6","sidebar/properties/script":"\u811a\u672c","sidebar/object/type":"\u7c7b\u578b","sidebar/object/new":"\u66f4\u65b0","sidebar/object/uuid":"\u8bc6\u522b\u7801","sidebar/object/name":"\u540d\u79f0","sidebar/object/position":"\u4f4d\u7f6e","sidebar/object/rotation":"\u65cb\u8f6c","sidebar/object/scale":"\u7f29\u653e","sidebar/object/fov":"\u89c6\u89d2","sidebar/object/left":"\u5de6","sidebar/object/right":"\u53f3","sidebar/object/top":"\u4e0a","sidebar/object/bottom":"\u4e0b","sidebar/object/near":"\u8fd1\u70b9","sidebar/object/far":"\u8fdc\u70b9","sidebar/object/intensity":"\u5f3a\u5ea6","sidebar/object/color":"\u989c\u8272","sidebar/object/groundcolor":"\u57fa\u8272","sidebar/object/distance":"\u8ddd\u79bb","sidebar/object/angle":"\u89d2\u5ea6","sidebar/object/penumbra":"\u8fb9\u7f18","sidebar/object/decay":"\u8870\u51cf","sidebar/object/shadow":"\u9634\u5f71","sidebar/object/shadowBias":"\u9634\u5f71\u504f\u79fb","sidebar/object/shadowNormalBias":"\u9634\u5f71\u6cd5\u7ebf\u504f\u79fb","sidebar/object/shadowRadius":"\u9634\u5f71\u534a\u5f84","sidebar/object/cast":"\u4ea7\u751f","sidebar/object/receive":"\u63a5\u53d7","sidebar/object/visible":"\u53ef\u89c1\u6027","sidebar/object/frustumcull":"\u89c6\u9525\u4f53\u88c1\u526a","sidebar/object/renderorder":"\u6e32\u67d3\u6b21\u5e8f","sidebar/object/userdata":"\u81ea\u5b9a\u4e49\u6570\u636e","sidebar/geometry/type":"\u7c7b\u578b","sidebar/geometry/new":"\u66f4\u65b0","sidebar/geometry/uuid":"\u8bc6\u522b\u7801","sidebar/geometry/name":"\u540d\u79f0","sidebar/geometry/bounds":"\u754c\u9650","sidebar/geometry/show_vertex_normals":"\u663e\u793a\u9876\u70b9\u6cd5\u7ebf","sidebar/geometry/box_geometry/width":"\u5bbd\u5ea6","sidebar/geometry/box_geometry/height":"\u9ad8\u5ea6","sidebar/geometry/box_geometry/depth":"\u6df1\u5ea6","sidebar/geometry/box_geometry/widthseg":"\u5bbd\u5ea6\u5206\u6bb5","sidebar/geometry/box_geometry/heightseg":"\u9ad8\u5ea6\u5206\u6bb5","sidebar/geometry/box_geometry/depthseg":"\u6df1\u5ea6\u5206\u6bb5","sidebar/geometry/buffer_geometry/attributes":"\u5c5e\u6027","sidebar/geometry/buffer_geometry/index":"\u7d22\u5f15","sidebar/geometry/circle_geometry/radius":"\u534a\u5f84","sidebar/geometry/circle_geometry/segments":"\u5206\u6bb5","sidebar/geometry/circle_geometry/thetastart":"\u5f27\u5ea6\u8d77\u70b9","sidebar/geometry/circle_geometry/thetalength":"\u5f27\u5ea6\u957f\u5ea6","sidebar/geometry/cylinder_geometry/radiustop":"\u9876\u90e8\u534a\u5f84","sidebar/geometry/cylinder_geometry/radiusbottom":"\u5e95\u90e8\u534a\u5f84","sidebar/geometry/cylinder_geometry/height":"\u9ad8\u5ea6","sidebar/geometry/cylinder_geometry/radialsegments":"\u5f84\u5411\u5206\u6bb5","sidebar/geometry/cylinder_geometry/heightsegments":"\u9ad8\u5ea6\u5206\u6bb5","sidebar/geometry/cylinder_geometry/openended":"\u5f00\u7aef","sidebar/geometry/extrude_geometry/curveSegments":"\u66f2\u7ebf\u6bb5","sidebar/geometry/extrude_geometry/steps":"\u7ec6\u5206\u70b9\u6570","sidebar/geometry/extrude_geometry/depth":"\u6df1\u5ea6","sidebar/geometry/extrude_geometry/bevelEnabled":"\u542f\u7528\u659c\u89d2","sidebar/geometry/extrude_geometry/bevelThickness":"\u659c\u89d2\u539a\u5ea6","sidebar/geometry/extrude_geometry/bevelSize":"\u659c\u89d2\u5927\u5c0f","sidebar/geometry/extrude_geometry/bevelOffset":"\u659c\u89d2\u504f\u79fb\u91cf","sidebar/geometry/extrude_geometry/bevelSegments":"\u659c\u89d2\u5206\u6bb5","sidebar/geometry/extrude_geometry/shape":"\u8f6c\u6362\u56fe\u5f62","sidebar/geometry/dodecahedron_geometry/radius":"\u534a\u5f84","sidebar/geometry/dodecahedron_geometry/detail":"\u9762\u7247\u5206\u6bb5","sidebar/geometry/icosahedron_geometry/radius":"\u534a\u5f84","sidebar/geometry/icosahedron_geometry/detail":"\u9762\u7247\u5206\u6bb5","sidebar/geometry/octahedron_geometry/radius":"\u534a\u5f84","sidebar/geometry/octahedron_geometry/detail":"\u9762\u7247\u5206\u6bb5","sidebar/geometry/tetrahedron_geometry/radius":"\u534a\u5f84","sidebar/geometry/tetrahedron_geometry/detail":"\u9762\u7247\u5206\u6bb5","sidebar/geometry/lathe_geometry/segments":"\u5206\u6bb5","sidebar/geometry/lathe_geometry/phistart":"\u7ecf\u5ea6\u8d77\u70b9","sidebar/geometry/lathe_geometry/philength":"\u7ecf\u5ea6\u957f\u5ea6","sidebar/geometry/lathe_geometry/points":"\u70b9","sidebar/geometry/plane_geometry/width":"\u5bbd\u5ea6","sidebar/geometry/plane_geometry/height":"\u957f\u5ea6","sidebar/geometry/plane_geometry/widthsegments":"\u5bbd\u5ea6\u5206\u6bb5","sidebar/geometry/plane_geometry/heightsegments":"\u957f\u5ea6\u5206\u6bb5","sidebar/geometry/ring_geometry/innerRadius":"\u5185\u534a\u5f84","sidebar/geometry/ring_geometry/outerRadius":"\u5916\u534a\u5f84","sidebar/geometry/ring_geometry/thetaSegments":"\u5f27\u5ea6\u5206\u6bb5","sidebar/geometry/ring_geometry/phiSegments":"\u7ecf\u5ea6\u5206\u6bb5","sidebar/geometry/ring_geometry/thetastart":"\u5f27\u5ea6\u8d77\u70b9","sidebar/geometry/ring_geometry/thetalength":"\u5f27\u5ea6\u957f\u5ea6","sidebar/geometry/shape_geometry/curveSegments":"\u66f2\u7ebf\u6bb5","sidebar/geometry/shape_geometry/extrude":"\u62c9\u4f38","sidebar/geometry/sphere_geometry/radius":"\u534a\u5f84","sidebar/geometry/sphere_geometry/widthsegments":"\u5bbd\u5ea6\u5206\u6bb5","sidebar/geometry/sphere_geometry/heightsegments":"\u957f\u5ea6\u5206\u6bb5","sidebar/geometry/sphere_geometry/phistart":"\u7ecf\u5ea6\u8d77\u70b9","sidebar/geometry/sphere_geometry/philength":"\u7ecf\u5ea6\u957f\u5ea6","sidebar/geometry/sphere_geometry/thetastart":"\u7eac\u5ea6\u8d77\u70b9","sidebar/geometry/sphere_geometry/thetalength":"\u7eac\u5ea6\u957f\u5ea6","sidebar/geometry/torus_geometry/radius":"\u534a\u5f84","sidebar/geometry/torus_geometry/tube":"\u7ba1\u539a","sidebar/geometry/torus_geometry/radialsegments":"\u534a\u5f84\u5206\u6bb5","sidebar/geometry/torus_geometry/tubularsegments":"\u7ba1\u539a\u5206\u6bb5","sidebar/geometry/torus_geometry/arc":"\u5f27\u5ea6","sidebar/geometry/torusKnot_geometry/radius":"\u534a\u5f84","sidebar/geometry/torusKnot_geometry/tube":"\u7ba1\u539a","sidebar/geometry/torusKnot_geometry/tubularsegments":"\u7ba1\u539a\u5206\u6bb5","sidebar/geometry/torusKnot_geometry/radialsegments":"\u534a\u5f84\u5206\u6bb5","sidebar/geometry/torusKnot_geometry/p":"\u7ba1\u957f\u5f27\u5ea6","sidebar/geometry/torusKnot_geometry/q":"\u626d\u66f2\u5f27\u5ea6","sidebar/geometry/tube_geometry/path":"\u8def\u5f84","sidebar/geometry/tube_geometry/radius":"\u534a\u5f84","sidebar/geometry/tube_geometry/tube":"\u7ba1\u539a","sidebar/geometry/tube_geometry/tubularsegments":"\u7ba1\u539a\u5206\u6bb5","sidebar/geometry/tube_geometry/radialsegments":"\u534a\u5f84\u5206\u6bb5","sidebar/geometry/tube_geometry/closed":"\u95ed\u5408","sidebar/geometry/tube_geometry/curvetype":"\u66f2\u7ebf\u7c7b\u578b","sidebar/geometry/tube_geometry/tension":"\u5f20\u529b","sidebar/material/new":"\u66f4\u65b0","sidebar/material/copy":"\u590d\u5236","sidebar/material/paste":"\u7c98\u8d34","sidebar/material/slot":"\u63d2\u69fd","sidebar/material/type":"\u7c7b\u578b","sidebar/material/uuid":"\u8bc6\u522b\u7801","sidebar/material/name":"\u540d\u79f0","sidebar/material/program":"\u7a0b\u5e8f","sidebar/material/info":"\u4fe1\u606f","sidebar/material/vertex":"\u9876\u70b9","sidebar/material/fragment":"\u7247\u5143","sidebar/material/color":"\u989c\u8272","sidebar/material/depthPacking":"\u6df1\u5ea6\u5305\u88c5","sidebar/material/roughness":"\u7c97\u7cd9\u5ea6","sidebar/material/metalness":"\u91d1\u5c5e\u5ea6","sidebar/material/reflectivity":"\u53cd\u5c04\u7387","sidebar/material/emissive":"\u81ea\u53d1\u5149","sidebar/material/specular":"\u9ad8\u5149","sidebar/material/shininess":"\u9ad8\u5149\u5927\u5c0f","sidebar/material/clearcoat":"\u6e05\u6f06","sidebar/material/clearcoatroughness":"\u6e05\u6f06\u7c97\u7cd9\u5ea6","sidebar/material/transmission":"\u900f\u5149","sidebar/material/attenuationDistance":"\u8870\u51cf\u8ddd\u79bb","sidebar/material/attenuationTint":"\u8870\u51cf\u8272\u5f69","sidebar/material/thickness":"\u539a\u5ea6","sidebar/material/vertexcolors":"\u9876\u70b9\u989c\u8272","sidebar/material/matcap":"\u6750\u8d28\u6355\u83b7","sidebar/material/map":"\u8d34\u56fe","sidebar/material/alphamap":"\u900f\u660e\u8d34\u56fe","sidebar/material/bumpmap":"\u51f9\u51f8\u8d34\u56fe","sidebar/material/normalmap":"\u6cd5\u7ebf\u8d34\u56fe","sidebar/material/clearcoatnormalmap":"\u6e05\u6f06\u6cd5\u7ebf\u8d34\u56fe","sidebar/material/displacementmap":"\u7f6e\u6362\u8d34\u56fe","sidebar/material/roughnessmap":"\u7c97\u7cd9\u8d34\u56fe","sidebar/material/metalnessmap":"\u91d1\u5c5e\u8d34\u56fe","sidebar/material/specularmap":"\u9ad8\u5149\u8d34\u56fe","sidebar/material/envmap":"\u73af\u5883\u8d34\u56fe","sidebar/material/lightmap":"\u5149\u7167\u8d34\u56fe","sidebar/material/aomap":"\u73af\u5883\u5149\u906e\u853d\u8d34\u56fe","sidebar/material/emissivemap":"\u81ea\u53d1\u5149\u8d34\u56fe","sidebar/material/gradientmap":"\u6e10\u53d8\u8d34\u56fe","sidebar/material/side":"\u9762","sidebar/material/size":"\u5927\u5c0f","sidebar/material/sizeAttenuation":"\u5927\u5c0f\u8870\u51cf","sidebar/material/flatShading":"\u5e73\u9762\u7740\u8272","sidebar/material/blending":"\u6df7\u5408","sidebar/material/opacity":"\u900f\u660e\u5ea6","sidebar/material/transparent":"\u900f\u660e\u6027","sidebar/material/alphatest":"\u03b1\u6d4b\u8bd5","sidebar/material/depthtest":"\u6df1\u5ea6\u6d4b\u8bd5","sidebar/material/depthwrite":"\u6df1\u5ea6\u7f13\u51b2","sidebar/material/wireframe":"\u7ebf\u6846","sidebar/script":"\u811a\u672c","sidebar/script/new":"\u65b0\u5efa","sidebar/script/edit":"\u7f16\u8f91","sidebar/script/remove":"\u5220\u9664","sidebar/project":"\u9879\u76ee","sidebar/project/title":"\u6807\u9898","sidebar/project/editable":"\u7f16\u8f91\u6027","sidebar/project/vr":"\u865a\u62df\u73b0\u5b9e","sidebar/project/renderer":"\u6e32\u67d3\u5668","sidebar/project/antialias":"\u6297\u952f\u9f7f","sidebar/project/shadows":"\u9634\u5f71","sidebar/project/physicallyCorrectLights":"\u7269\u7406\u706f","sidebar/project/toneMapping":"\u8272\u8c03\u6620\u5c04","sidebar/project/materials":"\u6750\u8d28","sidebar/project/Assign":"\u5e94\u7528","sidebar/project/video":"\u89c6\u9891","sidebar/project/resolution":"\u5206\u8fa8\u7387","sidebar/project/duration":"\u65f6\u957f","sidebar/project/render":"\u6e32\u67d3","sidebar/settings":"\u8bbe\u7f6e","sidebar/settings/language":"\u8bed\u8a00","sidebar/settings/shortcuts":"\u5feb\u6377\u952e","sidebar/settings/shortcuts/translate":"\u79fb\u52a8","sidebar/settings/shortcuts/rotate":"\u65cb\u8f6c","sidebar/settings/shortcuts/scale":"\u7f29\u653e","sidebar/settings/shortcuts/undo":"\u64a4\u9500","sidebar/settings/shortcuts/focus":"\u805a\u7126","sidebar/settings/viewport":"\u89c6\u7a97","sidebar/settings/viewport/grid":"\u7f51\u683c","sidebar/settings/viewport/helpers":"\u8f85\u52a9","sidebar/history":"\u5386\u53f2\u8bb0\u5f55","sidebar/history/persistent":"\u672c\u5730\u5b58\u50a8","toolbar/translate":"\u79fb\u52a8","toolbar/rotate":"\u65cb\u8f6c","toolbar/scale":"\u7f29\u653e","toolbar/local":"\u672c\u5730","viewport/info/objects":"\u7269\u4f53","viewport/info/vertices":"\u9876\u70b9","viewport/info/triangles":"\u4e09\u89d2\u5f62","viewport/info/frametime":"\u5e27\u65f6"}};return{getKey:function(e){return a[t][e]||"???"}}}function Z(){var e=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB;if(void 0===e)return console.warn("Storage: IndexedDB not available."),{init:function(){},get:function(){},set:function(){},clear:function(){}};var t;return{init:function(a){var i=e.open("threejs-editor",1);i.onupgradeneeded=function(e){var t=e.target.result;!1===t.objectStoreNames.contains("states")&&t.createObjectStore("states")},i.onsuccess=function(e){t=e.target.result,a()},i.onerror=function(e){console.error("IndexedDB",e)}},get:function(e){t.transaction(["states"],"readwrite").objectStore("states").get(0).onsuccess=function(t){e(t.target.result)}},set:function(e){var a=performance.now();t.transaction(["states"],"readwrite").objectStore("states").put(e,0).onsuccess=function(){console.log("["+/\d\d\:\d\d\:\d\d/.exec(new Date)[0]+"]","Saved state to IndexedDB. "+(performance.now()-a).toFixed(2)+"ms")}},clear:function(){void 0!==t&&(t.transaction(["states"],"readwrite").objectStore("states").clear().onsuccess=function(){console.log("["+/\d\d\:\d\d\:\d\d/.exec(new Date)[0]+"]","Cleared IndexedDB.")})}}}Y.prototype={execute:function(e,t){var a=this.undos[this.undos.length-1],i=(new Date).getTime()-this.lastCmdTime.getTime(),r=a&&a.updatable&&e.updatable&&a.object===e.object&&a.type===e.type&&a.script===e.script&&a.attributeName===e.attributeName;r&&"SetScriptValueCommand"===e.type||r&&i<500?(a.update(e),e=a):(this.undos.push(e),e.id=++this.idCounter),e.name=void 0!==t?t:e.name,e.execute(),e.inMemory=!0,this.config.getKey("settings/history")&&(e.json=e.toJSON()),this.lastCmdTime=new Date,this.redos=[],this.editor.signals.historyChanged.dispatch(e)},undo:function(){if(!this.historyDisabled){var e=void 0;return this.undos.length>0&&!1===(e=this.undos.pop()).inMemory&&e.fromJSON(e.json),void 0!==e&&(e.undo(),this.redos.push(e),this.editor.signals.historyChanged.dispatch(e)),e}alert("Undo/Redo disabled while scene is playing.")},redo:function(){if(!this.historyDisabled){var e=void 0;return this.redos.length>0&&!1===(e=this.redos.pop()).inMemory&&e.fromJSON(e.json),void 0!==e&&(e.execute(),this.undos.push(e),this.editor.signals.historyChanged.dispatch(e)),e}alert("Undo/Redo disabled while scene is playing.")},toJSON:function(){var e={undos:[],redos:[]};if(!this.config.getKey("settings/history"))return e;for(var t=0;t<this.undos.length;t++)this.undos[t].hasOwnProperty("json")&&e.undos.push(this.undos[t].json);for(t=0;t<this.redos.length;t++)this.redos[t].hasOwnProperty("json")&&e.redos.push(this.redos[t].json);return e},fromJSON:function(e){if(void 0!==e){for(var t=0;t<e.undos.length;t++){var a=e.undos[t];(r=new i[a.type](this.editor)).json=a,r.id=a.id,r.name=a.name,this.undos.push(r),this.idCounter=a.id>this.idCounter?a.id:this.idCounter}for(t=0;t<e.redos.length;t++){var r;a=e.redos[t];(r=new i[a.type](this.editor)).json=a,r.id=a.id,r.name=a.name,this.redos.push(r),this.idCounter=a.id>this.idCounter?a.id:this.idCounter}this.editor.signals.historyChanged.dispatch(this.undos[this.undos.length-1])}},clear:function(){this.undos=[],this.redos=[],this.idCounter=0,this.editor.signals.historyChanged.dispatch()},goToState:function(e){if(this.historyDisabled)alert("Undo/Redo disabled while scene is playing.");else{this.editor.signals.sceneGraphChanged.active=!1,this.editor.signals.historyChanged.active=!1;var t=this.undos.length>0?this.undos[this.undos.length-1]:void 0;if(void 0===t||e>t.id)for(t=this.redo();void 0!==t&&e>t.id;)t=this.redo();else for(;void 0!==(t=this.undos[this.undos.length-1])&&e!==t.id;)this.undo();this.editor.signals.sceneGraphChanged.active=!0,this.editor.signals.historyChanged.active=!0,this.editor.signals.sceneGraphChanged.dispatch(),this.editor.signals.historyChanged.dispatch(t)}},enableSerialization:function(e){this.goToState(-1),this.editor.signals.sceneGraphChanged.active=!1,this.editor.signals.historyChanged.active=!1;for(var t=this.redo();void 0!==t;)t.hasOwnProperty("json")||(t.json=t.toJSON()),t=this.redo();this.editor.signals.sceneGraphChanged.active=!0,this.editor.signals.historyChanged.active=!0,this.goToState(e)}};var Q=new l.PerspectiveCamera(50,1,.01,1e3);function q(){this.signals={editScript:new p.a,startPlayer:new p.a,stopPlayer:new p.a,toggleVR:new p.a,exitedVR:new p.a,editorCleared:new p.a,savingStarted:new p.a,savingFinished:new p.a,transformModeChanged:new p.a,snapChanged:new p.a,spaceChanged:new p.a,rendererCreated:new p.a,rendererUpdated:new p.a,sceneBackgroundChanged:new p.a,sceneEnvironmentChanged:new p.a,sceneFogChanged:new p.a,sceneFogSettingsChanged:new p.a,sceneGraphChanged:new p.a,sceneRendered:new p.a,cameraChanged:new p.a,cameraResetted:new p.a,geometryChanged:new p.a,objectSelected:new p.a,objectFocused:new p.a,objectAdded:new p.a,objectChanged:new p.a,objectRemoved:new p.a,cameraAdded:new p.a,cameraRemoved:new p.a,helperAdded:new p.a,helperRemoved:new p.a,materialAdded:new p.a,materialChanged:new p.a,materialRemoved:new p.a,scriptAdded:new p.a,scriptChanged:new p.a,scriptRemoved:new p.a,windowResize:new p.a,showGridChanged:new p.a,showHelpersChanged:new p.a,refreshSidebarObject3D:new p.a,historyChanged:new p.a,viewportCameraChanged:new p.a,animationStopped:new p.a},this.config=new b,this.history=new Y(this),this.storage=new Z,this.strings=new X(this.config),this.loader=new P(this),this.camera=Q.clone(),this.scene=new l.Scene,this.scene.name="Scene",this.sceneHelpers=new l.Scene,this.object={},this.geometries={},this.materials={},this.textures={},this.scripts={},this.materialsRefCounter=new Map,this.mixer=new l.AnimationMixer(this.scene),this.selected=null,this.helpers={},this.cameras={},this.viewportCamera=this.camera,this.addCamera(this.camera)}Q.name="Camera",Q.position.set(0,5,10),Q.lookAt(new l.Vector3),q.prototype={setScene:function(e){for(this.scene.uuid=e.uuid,this.scene.name=e.name,this.scene.background=e.background,this.scene.environment=e.environment,this.scene.fog=e.fog,this.scene.userData=JSON.parse(JSON.stringify(e.userData)),this.signals.sceneGraphChanged.active=!1;e.children.length>0;)this.addObject(e.children[0]);this.signals.sceneGraphChanged.active=!0,this.signals.sceneGraphChanged.dispatch()},addObject:function(e,t,a){var i=this;e.traverse((function(e){void 0!==e.geometry&&i.addGeometry(e.geometry),void 0!==e.material&&i.addMaterial(e.material),i.addCamera(e),i.addHelper(e)})),void 0===t?this.scene.add(e):(t.children.splice(a,0,e),e.parent=t),this.signals.objectAdded.dispatch(e),this.signals.sceneGraphChanged.dispatch()},moveObject:function(e,t,a){if(void 0===t&&(t=this.scene),t.add(e),void 0!==a){var i=t.children.indexOf(a);t.children.splice(i,0,e),t.children.pop()}this.signals.sceneGraphChanged.dispatch()},nameObject:function(e,t){e.name=t,this.signals.sceneGraphChanged.dispatch()},removeObject:function(e){if(null!==e.parent){var t=this;e.traverse((function(e){t.removeCamera(e),t.removeHelper(e),void 0!==e.material&&t.removeMaterial(e.material)})),e.parent.remove(e),this.signals.objectRemoved.dispatch(e),this.signals.sceneGraphChanged.dispatch()}},addGeometry:function(e){this.geometries[e.uuid]=e},setGeometryName:function(e,t){e.name=t,this.signals.sceneGraphChanged.dispatch()},addMaterial:function(e){if(Array.isArray(e))for(var t=0,a=e.length;t<a;t++)this.addMaterialToRefCounter(e[t]);else this.addMaterialToRefCounter(e);this.signals.materialAdded.dispatch()},addMaterialToRefCounter:function(e){var t=this.materialsRefCounter,a=t.get(e);void 0===a?(t.set(e,1),this.materials[e.uuid]=e):(a++,t.set(e,a))},removeMaterial:function(e){if(Array.isArray(e))for(var t=0,a=e.length;t<a;t++)this.removeMaterialFromRefCounter(e[t]);else this.removeMaterialFromRefCounter(e);this.signals.materialRemoved.dispatch()},removeMaterialFromRefCounter:function(e){var t=this.materialsRefCounter,a=t.get(e);0===--a?(t.delete(e),delete this.materials[e.uuid]):t.set(e,a)},getMaterialById:function(e){for(var t,a=Object.values(this.materials),i=0;i<a.length;i++)if(a[i].id===e){t=a[i];break}return t},setMaterialName:function(e,t){e.name=t,this.signals.sceneGraphChanged.dispatch()},addTexture:function(e){this.textures[e.uuid]=e},addCamera:function(e){e.isCamera&&(this.cameras[e.uuid]=e,this.signals.cameraAdded.dispatch(e))},removeCamera:function(e){void 0!==this.cameras[e.uuid]&&(delete this.cameras[e.uuid],this.signals.cameraRemoved.dispatch(e))},addHelper:function(){var e=new l.SphereGeometry(2,4,2),t=new l.MeshBasicMaterial({color:16711680,visible:!1});return function(a,i){if(void 0===i){if(a.isCamera)i=new l.CameraHelper(a);else if(a.isPointLight)i=new l.PointLightHelper(a,1);else if(a.isDirectionalLight)i=new l.DirectionalLightHelper(a,1);else if(a.isSpotLight)i=new l.SpotLightHelper(a);else if(a.isHemisphereLight)i=new l.HemisphereLightHelper(a,1);else{if(!a.isSkinnedMesh)return;i=new l.SkeletonHelper(a.skeleton.bones[0])}var r=new l.Mesh(e,t);r.name="picker",r.userData.object=a,i.add(r)}this.sceneHelpers.add(i),this.helpers[a.id]=i,this.signals.helperAdded.dispatch(i)}}(),removeHelper:function(e){if(void 0!==this.helpers[e.id]){var t=this.helpers[e.id];t.parent.remove(t),delete this.helpers[e.id],this.signals.helperRemoved.dispatch(t)}},addScript:function(e,t){void 0===this.scripts[e.uuid]&&(this.scripts[e.uuid]=[]),this.scripts[e.uuid].push(t),this.signals.scriptAdded.dispatch(t)},removeScript:function(e,t){if(void 0!==this.scripts[e.uuid]){var a=this.scripts[e.uuid].indexOf(t);-1!==a&&this.scripts[e.uuid].splice(a,1),this.signals.scriptRemoved.dispatch(t)}},getObjectMaterial:function(e,t){var a=e.material;return Array.isArray(a)&&void 0!==t&&(a=a[t]),a},setObjectMaterial:function(e,t,a){Array.isArray(e.material)&&void 0!==t?e.material[t]=a:e.material=a},setViewportCamera:function(e){this.viewportCamera=this.cameras[e],this.signals.viewportCameraChanged.dispatch()},select:function(e){if(this.selected!==e){var t=null;null!==e&&(t=e.uuid),this.selected=e,this.config.setKey("selected",t),this.signals.objectSelected.dispatch(e)}},selectById:function(e){e!==this.camera.id?this.select(this.scene.getObjectById(e)):this.select(this.camera)},selectByUuid:function(e){var t=this;this.scene.traverse((function(a){a.uuid===e&&t.select(a)}))},deselect:function(){this.select(null)},focus:function(e){void 0!==e&&this.signals.objectFocused.dispatch(e)},focusById:function(e){this.focus(this.scene.getObjectById(e))},clear:function(){this.history.clear(),this.storage.clear(),this.camera.copy(Q),this.signals.cameraResetted.dispatch(),this.scene.name="Scene",this.scene.userData={},this.scene.background=null,this.scene.environment=null,this.scene.fog=null;for(var e=this.scene.children;e.length>0;)this.removeObject(e[0]);this.geometries={},this.materials={},this.textures={},this.scripts={},this.materialsRefCounter.clear(),this.animations={},this.mixer.stopAllAction(),this.deselect(),this.signals.editorCleared.dispatch()},fromJSON:function(){var e=Object(h.a)(u.a.mark((function e(t){var a,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new l.ObjectLoader,e.next=3,a.parseAsync(t.camera);case 3:return i=e.sent,this.camera.copy(i),this.signals.cameraResetted.dispatch(),this.history.fromJSON(t.history),this.scripts=t.scripts,e.t0=this,e.next=11,a.parseAsync(t.scene);case 11:e.t1=e.sent,e.t0.setScene.call(e.t0,e.t1);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),toJSON:function(){var e=this.scene,t=this.scripts;for(var a in t){0!==t[a].length&&void 0!==e.getObjectByProperty("uuid",a)||delete t[a]}return{metadata:{},project:{shadows:this.config.getKey("project/renderer/shadows"),shadowType:this.config.getKey("project/renderer/shadowType"),vr:this.config.getKey("project/vr"),physicallyCorrectLights:this.config.getKey("project/renderer/physicallyCorrectLights"),toneMapping:this.config.getKey("project/renderer/toneMapping"),toneMappingExposure:this.config.getKey("project/renderer/toneMappingExposure")},camera:this.camera.toJSON(),scene:this.scene.toJSON(),scripts:this.scripts,history:this.history.toJSON()}},objectByUuid:function(e){return this.scene.getObjectByProperty("uuid",e,!0)},execute:function(e,t){this.history.execute(e,t)},undo:function(){this.history.undo()},redo:function(){this.history.redo()}};var $=a(16),ee=new l.Raycaster,te=new l.Vector3,ae=new l.Vector3,ie=new l.Quaternion,re={X:new l.Vector3(1,0,0),Y:new l.Vector3(0,1,0),Z:new l.Vector3(0,0,1)},ne={type:"change"},oe={type:"mouseDown"},se={type:"mouseUp",mode:null},de={type:"objectChange"},le=function(e){Object(j.a)(a,e);var t=Object(x.a)(a);function a(e,i){var r;Object(y.a)(this,a),r=t.call(this),void 0===i&&(console.warn('THREE.TransformControls: The second parameter "domElement" is now mandatory.'),i=document),r.visible=!1,r.domElement=i,r.domElement.style.touchAction="none";var n=new Pe;r._gizmo=n,r.add(n);var o=new _e;r._plane=o,r.add(o);var s=Object($.a)(r);function d(e,t){var a=t;Object.defineProperty(s,e,{get:function(){return void 0!==a?a:t},set:function(t){a!==t&&(a=t,o[e]=t,n[e]=t,s.dispatchEvent({type:e+"-changed",value:t}),s.dispatchEvent(ne))}}),s[e]=t,o[e]=t,n[e]=t}d("camera",e),d("object",void 0),d("enabled",!0),d("axis",null),d("mode","translate"),d("translationSnap",null),d("rotationSnap",null),d("scaleSnap",null),d("space","world"),d("size",1),d("dragging",!1),d("showX",!0),d("showY",!0),d("showZ",!0);var c=new l.Vector3,u=new l.Vector3,h=new l.Quaternion,m=new l.Quaternion,p=new l.Vector3,b=new l.Quaternion,g=new l.Vector3,v=new l.Vector3,f=new l.Vector3,w=new l.Vector3;return d("worldPosition",c),d("worldPositionStart",u),d("worldQuaternion",h),d("worldQuaternionStart",m),d("cameraPosition",p),d("cameraQuaternion",b),d("pointStart",g),d("pointEnd",v),d("rotationAxis",f),d("rotationAngle",0),d("eye",w),r._offset=new l.Vector3,r._startNorm=new l.Vector3,r._endNorm=new l.Vector3,r._cameraScale=new l.Vector3,r._parentPosition=new l.Vector3,r._parentQuaternion=new l.Quaternion,r._parentQuaternionInv=new l.Quaternion,r._parentScale=new l.Vector3,r._worldScaleStart=new l.Vector3,r._worldQuaternionInv=new l.Quaternion,r._worldScale=new l.Vector3,r._positionStart=new l.Vector3,r._quaternionStart=new l.Quaternion,r._scaleStart=new l.Vector3,r._getPointer=ce.bind(Object($.a)(r)),r._onPointerDown=he.bind(Object($.a)(r)),r._onPointerHover=ue.bind(Object($.a)(r)),r._onPointerMove=me.bind(Object($.a)(r)),r._onPointerUp=pe.bind(Object($.a)(r)),r.domElement.addEventListener("pointerdown",r._onPointerDown),r.domElement.addEventListener("pointermove",r._onPointerHover),r.domElement.addEventListener("pointerup",r._onPointerUp),r}return Object(v.a)(a,[{key:"updateMatrixWorld",value:function(){void 0!==this.object&&(this.object.updateMatrixWorld(),null===this.object.parent?console.error("TransformControls: The attached 3D object must be a part of the scene graph."):this.object.parent.matrixWorld.decompose(this._parentPosition,this._parentQuaternion,this._parentScale),this.object.matrixWorld.decompose(this.worldPosition,this.worldQuaternion,this._worldScale),this._parentQuaternionInv.copy(this._parentQuaternion).invert(),this._worldQuaternionInv.copy(this.worldQuaternion).invert()),this.camera.updateMatrixWorld(),this.camera.matrixWorld.decompose(this.cameraPosition,this.cameraQuaternion,this._cameraScale),this.eye.copy(this.cameraPosition).sub(this.worldPosition).normalize(),Object(f.a)(Object(w.a)(a.prototype),"updateMatrixWorld",this).call(this,this)}},{key:"pointerHover",value:function(e){if(void 0!==this.object&&!0!==this.dragging){ee.setFromCamera(e,this.camera);var t=be(this._gizmo.picker[this.mode],ee);this.axis=t?t.object.name:null}}},{key:"pointerDown",value:function(e){if(void 0!==this.object&&!0!==this.dragging&&0===e.button&&null!==this.axis){ee.setFromCamera(e,this.camera);var t=be(this._plane,ee,!0);if(t){var a=this.space;if("scale"===this.mode?a="local":"E"!==this.axis&&"XYZE"!==this.axis&&"XYZ"!==this.axis||(a="world"),"local"===a&&"rotate"===this.mode){var i=this.rotationSnap;"X"===this.axis&&i&&(this.object.rotation.x=Math.round(this.object.rotation.x/i)*i),"Y"===this.axis&&i&&(this.object.rotation.y=Math.round(this.object.rotation.y/i)*i),"Z"===this.axis&&i&&(this.object.rotation.z=Math.round(this.object.rotation.z/i)*i)}this.object.updateMatrixWorld(),this.object.parent.updateMatrixWorld(),this._positionStart.copy(this.object.position),this._quaternionStart.copy(this.object.quaternion),this._scaleStart.copy(this.object.scale),this.object.matrixWorld.decompose(this.worldPositionStart,this.worldQuaternionStart,this._worldScaleStart),this.pointStart.copy(t.point).sub(this.worldPositionStart)}this.dragging=!0,oe.mode=this.mode,this.dispatchEvent(oe)}}},{key:"pointerMove",value:function(e){var t=this.axis,a=this.mode,i=this.object,r=this.space;if("scale"===a?r="local":"E"!==t&&"XYZE"!==t&&"XYZ"!==t||(r="world"),void 0!==i&&null!==t&&!1!==this.dragging&&-1===e.button){ee.setFromCamera(e,this.camera);var n=be(this._plane,ee,!0);if(n){if(this.pointEnd.copy(n.point).sub(this.worldPositionStart),"translate"===a)this._offset.copy(this.pointEnd).sub(this.pointStart),"local"===r&&"XYZ"!==t&&this._offset.applyQuaternion(this._worldQuaternionInv),-1===t.indexOf("X")&&(this._offset.x=0),-1===t.indexOf("Y")&&(this._offset.y=0),-1===t.indexOf("Z")&&(this._offset.z=0),"local"===r&&"XYZ"!==t?this._offset.applyQuaternion(this._quaternionStart).divide(this._parentScale):this._offset.applyQuaternion(this._parentQuaternionInv).divide(this._parentScale),i.position.copy(this._offset).add(this._positionStart),this.translationSnap&&("local"===r&&(i.position.applyQuaternion(ie.copy(this._quaternionStart).invert()),-1!==t.search("X")&&(i.position.x=Math.round(i.position.x/this.translationSnap)*this.translationSnap),-1!==t.search("Y")&&(i.position.y=Math.round(i.position.y/this.translationSnap)*this.translationSnap),-1!==t.search("Z")&&(i.position.z=Math.round(i.position.z/this.translationSnap)*this.translationSnap),i.position.applyQuaternion(this._quaternionStart)),"world"===r&&(i.parent&&i.position.add(te.setFromMatrixPosition(i.parent.matrixWorld)),-1!==t.search("X")&&(i.position.x=Math.round(i.position.x/this.translationSnap)*this.translationSnap),-1!==t.search("Y")&&(i.position.y=Math.round(i.position.y/this.translationSnap)*this.translationSnap),-1!==t.search("Z")&&(i.position.z=Math.round(i.position.z/this.translationSnap)*this.translationSnap),i.parent&&i.position.sub(te.setFromMatrixPosition(i.parent.matrixWorld))));else if("scale"===a){if(-1!==t.search("XYZ")){var o=this.pointEnd.length()/this.pointStart.length();this.pointEnd.dot(this.pointStart)<0&&(o*=-1),ae.set(o,o,o)}else te.copy(this.pointStart),ae.copy(this.pointEnd),te.applyQuaternion(this._worldQuaternionInv),ae.applyQuaternion(this._worldQuaternionInv),ae.divide(te),-1===t.search("X")&&(ae.x=1),-1===t.search("Y")&&(ae.y=1),-1===t.search("Z")&&(ae.z=1);i.scale.copy(this._scaleStart).multiply(ae),this.scaleSnap&&(-1!==t.search("X")&&(i.scale.x=Math.round(i.scale.x/this.scaleSnap)*this.scaleSnap||this.scaleSnap),-1!==t.search("Y")&&(i.scale.y=Math.round(i.scale.y/this.scaleSnap)*this.scaleSnap||this.scaleSnap),-1!==t.search("Z")&&(i.scale.z=Math.round(i.scale.z/this.scaleSnap)*this.scaleSnap||this.scaleSnap))}else if("rotate"===a){this._offset.copy(this.pointEnd).sub(this.pointStart);var s=20/this.worldPosition.distanceTo(te.setFromMatrixPosition(this.camera.matrixWorld));"E"===t?(this.rotationAxis.copy(this.eye),this.rotationAngle=this.pointEnd.angleTo(this.pointStart),this._startNorm.copy(this.pointStart).normalize(),this._endNorm.copy(this.pointEnd).normalize(),this.rotationAngle*=this._endNorm.cross(this._startNorm).dot(this.eye)<0?1:-1):"XYZE"===t?(this.rotationAxis.copy(this._offset).cross(this.eye).normalize(),this.rotationAngle=this._offset.dot(te.copy(this.rotationAxis).cross(this.eye))*s):"X"!==t&&"Y"!==t&&"Z"!==t||(this.rotationAxis.copy(re[t]),te.copy(re[t]),"local"===r&&te.applyQuaternion(this.worldQuaternion),this.rotationAngle=this._offset.dot(te.cross(this.eye).normalize())*s),this.rotationSnap&&(this.rotationAngle=Math.round(this.rotationAngle/this.rotationSnap)*this.rotationSnap),"local"===r&&"E"!==t&&"XYZE"!==t?(i.quaternion.copy(this._quaternionStart),i.quaternion.multiply(ie.setFromAxisAngle(this.rotationAxis,this.rotationAngle)).normalize()):(this.rotationAxis.applyQuaternion(this._parentQuaternionInv),i.quaternion.copy(ie.setFromAxisAngle(this.rotationAxis,this.rotationAngle)),i.quaternion.multiply(this._quaternionStart).normalize())}this.dispatchEvent(ne),this.dispatchEvent(de)}}}},{key:"pointerUp",value:function(e){0===e.button&&(this.dragging&&null!==this.axis&&(se.mode=this.mode,this.dispatchEvent(se)),this.dragging=!1,this.axis=null)}},{key:"dispose",value:function(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerHover),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.traverse((function(e){e.geometry&&e.geometry.dispose(),e.material&&e.material.dispose()}))}},{key:"attach",value:function(e){return this.object=e,this.visible=!0,this}},{key:"detach",value:function(){return this.object=void 0,this.visible=!1,this.axis=null,this}},{key:"getRaycaster",value:function(){return ee}},{key:"getMode",value:function(){return this.mode}},{key:"setMode",value:function(e){this.mode=e}},{key:"setTranslationSnap",value:function(e){this.translationSnap=e}},{key:"setRotationSnap",value:function(e){this.rotationSnap=e}},{key:"setScaleSnap",value:function(e){this.scaleSnap=e}},{key:"setSize",value:function(e){this.size=e}},{key:"setSpace",value:function(e){this.space=e}},{key:"update",value:function(){console.warn("THREE.TransformControls: update function has no more functionality and therefore has been deprecated.")}}]),a}(l.Object3D);function ce(e){if(this.domElement.ownerDocument.pointerLockElement)return{x:0,y:0,button:e.button};var t=this.domElement.getBoundingClientRect();return{x:(e.clientX-t.left)/t.width*2-1,y:-(e.clientY-t.top)/t.height*2+1,button:e.button}}function ue(e){if(this.enabled)switch(e.pointerType){case"mouse":case"pen":this.pointerHover(this._getPointer(e))}}function he(e){this.enabled&&(this.domElement.setPointerCapture(e.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.pointerHover(this._getPointer(e)),this.pointerDown(this._getPointer(e)))}function me(e){this.enabled&&this.pointerMove(this._getPointer(e))}function pe(e){this.enabled&&(this.domElement.releasePointerCapture(e.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.pointerUp(this._getPointer(e)))}function be(e,t,a){for(var i=t.intersectObject(e,!0),r=0;r<i.length;r++)if(i[r].object.visible||a)return i[r];return!1}le.prototype.isTransformControls=!0;var ge=new l.Euler,ye=new l.Vector3(0,1,0),ve=new l.Vector3(0,0,0),fe=new l.Matrix4,we=new l.Quaternion,je=new l.Quaternion,xe=new l.Vector3,Oe=new l.Matrix4,Se=new l.Vector3(1,0,0),Ce=new l.Vector3(0,1,0),Me=new l.Vector3(0,0,1),ke=new l.Vector3,Ve=new l.Vector3,Ee=new l.Vector3,Pe=function(e){Object(j.a)(a,e);var t=Object(x.a)(a);function a(){var e;Object(y.a)(this,a),(e=t.call(this)).type="TransformControlsGizmo";var i=new l.MeshBasicMaterial({depthTest:!1,depthWrite:!1,fog:!1,toneMapped:!1,transparent:!0}),r=new l.LineBasicMaterial({depthTest:!1,depthWrite:!1,fog:!1,toneMapped:!1,transparent:!0}),n=i.clone();n.opacity=.15;var o=r.clone();o.opacity=.5;var s=i.clone();s.color.setHex(16711680);var d=i.clone();d.color.setHex(65280);var c=i.clone();c.color.setHex(255);var u=i.clone();u.color.setHex(16711680),u.opacity=.5;var h=i.clone();h.color.setHex(65280),h.opacity=.5;var m=i.clone();m.color.setHex(255),m.opacity=.5;var p=i.clone();p.opacity=.25;var b=i.clone();b.color.setHex(16776960),b.opacity=.25,i.clone().color.setHex(16776960);var g=i.clone();g.color.setHex(7895160);var v=new l.CylinderGeometry(0,.04,.1,12);v.translate(0,.05,0);var f=new l.BoxGeometry(.08,.08,.08);f.translate(0,.04,0);var w=new l.BufferGeometry;w.setAttribute("position",new l.Float32BufferAttribute([0,0,0,1,0,0],3));var j=new l.CylinderGeometry(.0075,.0075,.5,3);function x(e,t){var a=new l.TorusGeometry(e,.0075,3,64,t*Math.PI*2);return a.rotateY(Math.PI/2),a.rotateX(Math.PI/2),a}j.translate(0,.25,0);var O={X:[[new l.Mesh(v,s),[.5,0,0],[0,0,-Math.PI/2]],[new l.Mesh(v,s),[-.5,0,0],[0,0,Math.PI/2]],[new l.Mesh(j,s),[0,0,0],[0,0,-Math.PI/2]]],Y:[[new l.Mesh(v,d),[0,.5,0]],[new l.Mesh(v,d),[0,-.5,0],[Math.PI,0,0]],[new l.Mesh(j,d)]],Z:[[new l.Mesh(v,c),[0,0,.5],[Math.PI/2,0,0]],[new l.Mesh(v,c),[0,0,-.5],[-Math.PI/2,0,0]],[new l.Mesh(j,c),null,[Math.PI/2,0,0]]],XYZ:[[new l.Mesh(new l.OctahedronGeometry(.1,0),p.clone()),[0,0,0]]],XY:[[new l.Mesh(new l.BoxGeometry(.15,.15,.01),m.clone()),[.15,.15,0]]],YZ:[[new l.Mesh(new l.BoxGeometry(.15,.15,.01),u.clone()),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new l.Mesh(new l.BoxGeometry(.15,.15,.01),h.clone()),[.15,0,.15],[-Math.PI/2,0,0]]]},S={X:[[new l.Mesh(new l.CylinderGeometry(.2,0,.6,4),n),[.3,0,0],[0,0,-Math.PI/2]],[new l.Mesh(new l.CylinderGeometry(.2,0,.6,4),n),[-.3,0,0],[0,0,Math.PI/2]]],Y:[[new l.Mesh(new l.CylinderGeometry(.2,0,.6,4),n),[0,.3,0]],[new l.Mesh(new l.CylinderGeometry(.2,0,.6,4),n),[0,-.3,0],[0,0,Math.PI]]],Z:[[new l.Mesh(new l.CylinderGeometry(.2,0,.6,4),n),[0,0,.3],[Math.PI/2,0,0]],[new l.Mesh(new l.CylinderGeometry(.2,0,.6,4),n),[0,0,-.3],[-Math.PI/2,0,0]]],XYZ:[[new l.Mesh(new l.OctahedronGeometry(.2,0),n)]],XY:[[new l.Mesh(new l.BoxGeometry(.2,.2,.01),n),[.15,.15,0]]],YZ:[[new l.Mesh(new l.BoxGeometry(.2,.2,.01),n),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new l.Mesh(new l.BoxGeometry(.2,.2,.01),n),[.15,0,.15],[-Math.PI/2,0,0]]]},C={START:[[new l.Mesh(new l.OctahedronGeometry(.01,2),o),null,null,null,"helper"]],END:[[new l.Mesh(new l.OctahedronGeometry(.01,2),o),null,null,null,"helper"]],DELTA:[[new l.Line(function(){var e=new l.BufferGeometry;return e.setAttribute("position",new l.Float32BufferAttribute([0,0,0,1,1,1],3)),e}(),o),null,null,null,"helper"]],X:[[new l.Line(w,o.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new l.Line(w,o.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new l.Line(w,o.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]},M={XYZE:[[new l.Mesh(x(.5,1),g),null,[0,Math.PI/2,0]]],X:[[new l.Mesh(x(.5,.5),s)]],Y:[[new l.Mesh(x(.5,.5),d),null,[0,0,-Math.PI/2]]],Z:[[new l.Mesh(x(.5,.5),c),null,[0,Math.PI/2,0]]],E:[[new l.Mesh(x(.75,1),b),null,[0,Math.PI/2,0]]]},k={AXIS:[[new l.Line(w,o.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]]},V={XYZE:[[new l.Mesh(new l.SphereGeometry(.25,10,8),n)]],X:[[new l.Mesh(new l.TorusGeometry(.5,.1,4,24),n),[0,0,0],[0,-Math.PI/2,-Math.PI/2]]],Y:[[new l.Mesh(new l.TorusGeometry(.5,.1,4,24),n),[0,0,0],[Math.PI/2,0,0]]],Z:[[new l.Mesh(new l.TorusGeometry(.5,.1,4,24),n),[0,0,0],[0,0,-Math.PI/2]]],E:[[new l.Mesh(new l.TorusGeometry(.75,.1,2,24),n)]]},E={X:[[new l.Mesh(f,s),[.5,0,0],[0,0,-Math.PI/2]],[new l.Mesh(j,s),[0,0,0],[0,0,-Math.PI/2]],[new l.Mesh(f,s),[-.5,0,0],[0,0,Math.PI/2]]],Y:[[new l.Mesh(f,d),[0,.5,0]],[new l.Mesh(j,d)],[new l.Mesh(f,d),[0,-.5,0],[0,0,Math.PI]]],Z:[[new l.Mesh(f,c),[0,0,.5],[Math.PI/2,0,0]],[new l.Mesh(j,c),[0,0,0],[Math.PI/2,0,0]],[new l.Mesh(f,c),[0,0,-.5],[-Math.PI/2,0,0]]],XY:[[new l.Mesh(new l.BoxGeometry(.15,.15,.01),m),[.15,.15,0]]],YZ:[[new l.Mesh(new l.BoxGeometry(.15,.15,.01),u),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new l.Mesh(new l.BoxGeometry(.15,.15,.01),h),[.15,0,.15],[-Math.PI/2,0,0]]],XYZ:[[new l.Mesh(new l.BoxGeometry(.1,.1,.1),p.clone())]]},P={X:[[new l.Mesh(new l.CylinderGeometry(.2,0,.6,4),n),[.3,0,0],[0,0,-Math.PI/2]],[new l.Mesh(new l.CylinderGeometry(.2,0,.6,4),n),[-.3,0,0],[0,0,Math.PI/2]]],Y:[[new l.Mesh(new l.CylinderGeometry(.2,0,.6,4),n),[0,.3,0]],[new l.Mesh(new l.CylinderGeometry(.2,0,.6,4),n),[0,-.3,0],[0,0,Math.PI]]],Z:[[new l.Mesh(new l.CylinderGeometry(.2,0,.6,4),n),[0,0,.3],[Math.PI/2,0,0]],[new l.Mesh(new l.CylinderGeometry(.2,0,.6,4),n),[0,0,-.3],[-Math.PI/2,0,0]]],XY:[[new l.Mesh(new l.BoxGeometry(.2,.2,.01),n),[.15,.15,0]]],YZ:[[new l.Mesh(new l.BoxGeometry(.2,.2,.01),n),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new l.Mesh(new l.BoxGeometry(.2,.2,.01),n),[.15,0,.15],[-Math.PI/2,0,0]]],XYZ:[[new l.Mesh(new l.BoxGeometry(.2,.2,.2),n),[0,0,0]]]},_={X:[[new l.Line(w,o.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new l.Line(w,o.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new l.Line(w,o.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]};function T(e){var t=new l.Object3D;for(var a in e)for(var i=e[a].length;i--;){var r=e[a][i][0].clone(),n=e[a][i][1],o=e[a][i][2],s=e[a][i][3],d=e[a][i][4];r.name=a,r.tag=d,n&&r.position.set(n[0],n[1],n[2]),o&&r.rotation.set(o[0],o[1],o[2]),s&&r.scale.set(s[0],s[1],s[2]),r.updateMatrix();var c=r.geometry.clone();c.applyMatrix4(r.matrix),r.geometry=c,r.renderOrder=1/0,r.position.set(0,0,0),r.rotation.set(0,0,0),r.scale.set(1,1,1),t.add(r)}return t}return e.gizmo={},e.picker={},e.helper={},e.add(e.gizmo.translate=T(O)),e.add(e.gizmo.rotate=T(M)),e.add(e.gizmo.scale=T(E)),e.add(e.picker.translate=T(S)),e.add(e.picker.rotate=T(V)),e.add(e.picker.scale=T(P)),e.add(e.helper.translate=T(C)),e.add(e.helper.rotate=T(k)),e.add(e.helper.scale=T(_)),e.picker.translate.visible=!1,e.picker.rotate.visible=!1,e.picker.scale.visible=!1,e}return Object(v.a)(a,[{key:"updateMatrixWorld",value:function(e){var t=this,i="local"===("scale"===this.mode?"local":this.space)?this.worldQuaternion:je;this.gizmo.translate.visible="translate"===this.mode,this.gizmo.rotate.visible="rotate"===this.mode,this.gizmo.scale.visible="scale"===this.mode,this.helper.translate.visible="translate"===this.mode,this.helper.rotate.visible="rotate"===this.mode,this.helper.scale.visible="scale"===this.mode;var r=[];r=(r=(r=r.concat(this.picker[this.mode].children)).concat(this.gizmo[this.mode].children)).concat(this.helper[this.mode].children);for(var n=function(e){var a=r[e];a.visible=!0,a.rotation.set(0,0,0),a.position.copy(t.worldPosition);var n=void 0;if(n=t.camera.isOrthographicCamera?(t.camera.top-t.camera.bottom)/t.camera.zoom:t.worldPosition.distanceTo(t.cameraPosition)*Math.min(1.9*Math.tan(Math.PI*t.camera.fov/360)/t.camera.zoom,7),a.scale.set(1,1,1).multiplyScalar(n*t.size/4),"helper"===a.tag)return a.visible=!1,"AXIS"===a.name?(a.position.copy(t.worldPositionStart),a.visible=!!t.axis,"X"===t.axis&&(ie.setFromEuler(ge.set(0,0,0)),a.quaternion.copy(i).multiply(ie),Math.abs(ye.copy(Se).applyQuaternion(i).dot(t.eye))>.9&&(a.visible=!1)),"Y"===t.axis&&(ie.setFromEuler(ge.set(0,0,Math.PI/2)),a.quaternion.copy(i).multiply(ie),Math.abs(ye.copy(Ce).applyQuaternion(i).dot(t.eye))>.9&&(a.visible=!1)),"Z"===t.axis&&(ie.setFromEuler(ge.set(0,Math.PI/2,0)),a.quaternion.copy(i).multiply(ie),Math.abs(ye.copy(Me).applyQuaternion(i).dot(t.eye))>.9&&(a.visible=!1)),"XYZE"===t.axis&&(ie.setFromEuler(ge.set(0,Math.PI/2,0)),ye.copy(t.rotationAxis),a.quaternion.setFromRotationMatrix(fe.lookAt(ve,ye,Ce)),a.quaternion.multiply(ie),a.visible=t.dragging),"E"===t.axis&&(a.visible=!1)):"START"===a.name?(a.position.copy(t.worldPositionStart),a.visible=t.dragging):"END"===a.name?(a.position.copy(t.worldPosition),a.visible=t.dragging):"DELTA"===a.name?(a.position.copy(t.worldPositionStart),a.quaternion.copy(t.worldQuaternionStart),te.set(1e-10,1e-10,1e-10).add(t.worldPositionStart).sub(t.worldPosition).multiplyScalar(-1),te.applyQuaternion(t.worldQuaternionStart.clone().invert()),a.scale.copy(te),a.visible=t.dragging):(a.quaternion.copy(i),t.dragging?a.position.copy(t.worldPositionStart):a.position.copy(t.worldPosition),t.axis&&(a.visible=-1!==t.axis.search(a.name))),"continue";if(a.quaternion.copy(i),"translate"===t.mode||"scale"===t.mode){var o=.99;"X"===a.name&&Math.abs(ye.copy(Se).applyQuaternion(i).dot(t.eye))>o&&(a.scale.set(1e-10,1e-10,1e-10),a.visible=!1),"Y"===a.name&&Math.abs(ye.copy(Ce).applyQuaternion(i).dot(t.eye))>o&&(a.scale.set(1e-10,1e-10,1e-10),a.visible=!1),"Z"===a.name&&Math.abs(ye.copy(Me).applyQuaternion(i).dot(t.eye))>o&&(a.scale.set(1e-10,1e-10,1e-10),a.visible=!1),"XY"===a.name&&Math.abs(ye.copy(Me).applyQuaternion(i).dot(t.eye))<.2&&(a.scale.set(1e-10,1e-10,1e-10),a.visible=!1),"YZ"===a.name&&Math.abs(ye.copy(Se).applyQuaternion(i).dot(t.eye))<.2&&(a.scale.set(1e-10,1e-10,1e-10),a.visible=!1),"XZ"===a.name&&Math.abs(ye.copy(Ce).applyQuaternion(i).dot(t.eye))<.2&&(a.scale.set(1e-10,1e-10,1e-10),a.visible=!1)}else"rotate"===t.mode&&(we.copy(i),ye.copy(t.eye).applyQuaternion(ie.copy(i).invert()),-1!==a.name.search("E")&&a.quaternion.setFromRotationMatrix(fe.lookAt(t.eye,ve,Ce)),"X"===a.name&&(ie.setFromAxisAngle(Se,Math.atan2(-ye.y,ye.z)),ie.multiplyQuaternions(we,ie),a.quaternion.copy(ie)),"Y"===a.name&&(ie.setFromAxisAngle(Ce,Math.atan2(ye.x,ye.z)),ie.multiplyQuaternions(we,ie),a.quaternion.copy(ie)),"Z"===a.name&&(ie.setFromAxisAngle(Me,Math.atan2(ye.y,ye.x)),ie.multiplyQuaternions(we,ie),a.quaternion.copy(ie)));a.visible=a.visible&&(-1===a.name.indexOf("X")||t.showX),a.visible=a.visible&&(-1===a.name.indexOf("Y")||t.showY),a.visible=a.visible&&(-1===a.name.indexOf("Z")||t.showZ),a.visible=a.visible&&(-1===a.name.indexOf("E")||t.showX&&t.showY&&t.showZ),a.material._color=a.material._color||a.material.color.clone(),a.material._opacity=a.material._opacity||a.material.opacity,a.material.color.copy(a.material._color),a.material.opacity=a.material._opacity,t.enabled&&t.axis&&(a.name===t.axis||t.axis.split("").some((function(e){return a.name===e})))&&(a.material.color.setHex(16776960),a.material.opacity=1)},o=0;o<r.length;o++)n(o);Object(f.a)(Object(w.a)(a.prototype),"updateMatrixWorld",this).call(this,e)}}]),a}(l.Object3D);Pe.prototype.isTransformControlsGizmo=!0;var _e=function(e){Object(j.a)(a,e);var t=Object(x.a)(a);function a(){var e;return Object(y.a)(this,a),(e=t.call(this,new l.PlaneGeometry(1e5,1e5,2,2),new l.MeshBasicMaterial({visible:!1,wireframe:!0,side:l.DoubleSide,transparent:!0,opacity:.1,toneMapped:!1}))).type="TransformControlsPlane",e}return Object(v.a)(a,[{key:"updateMatrixWorld",value:function(e){var t=this.space;switch(this.position.copy(this.worldPosition),"scale"===this.mode&&(t="local"),ke.copy(Se).applyQuaternion("local"===t?this.worldQuaternion:je),Ve.copy(Ce).applyQuaternion("local"===t?this.worldQuaternion:je),Ee.copy(Me).applyQuaternion("local"===t?this.worldQuaternion:je),ye.copy(Ve),this.mode){case"translate":case"scale":switch(this.axis){case"X":ye.copy(this.eye).cross(ke),xe.copy(ke).cross(ye);break;case"Y":ye.copy(this.eye).cross(Ve),xe.copy(Ve).cross(ye);break;case"Z":ye.copy(this.eye).cross(Ee),xe.copy(Ee).cross(ye);break;case"XY":xe.copy(Ee);break;case"YZ":xe.copy(ke);break;case"XZ":ye.copy(Ee),xe.copy(Ve);break;case"XYZ":case"E":xe.set(0,0,0)}break;case"rotate":default:xe.set(0,0,0)}0===xe.length()?this.quaternion.copy(this.cameraQuaternion):(Oe.lookAt(te.set(0,0,0),xe,ye),this.quaternion.setFromRotationMatrix(Oe)),Object(f.a)(Object(w.a)(a.prototype),"updateMatrixWorld",this).call(this,e)}}]),a}(l.Mesh);_e.prototype.isTransformControlsPlane=!0;var Te=a(1);function Le(e,t){this.enabled=!0,this.center=new l.Vector3,this.panSpeed=.002,this.zoomSpeed=.1,this.rotationSpeed=.005;var a=this,i=new l.Vector3,r=new l.Vector3,n=new l.Box3,o=-1,s=0,d=1,c=2,u=o,h=this.center,m=new l.Matrix3,p=new l.Vector2,b=new l.Vector2,g=new l.Spherical,y=new l.Sphere,v={type:"change"};function f(e){if(!1!==a.enabled){switch(e.pointerType){case"mouse":case"pen":!function(e){0===e.button?u=s:1===e.button?u=d:2===e.button&&(u=c);b.set(e.clientX,e.clientY)}(e)}t.ownerDocument.addEventListener("pointermove",w,!1),t.ownerDocument.addEventListener("pointerup",j,!1)}}function w(e){if(!1!==a.enabled)switch(e.pointerType){case"mouse":case"pen":!function(e){p.set(e.clientX,e.clientY);var t=p.x-b.x,i=p.y-b.y;u===s?a.rotate(r.set(-t,-i,0)):u===d?a.zoom(r.set(0,0,i)):u===c&&a.pan(r.set(-t,i,0));b.set(e.clientX,e.clientY)}(e)}}function j(e){switch(e.pointerType){case"mouse":case"pen":x()}t.ownerDocument.removeEventListener("pointermove",w,!1),t.ownerDocument.removeEventListener("pointerup",j,!1)}function x(){u=o}function O(e){!1!==a.enabled&&(e.preventDefault(),a.zoom(r.set(0,0,e.deltaY>0?1:-1)))}function S(e){e.preventDefault()}this.focus=function(t){var i;n.setFromObject(t),!1===n.isEmpty()?(n.getCenter(h),i=n.getBoundingSphere(y).radius):(h.setFromMatrixPosition(t.matrixWorld),i=.1),r.set(0,0,1),r.applyQuaternion(e.quaternion),r.multiplyScalar(4*i),e.position.copy(h).add(r),a.dispatchEvent(v)},this.pan=function(t){var i=e.position.distanceTo(h);t.multiplyScalar(i*a.panSpeed),t.applyMatrix3(m.getNormalMatrix(e.matrix)),e.position.add(t),h.add(t),a.dispatchEvent(v)},this.zoom=function(t){var i=e.position.distanceTo(h);t.multiplyScalar(i*a.zoomSpeed),t.length()>i||(t.applyMatrix3(m.getNormalMatrix(e.matrix)),e.position.add(t),a.dispatchEvent(v))},this.rotate=function(t){i.copy(e.position).sub(h),g.setFromVector3(i),g.theta+=t.x*a.rotationSpeed,g.phi+=t.y*a.rotationSpeed,g.makeSafe(),i.setFromSpherical(g),e.position.copy(h).add(i),e.lookAt(h),a.dispatchEvent(v)},this.dispose=function(){t.removeEventListener("contextmenu",S,!1),t.removeEventListener("dblclick",x,!1),t.removeEventListener("wheel",O,!1),t.removeEventListener("pointerdown",f,!1),t.removeEventListener("touchstart",V,!1),t.removeEventListener("touchmove",E,!1)},t.addEventListener("contextmenu",S,!1),t.addEventListener("dblclick",x,!1),t.addEventListener("wheel",O,!1),t.addEventListener("pointerdown",f,!1);var C=[new l.Vector3,new l.Vector3,new l.Vector3],M=[new l.Vector3,new l.Vector3,new l.Vector3],k=null;function V(e){if(!1!==a.enabled){switch(e.touches.length){case 1:C[0].set(e.touches[0].pageX,e.touches[0].pageY,0).divideScalar(window.devicePixelRatio),C[1].set(e.touches[0].pageX,e.touches[0].pageY,0).divideScalar(window.devicePixelRatio);break;case 2:C[0].set(e.touches[0].pageX,e.touches[0].pageY,0).divideScalar(window.devicePixelRatio),C[1].set(e.touches[1].pageX,e.touches[1].pageY,0).divideScalar(window.devicePixelRatio),k=C[0].distanceTo(C[1])}M[0].copy(C[0]),M[1].copy(C[1])}}function E(e){if(!1!==a.enabled){switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case 1:C[0].set(e.touches[0].pageX,e.touches[0].pageY,0).divideScalar(window.devicePixelRatio),C[1].set(e.touches[0].pageX,e.touches[0].pageY,0).divideScalar(window.devicePixelRatio),a.rotate(C[0].sub(o(C[0],M)).multiplyScalar(-1));break;case 2:C[0].set(e.touches[0].pageX,e.touches[0].pageY,0).divideScalar(window.devicePixelRatio),C[1].set(e.touches[1].pageX,e.touches[1].pageY,0).divideScalar(window.devicePixelRatio);var t=C[0].distanceTo(C[1]);a.zoom(r.set(0,0,k-t)),k=t;var i=C[0].clone().sub(o(C[0],M)),n=C[1].clone().sub(o(C[1],M));i.x=-i.x,n.x=-n.x,a.pan(i.add(n))}M[0].copy(C[0]),M[1].copy(C[1])}function o(e,t){var a=t[0];for(var i in t)a.distanceTo(e)>t[i].distanceTo(e)&&(a=t[i]);return a}}t.addEventListener("touchstart",V,!1),t.addEventListener("touchmove",E,!1)}function Ne(e){var t=e.signals,a=new Te.m;function i(){var t={},i=e.cameras;for(var r in i){var n=i[r];t[n.uuid]=n.name}a.setOptions(t),a.setValue(e.viewportCamera.uuid)}return a.setPosition("absolute"),a.setRight("10px"),a.setTop("10px"),a.onChange((function(){e.setViewportCamera(this.getValue())})),t.cameraAdded.add(i),t.cameraRemoved.add(i),i(),a}function Re(e){var t=e.signals,a=e.strings,i=new Te.k;i.setId("info"),i.setPosition("absolute"),i.setLeft("10px"),i.setBottom("10px"),i.setFontSize("12px"),i.setColor("#fff");var r=new Te.p("0").setMarginLeft("6px"),n=new Te.p("0").setMarginLeft("6px"),o=new Te.p("0").setMarginLeft("6px"),s=new Te.p("0").setMarginLeft("6px");function d(){for(var t=e.scene,a=0,i=0,s=0,d=0,l=t.children.length;d<l;d++){t.children[d].traverseVisible((function(e){if(a++,e.isMesh){var t=e.geometry;t.isGeometry?(i+=t.vertices.length,s+=t.faces.length):t.isBufferGeometry&&(i+=t.attributes.position.count,null!==t.index?s+=t.index.count/3:s+=t.attributes.position.count/3)}}))}r.setValue(a.format()),n.setValue(i.format()),o.setValue(s.format())}return i.add(new Te.p(a.getKey("viewport/info/objects")).setTextTransform("lowercase")),i.add(r,new Te.a),i.add(new Te.p(a.getKey("viewport/info/vertices")).setTextTransform("lowercase")),i.add(n,new Te.a),i.add(new Te.p(a.getKey("viewport/info/triangles")).setTextTransform("lowercase")),i.add(o,new Te.a),i.add(new Te.p(a.getKey("viewport/info/frametime")).setTextTransform("lowercase")),i.add(s,new Te.a),t.objectAdded.add(d),t.objectRemoved.add(d),t.geometryChanged.add(d),t.sceneRendered.add((function(e){s.setValue(Number(e).toFixed(2)+" ms")})),i}Le.prototype=Object.create(l.EventDispatcher.prototype),Le.prototype.constructor=Le;var Ae=function(e){Object(j.a)(a,e);var t=Object(x.a)(a);function a(e,i){var r;Object(y.a)(this,a),(r=t.call(this)).animating=!1,r.controls=null;var n=new Te.k;n.setId("viewHelper"),n.setPosition("absolute"),n.setRight("0px"),n.setBottom("0px"),n.setHeight("128px"),n.setWidth("128px");var o=Object($.a)(r);n.dom.addEventListener("mouseup",(function(e){e.stopPropagation(),o.handleClick(e)})),n.dom.addEventListener("mousedown",(function(e){e.stopPropagation()})),i.add(n);var s=new l.Color("#ff3653"),d=new l.Color("#8adb00"),c=new l.Color("#2c8fff"),u=[],h=new l.Raycaster,m=new l.Vector2,p=new l.Object3D,b=new l.OrthographicCamera(-2,2,2,-2,0,4);b.position.set(0,0,2);var g=new l.BoxGeometry(.8,.05,.05).translate(.4,0,0),v=new l.Mesh(g,R(s)),f=new l.Mesh(g,R(d)),w=new l.Mesh(g,R(c));f.rotation.z=Math.PI/2,w.rotation.y=-Math.PI/2,r.add(v),r.add(w),r.add(f);var j=new l.Sprite(A(s,"X"));j.userData.type="posX";var x=new l.Sprite(A(d,"Y"));x.userData.type="posY";var O=new l.Sprite(A(c,"Z"));O.userData.type="posZ";var S=new l.Sprite(A(s));S.userData.type="negX";var C=new l.Sprite(A(d));C.userData.type="negY";var M=new l.Sprite(A(c));M.userData.type="negZ",j.position.x=1,x.position.y=1,O.position.z=1,S.position.x=-1,S.scale.setScalar(.8),C.position.y=-1,C.scale.setScalar(.8),M.position.z=-1,M.scale.setScalar(.8),r.add(j),r.add(x),r.add(O),r.add(S),r.add(C),r.add(M),u.push(j),u.push(x),u.push(O),u.push(S),u.push(C),u.push(M);var k=new l.Vector3,V=128,E=2*Math.PI;r.render=function(t){this.quaternion.copy(e.quaternion).invert(),this.updateMatrixWorld(),k.set(0,0,1),k.applyQuaternion(e.quaternion),k.x>=0?(j.material.opacity=1,S.material.opacity=.5):(j.material.opacity=.5,S.material.opacity=1),k.y>=0?(x.material.opacity=1,C.material.opacity=.5):(x.material.opacity=.5,C.material.opacity=1),k.z>=0?(O.material.opacity=1,M.material.opacity=.5):(O.material.opacity=.5,M.material.opacity=1);var a=i.dom.offsetWidth-V;t.clearDepth(),t.setViewport(a,0,V,V),t.render(this,b)};var P=new l.Vector3,_=new l.Quaternion,T=new l.Quaternion,L=new l.Quaternion,N=0;function R(e){return new l.MeshBasicMaterial({color:e,toneMapped:!1})}function A(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=document.createElement("canvas");a.width=64,a.height=64;var i=a.getContext("2d");i.beginPath(),i.arc(32,32,16,0,2*Math.PI),i.closePath(),i.fillStyle=e.getStyle(),i.fill(),null!==t&&(i.font="24px Arial",i.textAlign="center",i.fillStyle="#000000",i.fillText(t,32,41));var r=new l.CanvasTexture(a);return new l.SpriteMaterial({map:r,toneMapped:!1})}return r.handleClick=function(t){if(!0===this.animating)return!1;var a=i.dom.getBoundingClientRect(),r=a.left+(i.dom.offsetWidth-V),n=a.top+(i.dom.offsetHeight-V);m.x=(t.clientX-r)/(a.width-r)*2-1,m.y=-(t.clientY-n)/(a.bottom-n)*2+1,h.setFromCamera(m,b);var o=h.intersectObjects(u);return o.length>0&&(function(t,a){switch(t.userData.type){case"posX":P.set(1,0,0),_.setFromEuler(new l.Euler(0,.5*Math.PI,0));break;case"posY":P.set(0,1,0),_.setFromEuler(new l.Euler(.5*-Math.PI,0,0));break;case"posZ":P.set(0,0,1),_.setFromEuler(new l.Euler);break;case"negX":P.set(-1,0,0),_.setFromEuler(new l.Euler(0,.5*-Math.PI,0));break;case"negY":P.set(0,-1,0),_.setFromEuler(new l.Euler(.5*Math.PI,0,0));break;case"negZ":P.set(0,0,-1),_.setFromEuler(new l.Euler(0,Math.PI,0));break;default:console.error("ViewHelper: Invalid axis.")}N=e.position.distanceTo(a),P.multiplyScalar(N).add(a),p.position.copy(a),p.lookAt(e.position),T.copy(p.quaternion),p.lookAt(P),L.copy(p.quaternion)}(o[0].object,this.controls.center),this.animating=!0,!0)},r.update=function(t){var a=t*E,i=this.controls.center;T.rotateTowards(L,a),e.position.set(0,0,1).applyQuaternion(T).multiplyScalar(N).add(i),e.quaternion.rotateTowards(_,a),0===T.angleTo(L)&&(this.animating=!1)},r}return a}(l.Object3D);Ae.prototype.isViewHelper=!0;var De=function(e){Object(j.a)(a,e);var t=Object(x.a)(a);function a(){var e;Object(y.a)(this,a),e=t.call(this);var i=new l.BoxGeometry;i.deleteAttribute("uv");var r=new l.MeshStandardMaterial({side:l.BackSide}),n=new l.MeshStandardMaterial,o=new l.PointLight(16777215,5,28,2);o.position.set(.418,16.199,.3),e.add(o);var s=new l.Mesh(i,r);s.position.set(-.757,13.219,.717),s.scale.set(31.713,28.305,28.591),e.add(s);var d=new l.Mesh(i,n);d.position.set(-10.906,2.009,1.846),d.rotation.set(0,-.195,0),d.scale.set(2.328,7.905,4.651),e.add(d);var c=new l.Mesh(i,n);c.position.set(-5.607,-.754,-.758),c.rotation.set(0,.994,0),c.scale.set(1.97,1.534,3.955),e.add(c);var u=new l.Mesh(i,n);u.position.set(6.167,.857,7.803),u.rotation.set(0,.561,0),u.scale.set(3.927,6.285,3.687),e.add(u);var h=new l.Mesh(i,n);h.position.set(-2.017,.018,6.124),h.rotation.set(0,.333,0),h.scale.set(2.002,4.566,2.064),e.add(h);var m=new l.Mesh(i,n);m.position.set(2.291,-.756,-2.621),m.rotation.set(0,-.286,0),m.scale.set(1.546,1.552,1.496),e.add(m);var p=new l.Mesh(i,n);p.position.set(-2.193,-.369,-5.547),p.rotation.set(0,.516,0),p.scale.set(3.875,3.487,2.986),e.add(p);var b=new l.Mesh(i,Ge(50));b.position.set(-16.116,14.37,8.208),b.scale.set(.1,2.428,2.739),e.add(b);var g=new l.Mesh(i,Ge(50));g.position.set(-16.109,18.021,-8.207),g.scale.set(.1,2.425,2.751),e.add(g);var v=new l.Mesh(i,Ge(17));v.position.set(14.904,12.198,-1.832),v.scale.set(.15,4.265,6.331),e.add(v);var f=new l.Mesh(i,Ge(43));f.position.set(-.462,8.89,14.52),f.scale.set(4.38,5.441,.088),e.add(f);var w=new l.Mesh(i,Ge(20));w.position.set(3.235,11.486,-12.541),w.scale.set(2.5,2,.1),e.add(w);var j=new l.Mesh(i,Ge(100));return j.position.set(0,20,0),j.scale.set(1,.1,1),e.add(j),e}return a}(l.Scene);function Ge(e){var t=new l.MeshBasicMaterial;return t.color.setScalar(e),t}function Be(e){var t=e.signals,a=new Te.k;a.setId("viewport"),a.setPosition("absolute"),a.add(new Ne(e)),a.add(new Re(e));var i=null,r=null,n=e.camera,o=e.scene,s=e.sceneHelpers,d=!0,c=[],u=new l.Group,h=new l.GridHelper(30,30,8947848);h.material.color.setHex(8947848),h.material.vertexColors=!1,u.add(h);var m=new l.GridHelper(30,6,2236962);m.material.color.setHex(2236962),m.material.depthFunc=l.AlwaysDepth,m.material.vertexColors=!1,u.add(m);var p=new Ae(n,a),b=new l.Box3,g=new l.BoxHelper;g.material.depthTest=!1,g.material.transparent=!0,g.visible=!1,s.add(g);var y=null,v=null,f=null,w=new le(n,a.dom);w.addEventListener("change",(function(){var a=w.object;if(void 0!==a){g.setFromObject(a);var i=e.helpers[a.id];void 0!==i&&!0!==i.isSkeletonHelper&&i.update(),t.refreshSidebarObject3D.dispatch(a)}D()})),w.addEventListener("mouseDown",(function(){var e=w.object;y=e.position.clone(),v=e.rotation.clone(),f=e.scale.clone(),T.enabled=!1})),w.addEventListener("mouseUp",(function(){var t=w.object;if(void 0!==t)switch(w.getMode()){case"translate":y.equals(t.position)||e.execute(new z(e,t,t.position,y));break;case"rotate":v.equals(t.rotation)||e.execute(new W(e,t,t.rotation,v));break;case"scale":f.equals(t.scale)||e.execute(new H(e,t,t.scale,f))}T.enabled=!0})),s.add(w);var j=new l.Raycaster,x=new l.Vector2;function O(){n.aspect=a.dom.offsetWidth/a.dom.offsetHeight,n.updateProjectionMatrix()}function S(e,t){return x.set(2*e.x-1,-2*e.y+1),j.setFromCamera(x,n),j.intersectObjects(t).filter((function(e){return!0===e.object.visible}))}var C=new l.Vector2,M=new l.Vector2,k=new l.Vector2;function V(e,t,a){var i=e.getBoundingClientRect();return[(t-i.left)/i.width,(a-i.top)/i.height]}function E(){if(0===C.distanceTo(M)){var t=S(M,c);if(t.length>0){var a=t[0].object;void 0!==a.userData.object?e.select(a.userData.object):e.select(a)}else e.select(null);D()}}function P(e){var t=V(a.dom,e.clientX,e.clientY);M.fromArray(t),E(),document.removeEventListener("mouseup",P,!1)}function _(e){var t=e.changedTouches[0],i=V(a.dom,t.clientX,t.clientY);M.fromArray(i),E(),document.removeEventListener("touchend",_,!1)}a.dom.addEventListener("mousedown",(function(e){var t=V(a.dom,e.clientX,e.clientY);C.fromArray(t),document.addEventListener("mouseup",P,!1)}),!1),a.dom.addEventListener("touchstart",(function(e){var t=e.changedTouches[0],i=V(a.dom,t.clientX,t.clientY);C.fromArray(i),document.addEventListener("touchend",_,!1)}),!1),a.dom.addEventListener("dblclick",(function(e){var i=V(a.dom,e.clientX,e.clientY);k.fromArray(i);var r=S(k,c);if(r.length>0){var n=r[0];t.objectFocused.dispatch(n.object)}}),!1);var T=new Le(n,a.dom);T.addEventListener("change",(function(){t.cameraChanged.dispatch(n),t.refreshSidebarObject3D.dispatch(n)})),p.controls=T,t.editorCleared.add((function(){T.center.set(0,0,0),D()})),t.transformModeChanged.add((function(e){w.setMode(e)})),t.snapChanged.add((function(e){w.setTranslationSnap(e)})),t.spaceChanged.add((function(e){w.setSpace(e)})),t.rendererUpdated.add((function(){o.traverse((function(e){void 0!==e.material&&(e.material.needsUpdate=!0)})),D()})),t.rendererCreated.add((function(e){if(null!==i&&(i.setAnimationLoop(null),i.dispose(),r.dispose(),a.dom.removeChild(i.domElement)),(i=e).setAnimationLoop(N),i.setClearColor(11184810),window.matchMedia){var t=window.matchMedia("(prefers-color-scheme: dark)");t.addListener((function(e){i.setClearColor(e.matches?3355443:11184810),Ie(h,m,e.matches?[2236962,8947848]:[8947848,2631720]),D()})),i.setClearColor(t.matches?3355443:11184810),Ie(h,m,t.matches?[2236962,8947848]:[8947848,2631720])}i.setPixelRatio(window.devicePixelRatio),i.setSize(a.dom.offsetWidth,a.dom.offsetHeight),(r=new l.PMREMGenerator(i)).compileEquirectangularShader(),a.dom.appendChild(i.domElement),D()})),t.sceneGraphChanged.add((function(){D()})),t.cameraChanged.add((function(){D()})),t.objectSelected.add((function(e){g.visible=!1,w.detach(),null!==e&&e!==o&&e!==n&&(b.setFromObject(e),!1===b.isEmpty()&&(g.setFromObject(e),g.visible=!0),w.attach(e)),D()})),t.objectFocused.add((function(e){T.focus(e)})),t.geometryChanged.add((function(e){void 0!==e&&g.setFromObject(e),D()})),t.objectAdded.add((function(e){e.traverse((function(e){c.push(e)}))})),t.objectChanged.add((function(t){e.selected===t&&g.setFromObject(t),t.isPerspectiveCamera&&t.updateProjectionMatrix(),void 0!==e.helpers[t.id]&&e.helpers[t.id].update(),D()})),t.objectRemoved.add((function(e){T.enabled=!0,e===w.object&&w.detach(),e.traverse((function(e){c.splice(c.indexOf(e),1)}))})),t.helperAdded.add((function(e){var t=e.getObjectByName("picker");void 0!==t&&c.push(t)})),t.helperRemoved.add((function(e){var t=e.getObjectByName("picker");void 0!==t&&c.splice(c.indexOf(t),1)})),t.materialChanged.add((function(){D()})),t.animationStopped.add((function(){D()})),t.sceneBackgroundChanged.add((function(e,t,a,i){switch(e){case"None":o.background=null;break;case"Color":o.background=new l.Color(t);break;case"Texture":a&&(o.background=a);break;case"Equirectangular":i&&(i.mapping=l.EquirectangularReflectionMapping,o.background=i)}D()})),t.sceneEnvironmentChanged.add((function(e,t){switch(e){case"None":o.environment=null;break;case"Equirectangular":o.environment=null,t&&(t.mapping=l.EquirectangularReflectionMapping,o.environment=t);break;case"ModelViewer":o.environment=r.fromScene(new De,.04).texture}D()})),t.sceneFogChanged.add((function(e,t,a,i,r){switch(e){case"None":o.fog=null;break;case"Fog":o.fog=new l.Fog(t,a,i);break;case"FogExp2":o.fog=new l.FogExp2(t,r)}D()})),t.sceneFogSettingsChanged.add((function(e,t,a,i,r){switch(e){case"Fog":o.fog.color.setHex(t),o.fog.near=a,o.fog.far=i;break;case"FogExp2":o.fog.color.setHex(t),o.fog.density=r}D()})),t.viewportCameraChanged.add((function(){var t=e.viewportCamera;t.isPerspectiveCamera?(t.aspect=e.camera.aspect,t.projectionMatrix.copy(e.camera.projectionMatrix)):t.isOrthographicCamera,T.enabled=t===e.camera,D()})),t.windowResize.add((function(){O(),i.setSize(a.dom.offsetWidth,a.dom.offsetHeight),D()})),t.showGridChanged.add((function(e){u.visible=e,D()})),t.showHelpersChanged.add((function(e){d=e,w.enabled=e,D()})),t.cameraResetted.add(O);var L=new l.Clock;function N(){var t=e.mixer,a=L.getDelta(),i=!1;t.stats.actions.inUse>0&&(t.update(a),i=!0),!0===p.animating&&(p.update(a),i=!0),!0===i&&D()}var R=0,A=0;function D(){R=performance.now(),o.add(u),i.setViewport(0,0,a.dom.offsetWidth,a.dom.offsetHeight),i.render(o,e.viewportCamera),o.remove(u),n===e.viewportCamera&&(i.autoClear=!1,!0===d&&i.render(s,n),i.autoClear=!0),A=performance.now(),e.signals.sceneRendered.dispatch(A-R)}return a}function Ie(e,t,a){e.material.color.setHex(a[0]),t.material.color.setHex(a[1])}function Ke(e){var t=e.signals,a=e.strings,i=new Te.k;i.setId("toolbar");var r=document.createElement("img");r.title=a.getKey("toolbar/translate"),r.src="images/translate.svg";var n=new Te.b;n.dom.className="Button selected",n.dom.appendChild(r),n.onClick((function(){t.transformModeChanged.dispatch("translate")})),i.add(n);var o=document.createElement("img");o.title=a.getKey("toolbar/rotate"),o.src="images/rotate.svg";var s=new Te.b;s.dom.appendChild(o),s.onClick((function(){t.transformModeChanged.dispatch("rotate")})),i.add(s);var d=document.createElement("img");d.title=a.getKey("toolbar/scale"),d.src="images/scale.svg";var l=new Te.b;l.dom.appendChild(d),l.onClick((function(){t.transformModeChanged.dispatch("scale")})),i.add(l);var c=new Te.c(!1);return c.dom.title=a.getKey("toolbar/local"),c.onChange((function(){t.spaceChanged.dispatch(!0===this.getValue()?"local":"world")})),i.add(c),t.transformModeChanged.add((function(e){switch(n.dom.classList.remove("selected"),s.dom.classList.remove("selected"),l.dom.classList.remove("selected"),e){case"translate":n.dom.classList.add("selected");break;case"rotate":s.dom.classList.add("selected");break;case"scale":l.dom.classList.add("selected")}})),i}var Ue=a(22);function Fe(e){var t=e.signals,a=e.strings,i=new Te.k;i.setBorderTop("0"),i.setPaddingTop("20px");var r=new WeakMap;function n(t,a){var i=document.createElement("div");if(i.draggable=a,i.innerHTML=function(t){var a='<span class="type '.concat(function(e){return e.isScene?"Scene":e.isCamera?"Camera":e.isLight?"Light":e.isMesh?"Mesh":e.isLine?"Line":e.isPoints?"Points":"Object3D"}(t),'"></span> ').concat(o(t.name));if(t.isMesh){var i=t.geometry,r=t.material;a+=' <span class="type Geometry"></span> '.concat(o(i.name)),a+=' <span class="type Material"></span> '.concat(o(function(e){if(Array.isArray(e)){for(var t=[],a=0;a<e.length;a++)t.push(e[a].name);return t.join(",")}return e.name}(r)))}return a+=function(t){if(void 0!==e.scripts[t])return' <span class="type Script"></span>';return""}(t.uuid)}(t),i.value=t.id,r.has(t)){var n=r.get(t),s=document.createElement("span");s.classList.add("opener"),t.children.length>0&&s.classList.add(n?"open":"closed"),s.addEventListener("click",(function(){r.set(t,!1===r.get(t)),P()}),!1),i.insertBefore(s,i.firstChild)}return i}function o(e){return e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}var s=!1,d=new Ue.b(e);d.setId("outliner"),d.onChange((function(){s=!0,e.selectById(parseInt(d.getValue())),s=!1})),d.onDblClick((function(){e.focusById(parseInt(d.getValue()))})),i.add(d),i.add(new Te.a);var c=new Te.l,u=(new Te.m).setOptions({None:"",Color:"Color",Texture:"Texture",Equirectangular:"Equirect"}).setWidth("150px");u.onChange((function(){b(),g()})),c.add(new Te.p(a.getKey("sidebar/scene/background")).setWidth("90px")),c.add(u);var h=(new Te.d).setValue("#000000").setMarginLeft("8px").onInput(b);c.add(h);var m=(new Ue.e).setMarginLeft("8px").onChange(b);m.setDisplay("none"),c.add(m);var p=(new Ue.e).setMarginLeft("8px").onChange(b);function b(){t.sceneBackgroundChanged.dispatch(u.getValue(),h.getHexValue(),m.getValue(),p.getValue())}function g(){var e=u.getValue();u.setWidth("None"===e?"150px":"110px"),h.setDisplay("Color"===e?"":"none"),m.setDisplay("Texture"===e?"":"none"),p.setDisplay("Equirectangular"===e?"":"none")}p.setDisplay("none"),c.add(p),i.add(c);var y=new Te.l,v=(new Te.m).setOptions({None:"",Equirectangular:"Equirect",ModelViewer:"ModelViewer"}).setWidth("150px");v.setValue("None"),v.onChange((function(){w(),j()})),y.add(new Te.p(a.getKey("sidebar/scene/environment")).setWidth("90px")),y.add(v);var f=(new Ue.e).setMarginLeft("8px").onChange(w);function w(){t.sceneEnvironmentChanged.dispatch(v.getValue(),f.getValue())}function j(){var e=v.getValue();v.setWidth("Equirectangular"!==e?"150px":"110px"),f.setDisplay("Equirectangular"===e?"":"none")}function x(){t.sceneFogSettingsChanged.dispatch(S.getValue(),M.getHexValue(),k.getValue(),V.getValue(),E.getValue())}f.setDisplay("none"),y.add(f),i.add(y);var O=new Te.l,S=(new Te.m).setOptions({None:"",Fog:"Linear",FogExp2:"Exponential"}).setWidth("150px");S.onChange((function(){t.sceneFogChanged.dispatch(S.getValue(),M.getHexValue(),k.getValue(),V.getValue(),E.getValue()),_()})),O.add(new Te.p(a.getKey("sidebar/scene/fog")).setWidth("90px")),O.add(S),i.add(O);var C=new Te.l;C.setDisplay("none"),C.setMarginLeft("90px"),i.add(C);var M=(new Te.d).setValue("#aaaaaa");M.onInput(x),C.add(M);var k=new Te.j(.1).setWidth("40px").setRange(0,1/0).onChange(x);C.add(k);var V=new Te.j(50).setWidth("40px").setRange(0,1/0).onChange(x);C.add(V);var E=new Te.j(.05).setWidth("40px").setRange(0,.1).setStep(.001).setPrecision(3).onChange(x);function P(){var t=e.camera,a=e.scene,i=[];i.push(n(t,!1)),i.push(n(a,!1)),function e(t,a){for(var o=0,s=t.length;o<s;o++){var d=t[o];!1===r.has(d)&&r.set(d,!1);var l=n(d,!0);l.style.paddingLeft=18*a+"px",i.push(l),!0===r.get(d)&&e(d.children,a+1)}}(a.children,0),d.setOptions(i),null!==e.selected&&d.setValue(e.selected.id),a.background?a.background.isColor?(u.setValue("Color"),h.setHexValue(a.background.getHex())):a.background.isTexture&&(a.background.mapping===l.EquirectangularReflectionMapping?(u.setValue("Equirectangular"),p.setValue(a.background)):(u.setValue("Texture"),m.setValue(a.background))):u.setValue("None"),a.environment?a.environment.mapping===l.EquirectangularReflectionMapping&&(v.setValue("Equirectangular"),f.setValue(a.environment)):v.setValue("None"),a.fog?(M.setHexValue(a.fog.color.getHex()),a.fog.isFog?(S.setValue("Fog"),k.setValue(a.fog.near),V.setValue(a.fog.far)):a.fog.isFogExp2&&(S.setValue("FogExp2"),E.setValue(a.fog.density))):S.setValue("None"),g(),j(),_()}function _(){var e=S.getValue();C.setDisplay("None"===e?"none":""),k.setDisplay("Fog"===e?"":"none"),V.setDisplay("Fog"===e?"":"none"),E.setDisplay("FogExp2"===e?"":"none")}return C.add(E),P(),t.editorCleared.add(P),t.sceneGraphChanged.add(P),t.objectSelected.add((function(t){if(!0!==s)if(null!==t&&null!==t.parent){for(var a=!1,i=t.parent;i!==e.scene;)!0!==r.get(i)&&(r.set(i,!0),a=!0),i=i.parent;a&&P(),d.setValue(t.id)}else d.setValue(null)})),i}function ze(e){var t=e.strings,a=e.signals,i=new Te.k;i.setBorderTop("0"),i.setPaddingTop("20px"),i.setDisplay("none");var r=new Te.l,n=new Te.p;r.add(new Te.p(t.getKey("sidebar/object/type")).setWidth("90px")),r.add(n),i.add(r);var o=new Te.l,s=(new Te.h).setWidth("102px").setFontSize("12px").setDisabled(!0),d=new Te.b(t.getKey("sidebar/object/new")).setMarginLeft("7px").onClick((function(){s.setValue(l.MathUtils.generateUUID()),e.execute(new C(e,e.selected,s.getValue()))}));o.add(new Te.p(t.getKey("sidebar/object/uuid")).setWidth("90px")),o.add(s),o.add(d),i.add(o);var c=new Te.l,u=(new Te.h).setWidth("150px").setFontSize("12px").onChange((function(){e.execute(new M(e,e.selected,"name",u.getValue()))}));c.add(new Te.p(t.getKey("sidebar/object/name")).setWidth("90px")),c.add(u),i.add(c);var h=new Te.l,m=(new Te.j).setPrecision(3).setWidth("50px").onChange(je),p=(new Te.j).setPrecision(3).setWidth("50px").onChange(je),b=(new Te.j).setPrecision(3).setWidth("50px").onChange(je);h.add(new Te.p(t.getKey("sidebar/object/position")).setWidth("90px")),h.add(m,p,b),i.add(h);var g=new Te.l,y=(new Te.j).setStep(10).setNudge(.1).setUnit("\xb0").setWidth("50px").onChange(je),v=(new Te.j).setStep(10).setNudge(.1).setUnit("\xb0").setWidth("50px").onChange(je),f=(new Te.j).setStep(10).setNudge(.1).setUnit("\xb0").setWidth("50px").onChange(je);g.add(new Te.p(t.getKey("sidebar/object/rotation")).setWidth("90px")),g.add(y,v,f),i.add(g);var w=new Te.l,j=new Te.j(1).setPrecision(3).setWidth("50px").onChange(je),x=new Te.j(1).setPrecision(3).setWidth("50px").onChange(je),O=new Te.j(1).setPrecision(3).setWidth("50px").onChange(je);w.add(new Te.p(t.getKey("sidebar/object/scale")).setWidth("90px")),w.add(j,x,O),i.add(w);var S=new Te.l,k=(new Te.j).onChange(je);S.add(new Te.p(t.getKey("sidebar/object/fov")).setWidth("90px")),S.add(k),i.add(S);var V=new Te.l,E=(new Te.j).onChange(je);V.add(new Te.p(t.getKey("sidebar/object/left")).setWidth("90px")),V.add(E),i.add(V);var P=new Te.l,_=(new Te.j).onChange(je);P.add(new Te.p(t.getKey("sidebar/object/right")).setWidth("90px")),P.add(_),i.add(P);var T=new Te.l,L=(new Te.j).onChange(je);T.add(new Te.p(t.getKey("sidebar/object/top")).setWidth("90px")),T.add(L),i.add(T);var N=new Te.l,R=(new Te.j).onChange(je);N.add(new Te.p(t.getKey("sidebar/object/bottom")).setWidth("90px")),N.add(R),i.add(N);var D=new Te.l,G=(new Te.j).onChange(je);D.add(new Te.p(t.getKey("sidebar/object/near")).setWidth("90px")),D.add(G),i.add(D);var B=new Te.l,I=(new Te.j).onChange(je);B.add(new Te.p(t.getKey("sidebar/object/far")).setWidth("90px")),B.add(I),i.add(B);var K=new Te.l,U=(new Te.j).onChange(je);K.add(new Te.p(t.getKey("sidebar/object/intensity")).setWidth("90px")),K.add(U),i.add(K);var F=new Te.l,J=(new Te.d).onInput(je);F.add(new Te.p(t.getKey("sidebar/object/color")).setWidth("90px")),F.add(J),i.add(F);var Y=new Te.l,X=(new Te.d).onInput(je);Y.add(new Te.p(t.getKey("sidebar/object/groundcolor")).setWidth("90px")),Y.add(X),i.add(Y);var Z=new Te.l,Q=(new Te.j).setRange(0,1/0).onChange(je);Z.add(new Te.p(t.getKey("sidebar/object/distance")).setWidth("90px")),Z.add(Q),i.add(Z);var q=new Te.l,$=(new Te.j).setPrecision(3).setRange(0,Math.PI/2).onChange(je);q.add(new Te.p(t.getKey("sidebar/object/angle")).setWidth("90px")),q.add($),i.add(q);var ee=new Te.l,te=(new Te.j).setRange(0,1).onChange(je);ee.add(new Te.p(t.getKey("sidebar/object/penumbra")).setWidth("90px")),ee.add(te),i.add(ee);var ae=new Te.l,ie=(new Te.j).setRange(0,1/0).onChange(je);ae.add(new Te.p(t.getKey("sidebar/object/decay")).setWidth("90px")),ae.add(ie),i.add(ae);var re=new Te.l;re.add(new Te.p(t.getKey("sidebar/object/shadow")).setWidth("90px"));var ne=new Ue.a(!1,t.getKey("sidebar/object/cast")).onChange(je);re.add(ne);var oe=new Ue.a(!1,t.getKey("sidebar/object/receive")).onChange(je);re.add(oe),i.add(re);var se=new Te.l;se.add(new Te.p(t.getKey("sidebar/object/shadowBias")).setWidth("90px"));var de=new Te.j(0).setPrecision(5).setStep(1e-4).setNudge(1e-5).onChange(je);se.add(de),i.add(se);var le=new Te.l;le.add(new Te.p(t.getKey("sidebar/object/shadowNormalBias")).setWidth("90px"));var ce=new Te.j(0).onChange(je);le.add(ce),i.add(le);var ue=new Te.l;ue.add(new Te.p(t.getKey("sidebar/object/shadowRadius")).setWidth("90px"));var he=new Te.j(1).onChange(je);ue.add(he),i.add(ue);var me=new Te.l,pe=(new Te.c).onChange(je);me.add(new Te.p(t.getKey("sidebar/object/visible")).setWidth("90px")),me.add(pe),i.add(me);var be=new Te.l,ge=(new Te.c).onChange(je);be.add(new Te.p(t.getKey("sidebar/object/frustumcull")).setWidth("90px")),be.add(ge),i.add(be);var ye=new Te.l,ve=(new Te.i).setWidth("50px").onChange(je);ye.add(new Te.p(t.getKey("sidebar/object/renderorder")).setWidth("90px")),ye.add(ve),i.add(ye);var fe=new Te.l,we=(new Te.q).setWidth("150px").setHeight("40px").setFontSize("12px").onChange(je);function je(){var t=e.selected;if(null!==t){var a=new l.Vector3(m.getValue(),p.getValue(),b.getValue());t.position.distanceTo(a)>=.01&&e.execute(new z(e,t,a));var i=new l.Euler(y.getValue()*l.MathUtils.DEG2RAD,v.getValue()*l.MathUtils.DEG2RAD,f.getValue()*l.MathUtils.DEG2RAD);t.rotation.toVector3().distanceTo(i.toVector3())>=.01&&e.execute(new W(e,t,i));var r=new l.Vector3(j.getValue(),x.getValue(),O.getValue());t.scale.distanceTo(r)>=.01&&e.execute(new H(e,t,r)),void 0!==t.fov&&Math.abs(t.fov-k.getValue())>=.01&&(e.execute(new M(e,t,"fov",k.getValue())),t.updateProjectionMatrix()),void 0!==t.left&&Math.abs(t.left-E.getValue())>=.01&&(e.execute(new M(e,t,"left",E.getValue())),t.updateProjectionMatrix()),void 0!==t.right&&Math.abs(t.right-_.getValue())>=.01&&(e.execute(new M(e,t,"right",_.getValue())),t.updateProjectionMatrix()),void 0!==t.top&&Math.abs(t.top-L.getValue())>=.01&&(e.execute(new M(e,t,"top",L.getValue())),t.updateProjectionMatrix()),void 0!==t.bottom&&Math.abs(t.bottom-R.getValue())>=.01&&(e.execute(new M(e,t,"bottom",R.getValue())),t.updateProjectionMatrix()),void 0!==t.near&&Math.abs(t.near-G.getValue())>=.01&&(e.execute(new M(e,t,"near",G.getValue())),t.isOrthographicCamera&&t.updateProjectionMatrix()),void 0!==t.far&&Math.abs(t.far-I.getValue())>=.01&&(e.execute(new M(e,t,"far",I.getValue())),t.isOrthographicCamera&&t.updateProjectionMatrix()),void 0!==t.intensity&&Math.abs(t.intensity-U.getValue())>=.01&&e.execute(new M(e,t,"intensity",U.getValue())),void 0!==t.color&&t.color.getHex()!==J.getHexValue()&&e.execute(new A(e,t,"color",J.getHexValue())),void 0!==t.groundColor&&t.groundColor.getHex()!==X.getHexValue()&&e.execute(new A(e,t,"groundColor",X.getHexValue())),void 0!==t.distance&&Math.abs(t.distance-Q.getValue())>=.01&&e.execute(new M(e,t,"distance",Q.getValue())),void 0!==t.angle&&Math.abs(t.angle-$.getValue())>=.01&&e.execute(new M(e,t,"angle",$.getValue())),void 0!==t.penumbra&&Math.abs(t.penumbra-te.getValue())>=.01&&e.execute(new M(e,t,"penumbra",te.getValue())),void 0!==t.decay&&Math.abs(t.decay-ie.getValue())>=.01&&e.execute(new M(e,t,"decay",ie.getValue())),t.visible!==pe.getValue()&&e.execute(new M(e,t,"visible",pe.getValue())),t.frustumCulled!==ge.getValue()&&e.execute(new M(e,t,"frustumCulled",ge.getValue())),t.renderOrder!==ve.getValue()&&e.execute(new M(e,t,"renderOrder",ve.getValue())),void 0!==t.castShadow&&t.castShadow!==ne.getValue()&&e.execute(new M(e,t,"castShadow",ne.getValue())),t.receiveShadow!==oe.getValue()&&(void 0!==t.material&&(t.material.needsUpdate=!0),e.execute(new M(e,t,"receiveShadow",oe.getValue()))),void 0!==t.shadow&&(t.shadow.bias!==de.getValue()&&e.execute(new M(e,t.shadow,"bias",de.getValue())),t.shadow.normalBias!==ce.getValue()&&e.execute(new M(e,t.shadow,"normalBias",ce.getValue())),t.shadow.radius!==he.getValue()&&e.execute(new M(e,t.shadow,"radius",he.getValue())));try{var n=JSON.parse(we.getValue());JSON.stringify(t.userData)!=JSON.stringify(n)&&e.execute(new M(e,t,"userData",n))}catch(o){console.warn(o)}}}function xe(e){n.setValue(e.type),s.setValue(e.uuid),u.setValue(e.name),m.setValue(e.position.x),p.setValue(e.position.y),b.setValue(e.position.z),y.setValue(e.rotation.x*l.MathUtils.RAD2DEG),v.setValue(e.rotation.y*l.MathUtils.RAD2DEG),f.setValue(e.rotation.z*l.MathUtils.RAD2DEG),j.setValue(e.scale.x),x.setValue(e.scale.y),O.setValue(e.scale.z),void 0!==e.fov&&k.setValue(e.fov),void 0!==e.left&&E.setValue(e.left),void 0!==e.right&&_.setValue(e.right),void 0!==e.top&&L.setValue(e.top),void 0!==e.bottom&&R.setValue(e.bottom),void 0!==e.near&&G.setValue(e.near),void 0!==e.far&&I.setValue(e.far),void 0!==e.intensity&&U.setValue(e.intensity),void 0!==e.color&&J.setHexValue(e.color.getHexString()),void 0!==e.groundColor&&X.setHexValue(e.groundColor.getHexString()),void 0!==e.distance&&Q.setValue(e.distance),void 0!==e.angle&&$.setValue(e.angle),void 0!==e.penumbra&&te.setValue(e.penumbra),void 0!==e.decay&&ie.setValue(e.decay),void 0!==e.castShadow&&ne.setValue(e.castShadow),void 0!==e.receiveShadow&&oe.setValue(e.receiveShadow),void 0!==e.shadow&&(de.setValue(e.shadow.bias),ce.setValue(e.shadow.normalBias),he.setValue(e.shadow.radius)),pe.setValue(e.visible),ge.setValue(e.frustumCulled),ve.setValue(e.renderOrder);try{we.setValue(JSON.stringify(e.userData,null,"  "))}catch(t){console.log(t)}we.setBorderColor("transparent"),we.setBackgroundColor(""),function(e){e.isLight||e.isObject3D&&e.userData.targetInverse?(g.setDisplay("none"),w.setDisplay("none")):(g.setDisplay(""),w.setDisplay(""))}(e)}return we.onKeyUp((function(){try{JSON.parse(we.getValue()),we.dom.classList.add("success"),we.dom.classList.remove("fail")}catch(e){we.dom.classList.remove("success"),we.dom.classList.add("fail")}})),fe.add(new Te.p(t.getKey("sidebar/object/userdata")).setWidth("90px")),fe.add(we),i.add(fe),a.objectSelected.add((function(e){null!==e?(i.setDisplay("block"),function(e){var t={fov:S,left:V,right:P,top:T,bottom:N,near:D,far:B,intensity:K,color:F,groundColor:Y,distance:Z,angle:q,penumbra:ee,decay:ae,castShadow:re,receiveShadow:oe,shadow:[se,le,ue]};for(var a in t){var i=t[a];if(!0===Array.isArray(i))for(var r=0;r<i.length;r++)i[r].setDisplay(void 0!==e[a]?"":"none");else i.setDisplay(void 0!==e[a]?"":"none")}e.isLight&&oe.setDisplay("none"),(e.isAmbientLight||e.isHemisphereLight)&&re.setDisplay("none")}(e),xe(e)):i.setDisplay("none")})),a.objectChanged.add((function(t){t===e.selected&&xe(t)})),a.refreshSidebarObject3D.add((function(t){t===e.selected&&xe(t)})),i}var We=a(56),He=a(57),Je=a(31),Ye=new l.Vector3,Xe=new l.Vector3,Ze=new l.Matrix3,Qe=function(e){Object(j.a)(a,e);var t=Object(x.a)(a);function a(e){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16711680;Object(y.a)(this,a);var o=0,s=e.geometry;if(s&&s.isGeometry)return console.error("THREE.VertexNormalsHelper no longer supports Geometry. Use BufferGeometry instead."),Object(Je.a)(i);s&&s.isBufferGeometry&&(o=s.attributes.normal.count);var d=new l.BufferGeometry,c=new l.Float32BufferAttribute(2*o*3,3);return d.setAttribute("position",c),(i=t.call(this,d,new l.LineBasicMaterial({color:n,toneMapped:!1}))).object=e,i.size=r,i.type="VertexNormalsHelper",i.matrixAutoUpdate=!1,i.update(),i}return Object(v.a)(a,[{key:"update",value:function(){this.object.updateMatrixWorld(!0),Ze.getNormalMatrix(this.object.matrixWorld);var e=this.object.matrixWorld,t=this.geometry.attributes.position,a=this.object.geometry;if(a&&a.isGeometry)console.error("THREE.VertexNormalsHelper no longer supports Geometry. Use BufferGeometry instead.");else{if(a&&a.isBufferGeometry)for(var i=a.attributes.position,r=a.attributes.normal,n=0,o=0,s=i.count;o<s;o++)Ye.set(i.getX(o),i.getY(o),i.getZ(o)).applyMatrix4(e),Xe.set(r.getX(o),r.getY(o),r.getZ(o)),Xe.applyMatrix3(Ze).normalize().multiplyScalar(this.size).add(Ye),t.setXYZ(n,Ye.x,Ye.y,Ye.z),n+=1,t.setXYZ(n,Xe.x,Xe.y,Xe.z),n+=1;t.needsUpdate=!0}}}]),a}(l.LineSegments);function qe(e){var t=e.strings,i=e.signals,r=new Te.k;r.setBorderTop("0"),r.setDisplay("none"),r.setPaddingTop("20px");var n=null,o=new Te.l,s=new Te.p;o.add(new Te.p(t.getKey("sidebar/geometry/type")).setWidth("90px")),o.add(s),r.add(o);var d=new Te.l,c=(new Te.h).setWidth("102px").setFontSize("12px").setDisabled(!0),m=new Te.b(t.getKey("sidebar/geometry/new")).setMarginLeft("7px").onClick((function(){c.setValue(l.MathUtils.generateUUID()),e.execute(new G(e,e.selected,"uuid",c.getValue()))}));d.add(new Te.p(t.getKey("sidebar/geometry/uuid")).setWidth("90px")),d.add(c),d.add(m),r.add(d);var p=new Te.l,b=(new Te.h).setWidth("150px").setFontSize("12px").onChange((function(){e.execute(new G(e,e.selected,"name",b.getValue()))}));p.add(new Te.p(t.getKey("sidebar/geometry/name")).setWidth("90px")),p.add(b),r.add(p);var g=new Te.n;r.add(g),r.add(new We.SidebarGeometryBufferGeometry(e));var y=(new Te.p).setFontSize("12px").setVerticalAlign("middle");r.add(new Te.p(t.getKey("sidebar/geometry/bounds")).setWidth("90px")),r.add(y);var v=(new Te.l).setMarginTop("16px").setPaddingLeft("90px");r.add(v);var f=new Te.b(t.getKey("sidebar/geometry/show_vertex_normals"));function w(){return j.apply(this,arguments)}function j(){return(j=Object(h.a)(u.a.mark((function t(){var i,o,d,l,h,m,p,v;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(i=e.selected)||!i.geometry){t.next=27;break}if(o=i.geometry,r.setDisplay("block"),s.setValue(o.type),c.setValue(o.uuid),b.setValue(o.name),n===o.type){t.next=19;break}if(g.clear(),"BufferGeometry"!==o.type){t.next=13;break}g.add(new He.SidebarGeometryModifiers(e,i)),t.next=18;break;case 13:return t.next=15,a(77)("./Sidebar.Geometry.".concat(o.type,".js"));case 15:d=t.sent,l=d.GeometryParametersPanel,g.add(new l(e,i));case 18:n=o.type;case 19:null===o.boundingBox&&o.computeBoundingBox(),h=o.boundingBox,m=Math.floor(1e3*(h.max.x-h.min.x))/1e3,p=Math.floor(1e3*(h.max.y-h.min.y))/1e3,v=Math.floor(1e3*(h.max.z-h.min.z))/1e3,y.setInnerHTML("".concat(m,"<br/>").concat(p,"<br/>").concat(v)),t.next=28;break;case 27:r.setDisplay("none");case 28:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return f.onClick((function(){var t=e.selected;if(void 0===e.helpers[t.id]){var a=new Qe(t);e.addHelper(t,a)}else e.removeHelper(t);i.sceneGraphChanged.dispatch()})),v.add(f),i.objectSelected.add((function(){n=null,w()})),i.geometryChanged.add(w),r}var $e=a(15);function et(e,t,a){var i=e.signals,r=new Te.l;r.add(new Te.p(a).setWidth("90px"));var n=(new Te.c).setLeft("100px").onChange((function(){s[t]!==n.getValue()&&e.execute(new U(e,o,t,n.getValue(),0))}));r.add(n);var o=null,s=null;function d(){null!==o&&void 0!==o.material&&(s=o.material,t in s?(n.setValue(s[t]),r.setDisplay("")):r.setDisplay("none"))}return i.objectSelected.add((function(e){o=e,d()})),i.materialChanged.add(d),r}function tt(e,t,a){var i=e.signals,r=new Te.l;r.add(new Te.p(a).setWidth("90px"));var n,o=(new Te.d).onInput(l);r.add(o),"emissive"===t&&(n=(new Te.j).setWidth("30px").onChange(l),r.add(n));var s=null,d=null;function l(){d[t].getHex()!==o.getHexValue()&&e.execute(new B(e,s,t,o.getHexValue(),0)),void 0!==n&&d["".concat(t,"Intensity")]!==n.getValue()&&e.execute(new U(e,s,"".concat(t,"Intensity"),n.getValue(),0))}function c(){null!==s&&void 0!==s.material&&(d=s.material,t in d?(o.setHexValue(d[t].getHexString()),void 0!==n&&n.setValue(d["".concat(t,"Intensity")]),r.setDisplay("")):r.setDisplay("none"))}return i.objectSelected.add((function(e){s=e,c()})),i.materialChanged.add(c),r}function at(e,t,a,i){var r=e.signals,n=new Te.l;n.add(new Te.p(a).setWidth("90px"));var o=(new Te.m).setOptions(i).onChange((function(){var a=parseInt(o.getValue());d[t]!==a&&e.execute(new U(e,s,t,a,0))}));n.add(o);var s=null,d=null;function l(){null!==s&&void 0!==s.material&&(d=s.material,t in d?(o.setValue(d[t]),n.setDisplay("")):n.setDisplay("none"))}return r.objectSelected.add((function(e){s=e,l()})),r.materialChanged.add(l),n}function it(e,t,a){var i=e.signals,r=new Te.l;r.add(new Te.p(a).setWidth("90px"));var n=new Te.c(!1).setMarginRight("8px").onChange(b);r.add(n);var o=(new Ue.e).onChange((function(e){null!==e&&!0!==e.isDataTexture&&e.encoding!==l.sRGBEncoding&&(e.encoding=l.sRGBEncoding,p.needsUpdate=!0);n.setDisabled(!1),b()}));r.add(o);var s,d,c,u,h=t.replace("Map","");"aoMap"===t&&(s=(new Te.j).setWidth("30px").onChange((function(){p["".concat(t,"Intensity")]!==s.getValue()&&e.execute(new U(e,m,"".concat(t,"Intensity"),s.getValue(),0))})),r.add(s)),"bumpMap"!==t&&"displacementMap"!==t||(d=(new Te.j).setWidth("30px").onChange((function(){p["".concat(h,"Scale")]!==d.getValue()&&e.execute(new U(e,m,"".concat(h,"Scale"),d.getValue(),0))})),r.add(d)),"normalMap"!==t&&"clearcoatNormalMap"!==t||(c=(new Te.j).setWidth("30px").onChange(g),r.add(c),u=(new Te.j).setWidth("30px").onChange(g),r.add(u));var m=null,p=null;function b(){var a=n.getValue()?o.getValue():null;if(p.property!==a){var i=m.geometry;null!==a&&i.isBufferGeometry&&void 0===i.attributes.uv&&console.warn("Geometry doesn't have uvs:",i),e.execute(new K(e,m,t,a,0))}}function g(){var t=[c.getValue(),u.getValue()];p["".concat(h,"Scale")].x===t[0]&&p["".concat(h,"Scale")].y===t[1]||e.execute(new F(e,m,"".concat(h,"Scale"),t,0))}function y(){null!==m&&void 0!==m.material&&(p=m.material,t in p?(null!==p[t]&&o.setValue(p[t]),n.setValue(null!==p[t]),n.setDisabled(null===o.getValue()),void 0!==s&&s.setValue(p["".concat(t,"Intensity")]),void 0!==d&&d.setValue(p["".concat(h,"Scale")]),void 0!==c&&(c.setValue(p["".concat(h,"Scale")].x),u.setValue(p["".concat(h,"Scale")].y)),r.setDisplay("")):r.setDisplay("none"))}return i.objectSelected.add((function(e){m=e,o.setValue(null),y()})),i.materialChanged.add(y),r}function rt(e,t,a){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[-1/0,1/0],r=e.signals,n=new Te.l;n.add(new Te.p(a).setWidth("90px"));var o=(new Te.j).setWidth("60px").setRange(i[0],i[1]).onChange(l);n.add(o);var s=null,d=null;function l(){d[t]!==o.getValue()&&e.execute(new U(e,s,t,o.getValue(),0))}function c(){null!==s&&void 0!==s.material&&(d=s.material,t in d?(o.setValue(d[t]),n.setDisplay("")):n.setDisplay("none"))}return r.objectSelected.add((function(e){s=e,c()})),r.materialChanged.add(c),n}function nt(e,t){var a=e.signals,i=e.strings,r=null,n=null,o=new Te.l;o.add(new Te.p(i.getKey("sidebar/material/program")).setWidth("90px"));var s=new Te.b(i.getKey("sidebar/material/info"));s.setMarginRight("4px"),s.onClick((function(){a.editScript.dispatch(r,"programInfo")})),o.add(s);var d=new Te.b(i.getKey("sidebar/material/vertex"));d.setMarginRight("4px"),d.onClick((function(){a.editScript.dispatch(r,"vertexShader")})),o.add(d);var l=new Te.b(i.getKey("sidebar/material/fragment"));function c(){null!==r&&void 0!==r.material&&(n=r.material,t in n?o.setDisplay(""):o.setDisplay("none"))}return l.setMarginRight("4px"),l.onClick((function(){a.editScript.dispatch(r,"fragmentShader")})),o.add(l),a.objectSelected.add((function(e){r=e,c()})),a.materialChanged.add(c),o}function ot(e){var t,a,i=e.signals,r=e.strings,n=0,o=new Te.k;o.setBorderTop("0"),o.setDisplay("none"),o.setPaddingTop("20px");var s=new Te.l;s.add(new Te.p(r.getKey("sidebar/material/slot")).setWidth("90px"));var d=(new Te.m).setWidth("170px").setFontSize("12px").onChange(de);d.setOptions({0:""}).setValue(0),s.add(d),o.add(s);var c=new Te.l,u=(new Te.m).setWidth("150px").setFontSize("12px").onChange(de);c.add(new Te.p(r.getKey("sidebar/material/type")).setWidth("90px")),c.add(u),o.add(c);var h=new Te.l,m=(new Te.h).setWidth("102px").setFontSize("12px").setDisabled(!0),p=new Te.b(r.getKey("sidebar/material/new")).setMarginLeft("7px");p.onClick((function(){m.setValue(l.MathUtils.generateUUID()),de()})),h.add(new Te.p(r.getKey("sidebar/material/uuid")).setWidth("90px")),h.add(m),h.add(p),o.add(h);var b=new Te.l,g=(new Te.h).setWidth("150px").setFontSize("12px").onChange((function(){e.execute(new U(e,e.selected,"name",g.getValue(),n))}));b.add(new Te.p(r.getKey("sidebar/material/name")).setWidth("90px")),b.add(g),o.add(b);var y=new nt(e,"vertexShader");o.add(y);var v=new tt(e,"color",r.getKey("sidebar/material/color"));o.add(v);var f=new tt(e,"specular",r.getKey("sidebar/material/specular"));o.add(f);var w=new rt(e,"shininess",r.getKey("sidebar/material/shininess"));o.add(w);var j=new tt(e,"emissive",r.getKey("sidebar/material/emissive"));o.add(j);var x=new rt(e,"reflectivity",r.getKey("sidebar/material/reflectivity"));o.add(x);var O=new rt(e,"roughness",r.getKey("sidebar/material/roughness"),[0,1]);o.add(O);var S=new rt(e,"metalness",r.getKey("sidebar/material/metalness"),[0,1]);o.add(S);var C=new rt(e,"clearcoat",r.getKey("sidebar/material/clearcoat"),[0,1]);o.add(C);var M=new rt(e,"clearcoatRoughness",r.getKey("sidebar/material/clearcoatroughness"),[0,1]);o.add(M);var k=new rt(e,"transmission",r.getKey("sidebar/material/transmission"),[0,1]);o.add(k);var V=new rt(e,"attenuationDistance",r.getKey("sidebar/material/attenuationDistance"));o.add(V);var E=new tt(e,"attenuationTint",r.getKey("sidebar/material/attenuationTint"));o.add(E);var P=new rt(e,"thickness",r.getKey("sidebar/material/thickness"));o.add(P);var _=new et(e,"vertexColors",r.getKey("sidebar/material/vertexcolors"));o.add(_);var T=(t={},Object($e.a)(t,l.BasicDepthPacking,"Basic"),Object($e.a)(t,l.RGBADepthPacking,"RGBA"),t),L=new at(e,"depthPacking",r.getKey("sidebar/material/depthPacking"),T);o.add(L);var N=new it(e,"map",r.getKey("sidebar/material/map"));o.add(N);var R=new it(e,"specularMap",r.getKey("sidebar/material/specularmap"));o.add(R);var A=new it(e,"emissiveMap",r.getKey("sidebar/material/emissivemap"));o.add(A);var D=new it(e,"matcap",r.getKey("sidebar/material/matcap"));o.add(D);var G=new it(e,"alphaMap",r.getKey("sidebar/material/alphamap"));o.add(G);var B=new it(e,"bumpMap",r.getKey("sidebar/material/bumpmap"));o.add(B);var K=new it(e,"normalMap",r.getKey("sidebar/material/normalmap"));o.add(K);var F=new it(e,"clearcoatNormalMap",r.getKey("sidebar/material/clearcoatnormalmap"));o.add(F);var z=new it(e,"displacementMap",r.getKey("sidebar/material/displacementmap"));o.add(z);var W=new it(e,"roughnessMap",r.getKey("sidebar/material/roughnessmap"));o.add(W);var H=new it(e,"metalnessMap",r.getKey("sidebar/material/metalnessmap"));o.add(H);var J=new it(e,"envMap",r.getKey("sidebar/material/envmap"));o.add(J);var Y=new it(e,"lightMap",r.getKey("sidebar/material/lightmap"));o.add(Y);var X=new it(e,"aoMap",r.getKey("sidebar/material/aomap"));o.add(X);var Z=new it(e,"gradientMap",r.getKey("sidebar/material/gradientmap"));o.add(Z);var Q=new at(e,"side",r.getKey("sidebar/material/side"),{0:"Front",1:"Back",2:"Double"});o.add(Q);var q=new rt(e,"size",r.getKey("sidebar/material/size"),[0,1/0]);o.add(q);var $=new et(e,"sizeAttenuation",r.getKey("sidebar/material/sizeAttenuation"));o.add($);var ee=new et(e,"flatShading",r.getKey("sidebar/material/flatShading"));o.add(ee);var te=new at(e,"blending",r.getKey("sidebar/material/blending"),{0:"No",1:"Normal",2:"Additive",3:"Subtractive",4:"Multiply",5:"Custom"});o.add(te);var ae=new rt(e,"opacity",r.getKey("sidebar/material/opacity"),[0,1]);o.add(ae);var ie=new et(e,"transparent",r.getKey("sidebar/material/transparent"));o.add(ie);var re=new rt(e,"alphaTest",r.getKey("sidebar/material/alphatest"),[0,1]);o.add(re);var ne=new et(e,"depthTest",r.getKey("sidebar/material/depthtest"));o.add(ne);var oe=new et(e,"depthWrite",r.getKey("sidebar/material/depthwrite"));o.add(oe);var se=new et(e,"wireframe",r.getKey("sidebar/material/wireframe"));function de(){var t=n;(n=parseInt(d.getValue()))!==t&&le();var i=e.getObjectMaterial(a,n);i&&(void 0!==i.uuid&&i.uuid!==m.getValue()&&e.execute(new U(e,a,"uuid",m.getValue(),n)),i.type!==u.getValue()&&("RawShaderMaterial"===(i=new(st[u.getValue()])).type&&(i.vertexShader=dt+i.vertexShader),Array.isArray(a.material)?e.removeMaterial(a.material[n]):e.removeMaterial(a.material),e.execute(new I(e,a,i,n),"New Material: "+u.getValue()),e.addMaterial(i)),le())}function le(){if(a){var t=a.material;if(Array.isArray(t)){var i={};n=Math.max(0,Math.min(t.length,n));for(var r=0;r<t.length;r++)i[r]=String(r+1)+": "+t[r].name;d.setOptions(i).setValue(n)}void 0!==(t=e.getObjectMaterial(a,n)).uuid&&m.setValue(t.uuid),void 0!==t.name&&g.setValue(t.name),a.isMesh?u.setOptions(lt):a.isSprite?u.setOptions(ut):a.isPoints?u.setOptions(ht):a.isLine&&u.setOptions(ct),u.setValue(t.type),function(){var e=a.material;Array.isArray(e)?s.setDisplay(""):s.setDisplay("none")}()}}return o.add(se),i.objectSelected.add((function(e){var t=!1;e&&e.material&&(t=!0,Array.isArray(e.material)&&0===e.material.length&&(t=!1)),t?(a=e,le(),o.setDisplay("")):(a=null,o.setDisplay("none"))})),i.materialChanged.add(le),o}var st={LineBasicMaterial:l.LineBasicMaterial,LineDashedMaterial:l.LineDashedMaterial,MeshBasicMaterial:l.MeshBasicMaterial,MeshDepthMaterial:l.MeshDepthMaterial,MeshNormalMaterial:l.MeshNormalMaterial,MeshLambertMaterial:l.MeshLambertMaterial,MeshMatcapMaterial:l.MeshMatcapMaterial,MeshPhongMaterial:l.MeshPhongMaterial,MeshToonMaterial:l.MeshToonMaterial,MeshStandardMaterial:l.MeshStandardMaterial,MeshPhysicalMaterial:l.MeshPhysicalMaterial,RawShaderMaterial:l.RawShaderMaterial,ShaderMaterial:l.ShaderMaterial,ShadowMaterial:l.ShadowMaterial,SpriteMaterial:l.SpriteMaterial,PointsMaterial:l.PointsMaterial},dt=["uniform mat4 projectionMatrix;","uniform mat4 modelViewMatrix;\n","attribute vec3 position;\n\n"].join("\n"),lt={MeshBasicMaterial:"MeshBasicMaterial",MeshDepthMaterial:"MeshDepthMaterial",MeshNormalMaterial:"MeshNormalMaterial",MeshLambertMaterial:"MeshLambertMaterial",MeshMatcapMaterial:"MeshMatcapMaterial",MeshPhongMaterial:"MeshPhongMaterial",MeshToonMaterial:"MeshToonMaterial",MeshStandardMaterial:"MeshStandardMaterial",MeshPhysicalMaterial:"MeshPhysicalMaterial",RawShaderMaterial:"RawShaderMaterial",ShaderMaterial:"ShaderMaterial",ShadowMaterial:"ShadowMaterial"},ct={LineBasicMaterial:"LineBasicMaterial",LineDashedMaterial:"LineDashedMaterial",RawShaderMaterial:"RawShaderMaterial",ShaderMaterial:"ShaderMaterial"},ut={SpriteMaterial:"SpriteMaterial",RawShaderMaterial:"RawShaderMaterial",ShaderMaterial:"ShaderMaterial"},ht={PointsMaterial:"PointsMaterial",RawShaderMaterial:"RawShaderMaterial",ShaderMaterial:"ShaderMaterial"};function mt(e){var t=e.strings,a=new Te.o;return a.setId("properties"),a.addTab("object",t.getKey("sidebar/properties/object"),new ze(e)),a.addTab("geometry",t.getKey("sidebar/properties/geometry"),new qe(e)),a.addTab("material",t.getKey("sidebar/properties/material"),new ot(e)),a.select("object"),a}var pt=a(48);function bt(e){var t=e.strings,a=e.signals,i=e.mixer,r={};a.objectSelected.add((function(e){if(null!==e&&e.animations.length>0){var t=e.animations;n.setDisplay("");var a,o,d={},c=Object(pt.a)(t);try{for(c.s();!(o=c.n()).done;){var u=o.value;void 0===a&&(a=u.name),r[u.name]=i.clipAction(u,e),d[u.name]=u.name}}catch(h){c.e(h)}finally{c.f()}s.setOptions(d),s.setValue(a),l.setValue(i.timeScale)}else n.setDisplay("none")})),a.objectRemoved.add((function(e){null!==e&&e.animations.length>0&&i.uncacheRoot(e)}));var n=new Te.k;n.setDisplay("none"),n.add(new Te.p(t.getKey("sidebar/animations")).setTextTransform("uppercase")),n.add(new Te.a),n.add(new Te.a);var o=new Te.l,s=(new Te.m).setFontSize("12px");o.add(s),o.add(new Te.b(t.getKey("sidebar/animations/play")).setMarginLeft("4px").onClick((function(){r[s.getValue()].play()}))),o.add(new Te.b(t.getKey("sidebar/animations/stop")).setMarginLeft("4px").onClick((function(){r[s.getValue()].stop(),a.animationStopped.dispatch()}))),n.add(o);var d=new Te.l,l=new Te.j(.5).setWidth("60px").setRange(-10,10).onChange((function(){i.timeScale=l.getValue()}));return d.add(new Te.p(t.getKey("sidebar/animations/timescale")).setWidth("90px")),d.add(l),n.add(d),n}function gt(e){var t=e.config,a=e.signals,i=e.strings,r=null,n=new Te.k,o=new Te.l;o.add(new Te.p(i.getKey("sidebar/project/renderer").toUpperCase())),n.add(o);var s=new Te.l;n.add(s),s.add(new Te.p(i.getKey("sidebar/project/antialias")).setWidth("90px"));var d=new Ue.a(t.getKey("project/renderer/antialias")).onChange(w);s.add(d);var c=new Te.l;n.add(c),c.add(new Te.p(i.getKey("sidebar/project/physicallyCorrectLights")).setWidth("90px"));var u=new Ue.a(t.getKey("project/renderer/physicallyCorrectLights")).onChange((function(){r.physicallyCorrectLights=this.getValue(),a.rendererUpdated.dispatch()}));c.add(u);var h=new Te.l;n.add(h),h.add(new Te.p(i.getKey("sidebar/project/shadows")).setWidth("90px"));var m=new Ue.a(t.getKey("project/renderer/shadows")).onChange(b);h.add(m);var p=(new Te.m).setOptions({0:"Basic",1:"PCF",2:"PCF Soft"}).setWidth("125px").onChange(b);function b(){r.shadowMap.enabled=m.getValue(),r.shadowMap.type=parseFloat(p.getValue()),a.rendererUpdated.dispatch()}p.setValue(t.getKey("project/renderer/shadowType")),h.add(p);var g=new Te.l;n.add(g),g.add(new Te.p(i.getKey("sidebar/project/toneMapping")).setWidth("90px"));var y=(new Te.m).setOptions({0:"No",1:"Linear",2:"Reinhard",3:"Cineon",4:"ACESFilmic"}).setWidth("120px").onChange(f);y.setValue(t.getKey("project/renderer/toneMapping")),g.add(y);var v=new Te.j(t.getKey("project/renderer/toneMappingExposure"));function f(){v.setDisplay("0"===y.getValue()?"none":""),r.toneMapping=parseFloat(y.getValue()),r.toneMappingExposure=v.getValue(),a.rendererUpdated.dispatch()}function w(){(r=new l.WebGLRenderer({antialias:d.getValue()})).outputEncoding=l.sRGBEncoding,r.physicallyCorrectLights=u.getValue(),r.shadowMap.enabled=m.getValue(),r.shadowMap.type=parseFloat(p.getValue()),r.toneMapping=parseFloat(y.getValue()),r.toneMappingExposure=v.getValue(),a.rendererCreated.dispatch(r),a.rendererUpdated.dispatch()}return v.setDisplay("0"===y.getValue()?"none":""),v.setWidth("30px").setMarginLeft("10px"),v.setRange(0,10),v.onChange(f),g.add(v),w(),a.editorCleared.add((function(){r.physicallyCorrectLights=!1,r.shadowMap.enabled=!0,r.shadowMap.type=l.PCFShadowMap,r.toneMapping=l.NoToneMapping,r.toneMappingExposure=1,u.setValue(r.physicallyCorrectLights),m.setValue(r.shadowMap.enabled),p.setValue(r.shadowMap.type),y.setValue(r.toneMapping),v.setValue(r.toneMappingExposure),v.setDisplay(0===r.toneMapping?"none":""),a.rendererUpdated.dispatch()})),a.rendererUpdated.add((function(){t.setKey("project/renderer/antialias",d.getValue(),"project/renderer/physicallyCorrectLights",u.getValue(),"project/renderer/shadows",m.getValue(),"project/renderer/shadowType",parseFloat(p.getValue()),"project/renderer/toneMapping",parseFloat(y.getValue()),"project/renderer/toneMappingExposure",v.getValue())})),n}function yt(e){var t=e.config,a=e.signals,i=e.strings,r=new Te.n,n=new Te.k;n.setBorderTop("0"),n.setPaddingTop("20px"),r.add(n);var o=new Te.l,s=new Te.h(t.getKey("project/title")).setLeft("100px").setWidth("150px").onChange((function(){t.setKey("project/title",this.getValue())}));o.add(new Te.p(i.getKey("sidebar/project/title")).setWidth("90px")),o.add(s),n.add(o);var d=new Te.l,l=new Te.c(t.getKey("project/editable")).setLeft("100px").onChange((function(){t.setKey("project/editable",this.getValue())}));d.add(new Te.p(i.getKey("sidebar/project/editable")).setWidth("90px")),d.add(l),n.add(d);var c=new Te.l,u=new Te.c(t.getKey("project/vr")).setLeft("100px").onChange((function(){t.setKey("project/vr",this.getValue())}));return c.add(new Te.p(i.getKey("sidebar/project/vr")).setWidth("90px")),c.add(u),n.add(c),r.add(new gt(e)),a.editorCleared.add((function(){s.setValue(""),t.setKey("project/title","")})),r}function vt(e){var t=e.signals,a=e.strings,i=new Te.k,r=new Te.l;r.add(new Te.p(a.getKey("sidebar/settings/viewport").toUpperCase())),i.add(r);var n=new Te.l;n.add(new Te.p(a.getKey("sidebar/settings/viewport/grid")).setWidth("90px"));var o=new Ue.a(!0).onChange((function(){t.showGridChanged.dispatch(o.getValue())}));n.add(o),i.add(n);var s=new Te.l;s.add(new Te.p(a.getKey("sidebar/settings/viewport/helpers")).setWidth("90px"));var d=new Ue.a(!0).onChange((function(){t.showHelpersChanged.dispatch(d.getValue())}));return s.add(d),i.add(s),i}function ft(e){var t=e.strings,a=navigator.platform.toUpperCase().indexOf("MAC")>=0;function i(e){return e.match(/^[A-Za-z0-9]$/i)}var r=e.config,n=e.signals,o=new Te.k,s=new Te.l;s.add(new Te.p(t.getKey("sidebar/settings/shortcuts").toUpperCase())),o.add(s);var d=["translate","rotate","scale","undo","focus"];function l(e){var a="settings/shortcuts/"+e,n=new Te.l,s=(new Te.h).setWidth("15px").setFontSize("12px");s.setTextAlign("center"),s.setTextTransform("lowercase"),s.onChange((function(){var e=s.getValue().toLowerCase();i(e)&&r.setKey(a,e)})),s.dom.addEventListener("click",(function(){s.dom.select()})),s.dom.addEventListener("blur",(function(){i(s.getValue())||s.setValue(r.getKey(a))})),s.dom.addEventListener("keyup",(function(e){i(e.key)&&s.dom.blur()})),void 0!==r.getKey(a)&&s.setValue(r.getKey(a)),s.dom.maxLength=1,n.add(new Te.p(t.getKey("sidebar/settings/shortcuts/"+e)).setTextTransform("capitalize").setWidth("90px")),n.add(s),o.add(n)}for(var c=0;c<d.length;c++)l(d[c]);return document.addEventListener("keydown",(function(t){switch(t.key.toLowerCase()){case"backspace":t.preventDefault();case"delete":var i=e.selected;if(null===i)return;null!==i.parent&&e.execute(new N(e,i));break;case r.getKey("settings/shortcuts/translate"):n.transformModeChanged.dispatch("translate");break;case r.getKey("settings/shortcuts/rotate"):n.transformModeChanged.dispatch("rotate");break;case r.getKey("settings/shortcuts/scale"):n.transformModeChanged.dispatch("scale");break;case r.getKey("settings/shortcuts/undo"):(a?t.metaKey:t.ctrlKey)&&(t.preventDefault(),t.shiftKey?e.redo():e.undo());break;case r.getKey("settings/shortcuts/focus"):null!==e.selected&&e.focus(e.selected)}}),!1),o}function wt(e){var t=e.strings,a=e.signals,i=e.config,r=e.history,n=new Te.k;n.add(new Te.p(t.getKey("sidebar/history").toUpperCase()));var o=new Ue.a(i.getKey("settings/history"),t.getKey("sidebar/history/persistent"));o.setPosition("absolute").setRight("8px"),o.onChange((function(){var t=this.getValue();if(i.setKey("settings/history",t),t){alert("The history will be preserved across sessions.\nThis can have an impact on performance when working with textures.");var n=r.undos[r.undos.length-1],o=void 0!==n?n.id:0;e.history.enableSerialization(o)}else a.historyChanged.dispatch()})),n.add(o),n.add(new Te.a,new Te.a);var s=!1,d=new Ue.b(e);d.onChange((function(){s=!0,e.history.goToState(parseInt(d.getValue())),s=!1})),n.add(d);var l=function(){var e=[];function t(e){var t=document.createElement("div");return t.value=e.id,t}!function(a){for(var i=0,r=a.length;i<r;i++){var n=a[i],o=t(n);o.innerHTML="&nbsp;"+n.name,e.push(o)}}(r.undos),function(a){for(var i=a.length-1;i>=0;i--){var r=a[i],n=t(r);n.innerHTML="&nbsp;"+r.name,n.style.opacity=.3,e.push(n)}}(r.redos),d.setOptions(e)};return l(),a.editorCleared.add(l),a.historyChanged.add(l),a.historyChanged.add((function(e){!0!==s&&d.setValue(void 0!==e?e.id:null)})),n}function jt(e){var t=e.config,a=e.strings,i=new Te.n,r=new Te.k;r.setBorderTop("0"),r.setPaddingTop("20px"),i.add(r);var n=new Te.l,o=(new Te.m).setWidth("150px");return o.setOptions({en:"English",fr:"Fran\xe7ais",zh:"\u4e2d\u6587"}),void 0!==t.getKey("language")&&o.setValue(t.getKey("language")),o.onChange((function(){var t=this.getValue();e.config.setKey("language",t)})),n.add(new Te.p(a.getKey("sidebar/settings/language")).setWidth("90px")),n.add(o),r.add(n),i.add(new vt(e)),i.add(new ft(e)),i.add(new wt(e)),i}function xt(e){var t=e.strings,a=new Te.o;a.setId("sidebar");var i=(new Te.n).add(new Fe(e),new mt(e),new bt(e)),r=new yt(e),n=new jt(e);return a.addTab("scene",t.getKey("sidebar/scene"),i),a.addTab("project",t.getKey("sidebar/project"),r),a.addTab("settings",t.getKey("sidebar/settings"),n),a.select("scene"),a}function Ot(e){var t=e.strings,a=new Te.k;a.setClass("menu");var i=new Te.k;i.setClass("title"),i.setTextContent(t.getKey("menubar/add")),a.add(i);var r,n=new Te.k;return n.setClass("options"),a.add(n),(r=new Te.l).setClass("option"),r.setTextContent(t.getKey("menubar/add/group")),r.onClick((function(){var t=new l.Group;t.name="Zone",e.execute(new S(e,t))})),n.add(r),n.add(new Te.g),(r=new Te.l).setClass("option"),r.setTextContent(t.getKey("menubar/add/box")),r.onClick((function(){var t=new l.BoxGeometry(1,1,1,1,1,1),a=new l.Mesh(t,new l.MeshStandardMaterial);a.name="Box",e.execute(new S(e,a))})),n.add(r),(r=new Te.l).setClass("option"),r.setTextContent(t.getKey("menubar/add/sphere")),r.onClick((function(){var t=new l.SphereGeometry(1,32,16,0,2*Math.PI,0,Math.PI),a=new l.Mesh(t,new l.MeshStandardMaterial);a.name="Sphere",e.execute(new S(e,a))})),n.add(r),n.add(new Te.g),a}function St(e){var t=e.strings,a=new Te.k;a.setClass("menu");var i=new Te.k;i.setClass("title"),i.setTextContent(t.getKey("menubar/edit")),a.add(i);var r=new Te.k;r.setClass("options"),a.add(r);var n=new Te.l;n.setClass("option"),n.setTextContent(t.getKey("menubar/edit/undo")),n.onClick((function(){e.undo()})),r.add(n);var o,s=new Te.l;s.setClass("option"),s.setTextContent(t.getKey("menubar/edit/redo")),s.onClick((function(){e.redo()})),r.add(s),(o=new Te.l).setClass("option"),o.setTextContent(t.getKey("menubar/edit/clear_history")),o.onClick((function(){window.confirm("The Undo/Redo History will be cleared. Are you sure?")&&e.history.clear()})),r.add(o),e.signals.historyChanged.add((function(){var t=e.history;n.setClass("option"),s.setClass("option"),0==t.undos.length&&n.setClass("inactive"),0==t.redos.length&&s.setClass("inactive")})),r.add(new Te.g),(o=new Te.l).setClass("option"),o.setTextContent(t.getKey("menubar/edit/center")),o.onClick((function(){var t=e.selected;if(null!==t&&null!==t.parent){var a=(new l.Box3).setFromObject(t).getCenter(new l.Vector3),i=new l.Vector3;i.x=t.position.x+(t.position.x-a.x),i.y=t.position.y+(t.position.y-a.y),i.z=t.position.z+(t.position.z-a.z),e.execute(new z(e,t,i))}})),r.add(o),(o=new Te.l).setClass("option"),o.setTextContent(t.getKey("menubar/edit/clone")),o.onClick((function(){var t=e.selected;null!==t&&null!==t.parent&&(t=t.clone(),e.execute(new S(e,t)))})),r.add(o),(o=new Te.l).setClass("option"),o.setTextContent(t.getKey("menubar/edit/delete")),o.onClick((function(){var t=e.selected;null!==t&&null!==t.parent&&e.execute(new N(e,t))})),r.add(o),r.add(new Te.g),(o=new Te.l).setClass("option"),o.setTextContent(t.getKey("menubar/edit/fixcolormaps")),o.onClick((function(){e.scene.traverse(c)})),r.add(o);var d=["map","envMap","emissiveMap"];function c(t){var a=t.material;if(void 0!==a){if(!0===Array.isArray(a))for(var i=0;i<a.length;i++)u(a[i]);else u(a);e.signals.sceneGraphChanged.dispatch()}}function u(e){for(var t=e.needsUpdate,a=0;a<d.length;a++){var i=e[d[a]];i&&(i.encoding=l.sRGBEncoding,t=!0)}e.needsUpdate=t}return a}function Ct(e){var t=e.strings,a=new Te.k;a.setClass("menu");var i=new Te.k;i.setClass("title"),i.setTextContent(t.getKey("menubar/view")),a.add(i);var r=new Te.k;r.setClass("options"),a.add(r);var n=new Te.l;return n.setClass("option"),n.setTextContent(t.getKey("menubar/view/fullscreen")),n.onClick((function(){null===document.fullscreenElement?document.documentElement.requestFullscreen():document.exitFullscreen&&document.exitFullscreen(),null===document.webkitFullscreenElement?document.documentElement.webkitRequestFullscreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()})),r.add(n),"xr"in navigator&&navigator.xr.isSessionSupported("immersive-vr").then((function(t){if(t){var a=new Te.l;a.setClass("option"),a.setTextContent("VR"),a.onClick((function(){e.signals.toggleVR.dispatch()})),r.add(a)}})),a}var Mt=a(23);function kt(e){e.config;var t=e.strings,a=new Te.k;a.setClass("menu");var i=new Te.k;i.setClass("title"),i.setTextContent(t.getKey("menubar/file")),a.add(i);var r=new Te.k;r.setClass("options"),a.add(r),(o=new Te.l).setClass("option"),o.setTextContent(t.getKey("menubar/file/new")),o.onClick((function(){window.confirm("Any unsaved data will be lost. Are you sure?")&&e.clear()})),r.add(o),r.add(new Te.g);var n=document.createElement("form");n.style.display="none",document.body.appendChild(n);var o,s=document.createElement("input");s.multiple=!0,s.type="file",s.addEventListener("change",(function(){e.loader.loadFiles(s.files),n.reset()})),n.appendChild(s),(o=new Te.l).setClass("option"),o.setTextContent(t.getKey("menubar/file/import")),o.onClick((function(){s.click()})),r.add(o),r.add(new Te.g),(o=new Te.l).setClass("option"),o.setTextContent(t.getKey("menubar/file/export/geometry")),o.onClick((function(){var t=e.selected;if(null!==t){var a=t.geometry;if(void 0!==a){var i=a.toJSON();try{i=(i=JSON.stringify(i,null,"\t")).replace(/[\n\t]+([\d\.e\-\[\]]+)/g,"$1")}catch(r){i=JSON.stringify(i)}c(i,"geometry.json")}else alert("The selected object doesn't have geometry.")}else alert("No object selected.")})),r.add(o),(o=new Te.l).setClass("option"),o.setTextContent(t.getKey("menubar/file/export/object")),o.onClick((function(){var t=e.selected;if(null!==t){var a=t.toJSON();try{a=(a=JSON.stringify(a,null,"\t")).replace(/[\n\t]+([\d\.e\-\[\]]+)/g,"$1")}catch(i){a=JSON.stringify(a)}c(a,"model.json")}else alert("No object selected")})),r.add(o),(o=new Te.l).setClass("option"),o.setTextContent(t.getKey("menubar/file/export/scene")),o.onClick((function(){var t=e.scene.toJSON();try{t=(t=JSON.stringify(t,null,"\t")).replace(/[\n\t]+([\d\.e\-\[\]]+)/g,"$1")}catch(a){t=JSON.stringify(t)}c(t,"scene.json")})),r.add(o);var d=document.createElement("a");function l(e,t){d.href&&URL.revokeObjectURL(d.href),d.href=URL.createObjectURL(e),d.download=t||"data.json",d.dispatchEvent(new MouseEvent("click"))}function c(e,t){l(new Blob([e],{type:"text/plain"}),t)}return a}function Vt(e){var t=e.strings,a=new Te.k;a.setClass("menu");var i=new Te.k;i.setClass("title"),i.setTextContent(t.getKey("menubar/help")),a.add(i);var r,n=new Te.k;return n.setClass("options"),a.add(n),(r=new Te.l).setClass("option"),r.setTextContent(t.getKey("menubar/help/source_code")),r.onClick((function(){window.open("https://github.com/mrdoob/three.js/tree/master/editor","_blank")})),n.add(r),(r=new Te.l).setClass("option"),r.setTextContent(t.getKey("menubar/help/about")),r.onClick((function(){window.open("https://threejs.org","_blank")})),n.add(r),(r=new Te.l).setClass("option"),r.setTextContent(t.getKey("menubar/help/manual")),r.onClick((function(){window.open("https://github.com/mrdoob/three.js/wiki/Editor-Manual","_blank")})),n.add(r),a}function Et(e){var t=e.strings,a=new Te.k;a.setClass("menu right");var i=new Ue.a(e.config.getKey("autosave"),t.getKey("menubar/status/autosave"));i.text.setColor("#888"),i.onChange((function(){var t=this.getValue();e.config.setKey("autosave",t),!0===t&&e.signals.sceneGraphChanged.dispatch()})),a.add(i),e.signals.savingStarted.add((function(){i.text.setTextDecoration("underline")})),e.signals.savingFinished.add((function(){i.text.setTextDecoration("none")}));var r=new Te.p("r"+l.REVISION);return r.setClass("title"),r.setOpacity(.5),a.add(r),a}function Pt(e){var t=new Te.k;return t.setId("menubar"),t.add(new kt(e)),t.add(new St(e)),t.add(new Ot(e)),t.add(new Ct(e)),t.add(new Vt(e)),t.add(new Et(e)),t}function _t(e){var t=e.signals,a=document.createElement("div");function i(e){!1!==e.isPrimary&&(a.ownerDocument.removeEventListener("pointermove",r),a.ownerDocument.removeEventListener("pointerup",i))}function r(e){if(!1!==e.isPrimary){var i=a.getBoundingClientRect(),r=document.body.offsetWidth-i.right-e.movementX;a.style.right=r+"px",document.getElementById("sidebar").style.width=r+i.width+"px",document.getElementById("viewport").style.right=r+i.width+"px",t.windowResize.dispatch()}}return a.id="resizer",a.addEventListener("pointerdown",(function(e){!1!==e.isPrimary&&(a.ownerDocument.addEventListener("pointermove",r,!1),a.ownerDocument.addEventListener("pointerup",i,!1))}),!1),new Te.f(a)}a(78),a(79);var Tt=a(11);var Lt=function(e){var t=Object(r.useState)(),a=Object(d.a)(t,2),i=a[0],n=a[1],o=Object(r.useCallback)((function(e){n(null===e||void 0===e?void 0:e.name)}),[]);return Object(r.useEffect)((function(){return e.signal.add(o),function(){e.signal.remove(o)}}),[o,e.signal]),Object(Tt.jsxs)("div",{className:"SampleComponent",children:["Selected Name:",i]})},Nt=function(){function e(){Object(y.a)(this,e),this.polygons=[]}return Object(v.a)(e,[{key:"clone",value:function(){var t=new e;return t.polygons=this.polygons.map((function(e){return e.clone()})),t}},{key:"toPolygons",value:function(){return this.polygons}},{key:"union",value:function(t){var a=new Kt(this.clone().polygons),i=new Kt(t.clone().polygons);return a.clipTo(i),i.clipTo(a),i.invert(),i.clipTo(a),i.invert(),a.build(i.allPolygons()),e.fromPolygons(a.allPolygons())}},{key:"subtract",value:function(t){var a=new Kt(this.clone().polygons),i=new Kt(t.clone().polygons);return a.invert(),a.clipTo(i),i.clipTo(a),i.invert(),i.clipTo(a),i.invert(),a.build(i.allPolygons()),a.invert(),e.fromPolygons(a.allPolygons())}},{key:"intersect",value:function(t){var a=new Kt(this.clone().polygons),i=new Kt(t.clone().polygons);return a.invert(),i.clipTo(a),i.invert(),a.clipTo(i),i.clipTo(a),a.build(i.allPolygons()),a.invert(),e.fromPolygons(a.allPolygons())}},{key:"inverse",value:function(){var e=this.clone();return e.polygons.forEach((function(e){return e.flip()})),e}}]),e}();Nt.fromPolygons=function(e){var t=new Nt;return t.polygons=e,t};var Rt=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;Object(y.a)(this,e),this.x=t,this.y=a,this.z=i}return Object(v.a)(e,[{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}},{key:"clone",value:function(){return new e(this.x,this.y,this.z)}},{key:"negate",value:function(){return this.x*=-1,this.y*=-1,this.z*=-1,this}},{key:"add",value:function(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}},{key:"sub",value:function(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}},{key:"times",value:function(e){return this.x*=e,this.y*=e,this.z*=e,this}},{key:"dividedBy",value:function(e){return this.x/=e,this.y/=e,this.z/=e,this}},{key:"lerp",value:function(e,t){return this.add(At.copy(e).sub(this).times(t))}},{key:"unit",value:function(){return this.dividedBy(this.length())}},{key:"length",value:function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2)+Math.pow(this.z,2))}},{key:"normalize",value:function(){return this.unit()}},{key:"cross",value:function(e){var t=this,a=t.x,i=t.y,r=t.z,n=e.x,o=e.y,s=e.z;return this.x=i*s-r*o,this.y=r*n-a*s,this.z=a*o-i*n,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z}}]),e}(),At=new Rt,Dt=new Rt,Gt=function(){function e(t,a,i,r){Object(y.a)(this,e),this.pos=(new Rt).copy(t),this.normal=(new Rt).copy(a),this.uv=(new Rt).copy(i),this.uv.z=0,r&&(this.color=(new Rt).copy(r))}return Object(v.a)(e,[{key:"clone",value:function(){return new e(this.pos,this.normal,this.uv,this.color)}},{key:"flip",value:function(){this.normal.negate()}},{key:"interpolate",value:function(t,a){return new e(this.pos.clone().lerp(t.pos,a),this.normal.clone().lerp(t.normal,a),this.uv.clone().lerp(t.uv,a),this.color&&t.color&&this.color.clone().lerp(t.color,a))}}]),e}(),Bt=function(){function e(t,a){Object(y.a)(this,e),this.normal=t,this.w=a}return Object(v.a)(e,[{key:"clone",value:function(){return new e(this.normal.clone(),this.w)}},{key:"flip",value:function(){this.normal.negate(),this.w=-this.w}},{key:"splitPolygon",value:function(t,a,i,r,n){for(var o=0,s=[],d=0;d<t.vertices.length;d++){var l=this.normal.dot(t.vertices[d].pos)-this.w,c=l<-e.EPSILON?2:l>e.EPSILON?1:0;o|=c,s.push(c)}switch(o){case 0:(this.normal.dot(t.plane.normal)>0?a:i).push(t);break;case 1:r.push(t);break;case 2:n.push(t);break;case 3:for(var u=[],h=[],m=0;m<t.vertices.length;m++){var p=(m+1)%t.vertices.length,b=s[m],g=s[p],y=t.vertices[m],v=t.vertices[p];if(2!=b&&u.push(y),1!=b&&h.push(2!=b?y.clone():y),3==(b|g)){var f=(this.w-this.normal.dot(y.pos))/this.normal.dot(At.copy(v.pos).sub(y.pos)),w=y.interpolate(v,f);u.push(w),h.push(w.clone())}}u.length>=3&&r.push(new It(u,t.shared)),h.length>=3&&n.push(new It(h,t.shared))}}}]),e}();Bt.EPSILON=1e-5,Bt.fromPoints=function(e,t,a){var i=At.copy(t).sub(e).cross(Dt.copy(a).sub(e)).normalize();return new Bt(i.clone(),i.dot(e))};var It=function(){function e(t,a){Object(y.a)(this,e),this.vertices=t,this.shared=a,this.plane=Bt.fromPoints(t[0].pos,t[1].pos,t[2].pos)}return Object(v.a)(e,[{key:"clone",value:function(){return new e(this.vertices.map((function(e){return e.clone()})),this.shared)}},{key:"flip",value:function(){this.vertices.reverse().map((function(e){return e.flip()})),this.plane.flip()}}]),e}(),Kt=function(){function e(t){Object(y.a)(this,e),this.plane=null,this.front=null,this.back=null,this.polygons=[],t&&this.build(t)}return Object(v.a)(e,[{key:"clone",value:function(){var t=new e;return t.plane=this.plane&&this.plane.clone(),t.front=this.front&&this.front.clone(),t.back=this.back&&this.back.clone(),t.polygons=this.polygons.map((function(e){return e.clone()})),t}},{key:"invert",value:function(){for(var e=0;e<this.polygons.length;e++)this.polygons[e].flip();this.plane&&this.plane.flip(),this.front&&this.front.invert(),this.back&&this.back.invert();var t=this.front;this.front=this.back,this.back=t}},{key:"clipPolygons",value:function(e){if(!this.plane)return e.slice();for(var t=[],a=[],i=0;i<e.length;i++)this.plane.splitPolygon(e[i],t,a,t,a);return this.front&&(t=this.front.clipPolygons(t)),a=this.back?this.back.clipPolygons(a):[],t.concat(a)}},{key:"clipTo",value:function(e){this.polygons=e.clipPolygons(this.polygons),this.front&&this.front.clipTo(e),this.back&&this.back.clipTo(e)}},{key:"allPolygons",value:function(){var e=this.polygons.slice();return this.front&&(e=e.concat(this.front.allPolygons())),this.back&&(e=e.concat(this.back.allPolygons())),e}},{key:"build",value:function(t){if(t.length){this.plane||(this.plane=t[0].plane.clone());for(var a=[],i=[],r=0;r<t.length;r++)this.plane.splitPolygon(t[r],this.polygons,this.polygons,a,i);a.length&&(this.front||(this.front=new e),this.front.build(a)),i.length&&(this.back||(this.back=new e),this.back.build(i))}}}]),e}();Nt.fromJSON=function(e){return Nt.fromPolygons(e.polygons.map((function(e){return new It(e.vertices.map((function(e){return new Gt(e.pos,e.normal,e.uv)})),e.shared)})))};l.BufferGeometry,l.Vector3,l.Vector2;Nt.fromGeometry=function(e,t){var a=[];if(e.isGeometry)for(var i=e.faces,r=e.vertices,n=["a","b","c"],o=0;o<i.length;o++){for(var s=i[o],d=[],l=0;l<3;l++)d.push(new Gt(r[s[n[l]]],s.vertexNormals[l],e.faceVertexUvs[0][o][l]));a.push(new It(d,t))}else if(e.isBufferGeometry){var c,u=e.attributes.position,h=e.attributes.normal,m=e.attributes.uv,p=e.attributes.color;if(e.index)c=e.index.array;else{c=new Array(u.array.length/u.itemSize|0);for(var b=0;b<c.length;b++)c[b]=b}var g=c.length/3|0;a=new Array(g);for(var y=0,v=0,f=c.length;y<f;y+=3,v++){for(var w=new Array(3),j=0;j<3;j++){var x=c[y+j],O=3*x,S=2*x,C=u.array[O],M=u.array[O+1],k=u.array[O+2],V=h.array[O],E=h.array[O+1],P=h.array[O+2],_=m.array[S],T=m.array[S+1];w[j]=new Gt({x:C,y:M,z:k},{x:V,y:E,z:P},{x:_,y:T,z:0},p&&{x:p.array[S],y:p.array[S+1],z:p.array[S+2]})}a[v]=new It(w,t)}}else console.error("Unsupported CSG input type:"+e.type);return Nt.fromPolygons(a)};var Ut=new l.Vector3,Ft=new l.Matrix3;Nt.fromMesh=function(e,t){var a=Nt.fromGeometry(e.geometry,t);Ft.getNormalMatrix(e.matrix);for(var i=0;i<a.polygons.length;i++)for(var r=a.polygons[i],n=0;n<r.vertices.length;n++){var o=r.vertices[n];o.pos.copy(Ut.copy(o.pos).applyMatrix4(e.matrix)),o.normal.copy(Ut.copy(o.normal).applyMatrix3(Ft))}return a};var zt=function(e){return{top:0,array:new Float32Array(e),write:function(e){this.array[this.top++]=e.x,this.array[this.top++]=e.y,this.array[this.top++]=e.z}}};Nt.toMesh=function(e,t,a){var i=Nt.toGeometry(e,t),r=new l.Mesh(i,a);return r.matrix.copy(t),r.matrix.decompose(r.position,r.quaternion,r.scale),r.rotation.setFromQuaternion(r.quaternion),r.updateMatrixWorld(),r.castShadow=r.receiveShadow=!0,r},Nt.toGeometry=function(e,t){var a,i=e.polygons,r=0;i.forEach((function(e){return r+=e.vertices.length-2})),a=new l.BufferGeometry;var n,o=zt(3*r*3),s=zt(3*r*3),d={top:0,array:new Float32Array(2*r*3),write:function(e){this.array[this.top++]=e.x,this.array[this.top++]=e.y}},c=[];if(i.forEach((function(e){var t=e.vertices,a=t.length;void 0!==e.shared&&(c[e.shared]||(c[e.shared]=[])),a&&void 0!==t[0].color&&(n||(n=zt(3*r*3)));for(var i=3;i<=a;i++)void 0!==e.shared&&c[e.shared].push(o.top/3,o.top/3+1,o.top/3+2),o.write(t[0].pos),o.write(t[i-2].pos),o.write(t[i-1].pos),s.write(t[0].normal),s.write(t[i-2].normal),s.write(t[i-1].normal),d.write(t[0].uv),d.write(t[i-2].uv),d.write(t[i-1].uv),n&&(n.write(t[0].color)||n.write(t[i-2].color)||n.write(t[i-1].color))})),a.setAttribute("position",new l.BufferAttribute(o.array,3)),a.setAttribute("normal",new l.BufferAttribute(s.array,3)),a.setAttribute("uv",new l.BufferAttribute(d.array,2)),n&&a.setAttribute("color",new l.BufferAttribute(n.array,3)),c.length){for(var u=[],h=0,m=0;m<c.length;m++)a.addGroup(h,c[m].length,m),h+=c[m].length,u=u.concat(c[m]);a.setIndex(u)}var p=(new l.Matrix4).copy(t).invert();return a.applyMatrix4(p),a.computeBoundingSphere(),a.computeBoundingBox(),a};var Wt=Nt,Ht=a(131),Jt=function(){function e(t,a){var i=this;if(Object(y.a)(this,e),this.commonPrefix=void 0,this.tails=void 0,this.getDimension=function(e){if(Array.isArray(e)){var t=null;return e.every((function(e){return null===(t=i.getDimension(e))})),null===t?t:t+1}return null===e?null:0},null!=t)switch(this.getDimension(t)){case 0:this.commonPrefix=[t];break;case 1:this.commonPrefix=t;break;default:this.commonPrefix=[]}else this.commonPrefix=[];if(null!=a)switch(this.getDimension(a)){case 0:this.tails=[[a]];break;case 1:this.tails=[a];break;case 2:this.tails=a;break;default:this.tails=[]}else this.tails=[]}return Object(v.a)(e,[{key:"parseOperation",value:function(e,t){switch(e){case"intersection":this.extendPrefix(t);break;case"left-subtraction":this.extendPrefix(-t);break;case"right-subtraction":this.shiftTails(t),console.log(this.commonPrefix,this.tails)}}},{key:"extendPrefix",value:function(e){this.commonPrefix=[e].concat(Object(Mt.a)(this.commonPrefix))}},{key:"shiftTails",value:function(e){this.tails=[].concat(Object(Mt.a)(this.commonPrefix.map((function(e){return[-e]}))),Object(Mt.a)(this.tails.reduce((function(e,t){return console.log("prev array",e),0===e.length?t.map((function(e){return[-e]})):t.reduceRight((function(t,a){return[].concat(Object(Mt.a)(t),Object(Mt.a)(e.reduceRight((function(e,t){return-1!==t.indexOf(-a)?e:[].concat(Object(Mt.a)(e),[[].concat(Object(Mt.a)(t),[-a])])}),[])))}),[])}),[]))),this.commonPrefix=[e]}},{key:"toString",value:function(){var e=this.commonPrefix.reduceRight((function(e,t){return e+(t>0?"+"+t:t)+" "}),"");return(this.tails.reduceRight((function(t,a){return t+a.reduce((function(e,t){return(t>0?"+"+t:t)+" "+e}),"")+e+"OR "}),"")+(0===this.tails.length?e+" OR":"")).slice(0,-4)}}]),e}();function Yt(e){console.log(e);var t="";e.forEach((function(e){t=t.concat(function(e){var t,a;return(null===(t=e.geometries)||void 0===t?void 0:t[0])?(a=new Jt([e.geometries[0]],[]),e.operations.every((function(t,i){var r,n,o;return!(!(null===(r=e.geometries)||void 0===r?void 0:r[i+1])||!t)&&(n=null===(o=e.geometries)||void 0===o?void 0:o[i+1],a.parseOperation(t,n),!0)})),a.toString()):""}(e)+" OR")})),console.log(t.slice(0,-3))}var Xt=a(132),Zt=a(133);var Qt=function(e){var t,a=Object(r.useState)(null!==(t=null===e||void 0===e?void 0:e.value)&&void 0!==t?t:0),i=Object(d.a)(a,2),n=i[0],o=i[1];return Object(Tt.jsxs)(Xt.a,{labelId:"GeometryLabel"+e.id,id:"GeometryInput"+e.id,label:e.id,className:"geometrySelect",displayEmpty:!0,value:n,onChange:function(t){o(t.target.value),e.push(t.target.value)},children:[Object(Tt.jsx)(Zt.a,{disabled:!0,value:0,children:Object(Tt.jsx)("em",{children:"Geometry"})}),e.geometries.map((function(e,t){return Object(Tt.jsx)(Zt.a,{value:e.id,children:e.name},e.id)}))]})};var qt=function(e){var t,a=Object(r.useState)(null!==(t=null===e||void 0===e?void 0:e.value)&&void 0!==t?t:""),i=Object(d.a)(a,2),n=i[0],o=i[1];return Object(Tt.jsxs)(Xt.a,{id:"OperationInput"+e.id,label:e.id,className:"operationSelect",value:n,onChange:function(t){o(t.target.value),""!==t.target.value?e.push(t.target.value):e.pop()},children:[Object(Tt.jsx)(Zt.a,{disabled:!0,value:0,children:Object(Tt.jsx)("em",{children:"Operation"})}),e.canClear&&Object(Tt.jsx)(Zt.a,{value:"",children:"X"}),Object(Tt.jsx)(Zt.a,{value:"left-subtraction",children:Object(Tt.jsx)("img",{src:"./images/L.png",alt:"left subtraction"})}),Object(Tt.jsx)(Zt.a,{value:"intersection",children:Object(Tt.jsx)("img",{src:"./images/S.png",alt:"intersection"})}),Object(Tt.jsx)(Zt.a,{value:"right-subtraction",children:Object(Tt.jsx)("img",{src:"./images/R.png",alt:"right subtraction"})})]})};var $t=function(e){var t,a=Object(r.useState)(null!==(t=e.value)&&void 0!==t?t:{geometries:[],operations:[]}),i=Object(d.a)(a,2),n=i[0],o=i[1],s=function(t){return function(a){t===n.geometries.length?o((function(t){var i,r;return{geometries:[].concat(Object(Mt.a)(t.geometries),[null!==(i=null===(r=e.possibleObjects.find((function(e){return e.id===a})))||void 0===r?void 0:r.id)&&void 0!==i?i:null]),operations:t.operations}})):o((function(e){return{geometries:Object(Mt.a)(e.geometries.map((function(e,i){return t===i?a:e}))),operations:e.operations}}))}},l=function(e){return function(){o((function(t){return{geometries:Object(Mt.a)(t.geometries.slice(0,e+1)),operations:Object(Mt.a)(t.operations.slice(0,e))}}))}};Object(r.useEffect)((function(){e.change(n)}),[n]),Object(r.useEffect)((function(){var t;o(null!==(t=e.value)&&void 0!==t?t:{geometries:[],operations:[]})}),[e]);var c=function(e){return function(t){e===n.operations.length?o((function(e){return{geometries:e.geometries,operations:[].concat(Object(Mt.a)(e.operations),[t])}})):o((function(a){return{geometries:a.geometries,operations:Object(Mt.a)(a.operations.map((function(a,i){return i===e?t:a})))}}))}};return Object(Tt.jsxs)("div",{className:"zoneManagerRow",children:[n.geometries.map((function(t,a){var i;return Object(Tt.jsxs)(r.Fragment,{children:[Object(Tt.jsx)(Qt,{id:a,geometries:e.possibleObjects,push:s(a),value:t}),Object(Tt.jsx)(qt,{id:a,push:c(a),pop:l(a),value:null===(i=n.operations)||void 0===i?void 0:i[a],canClear:n.operations.length<=a+1})]},a)})),n.operations.length===n.geometries.length&&Object(Tt.jsx)(Qt,{id:n.geometries.length,geometries:e.possibleObjects,push:s(n.geometries.length)}),Object(Tt.jsx)(Ht.a,{className:"deleteButton",onClick:e.del,children:"X"})]})};a(86);var ea=function(e){var t=Object(r.useState)([{geometries:[],operations:[]}]),a=Object(d.a)(t,2),i=a[0],n=a[1],o=Object(r.useState)([]),s=Object(d.a)(o,2),l=s[0],c=s[1],u=Object(r.useCallback)((function(){c(Object(Mt.a)(e.editor.scene.children))}),[e]);return Object(r.useEffect)((function(){return u(),e.editor.signals.objectAdded.add(u),e.editor.signals.objectRemoved.add(u),function(){e.editor.signals.objectAdded.remove(u),e.editor.signals.objectRemoved.remove(u)}}),[e,u]),Object(Tt.jsxs)("div",{className:"zoneManagerWrapper",children:[i.map((function(e,t){return Object(Tt.jsx)($t,{id:t,del:(i=t,function(){n((function(e){var t=Object(Mt.a)(e.filter((function(e,t){return t!==i})));return 0===t.length&&t.push({geometries:[],operations:[]}),t}))}),change:(a=t,function(e){n((function(t){return Object(Mt.a)(t.map((function(t,i){return a===i?e:t})))}))}),value:e,possibleObjects:l},t);var a,i})),Object(Tt.jsx)(Ht.a,{className:"addRowButton",onClick:function(){n((function(e){return[].concat(Object(Mt.a)(e),[{geometries:[],operations:[]}])}))},children:"+"}),Object(Tt.jsx)(Ht.a,{className:"parseZoneButton",onClick:function(){return Yt(i)},children:"Parse Zone"})]})};var ta=function(){var e=Object(r.useRef)(null),t=Object(r.useState)(),a=Object(d.a)(t,2),i=a[0],n=a[1];return Object(r.useEffect)((function(){if(e.current){var t=function(e){e=e||document.body,window.URL=window.URL||window.webkitURL,window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder,Number.prototype.format=function(){return this.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")};var t=new q;window.editor=t,window.THREE=l;var a=new Be(t);e.appendChild(a.dom);var i=new Ke(t);e.appendChild(i.dom);var r=new xt(t);e.appendChild(r.dom);var n=new Pt(t);e.appendChild(n.dom);var o=new _t(t);function s(){t.signals.windowResize.dispatch()}e.appendChild(o.dom),t.storage.init((function(){var e;function a(){!1!==t.config.getKey("autosave")&&(clearTimeout(e),e=setTimeout((function(){t.signals.savingStarted.dispatch(),e=setTimeout((function(){t.storage.set(t.toJSON()),t.signals.savingFinished.dispatch()}),100)}),1e3))}t.storage.get((function(e){if(!d){void 0!==e&&t.fromJSON(e);var a=t.config.getKey("selected");void 0!==a&&t.selectByUuid(a)}}));var i=t.signals;i.geometryChanged.add(a),i.objectAdded.add(a),i.objectChanged.add(a),i.objectRemoved.add(a),i.materialChanged.add(a),i.sceneBackgroundChanged.add(a),i.sceneEnvironmentChanged.add(a),i.sceneFogChanged.add(a),i.sceneGraphChanged.add(a),i.scriptChanged.add(a),i.historyChanged.add(a)})),document.addEventListener("dragover",(function(e){e.preventDefault(),e.dataTransfer.dropEffect="copy"}),!1),document.addEventListener("drop",(function(e){e.preventDefault(),"text/plain"!==e.dataTransfer.types[0]&&(e.dataTransfer.items?t.loader.loadItemList(e.dataTransfer.items):t.loader.loadFiles(e.dataTransfer.files))}),!1),window.addEventListener("resize",s,!1),s();var d=!1,c=window.location.hash;if("file="===c.substr(1,5)){var u=c.substr(6);if(window.confirm("Any unsaved data will be lost. Are you sure?")){var h=new l.FileLoader;h.crossOrigin="",h.load(u,(function(e){t.clear(),t.fromJSON(JSON.parse(e))})),d=!0}}return{editor:t,viewport:a,toolbar:i,sidebar:r,menubar:n,resizer:o}}(e.current),a=t.editor;t.viewport,t.toolbar,t.sidebar,t.menubar,t.resizer;n(a);var i=new l.Mesh(new l.BoxGeometry(1,1,1)),r=new l.Mesh(new l.BoxGeometry(1,1,1));r.position.add(new l.Vector3(.5,.5,.5)),i.updateMatrix(),r.updateMatrix();var o=Wt.fromMesh(i),s=Wt.fromMesh(r),d=o.subtract(s),c=Wt.toMesh(d,i.matrix,i.material);c.name="meshResult",c.material=new l.MeshNormalMaterial,a.sceneHelpers.add(c)}return function(){}}),[e]),Object(Tt.jsx)("div",{className:"ThreeEditor",ref:e,children:i&&Object(Tt.jsxs)(Tt.Fragment,{children:[Object(Tt.jsx)(Lt,{signal:i.signals.objectSelected}),Object(Tt.jsx)(ea,{editor:i})]})})};var aa=function(){return Object(Tt.jsx)(Tt.Fragment,{children:Object(Tt.jsx)(ta,{})})},ia=function(e){e&&e instanceof Function&&a.e(19).then(a.bind(null,135)).then((function(t){var a=t.getCLS,i=t.getFID,r=t.getFCP,n=t.getLCP,o=t.getTTFB;a(e),i(e),r(e),n(e),o(e)}))};s.a.render(Object(Tt.jsx)(n.a.StrictMode,{children:Object(Tt.jsx)(aa,{})}),document.getElementById("root")),ia()}},[[87,1,2]]]);
//# sourceMappingURL=main.18c8a925.chunk.js.map